/*! https://github.com/xiazeyu/live2d-widget.js built@2019-4-6 09:38:17 */webpackJsonpL2Dwidget([0],{76:function(ai,F,vt){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.captureFrame=F.theRealInit=void 0;var B,S=vt(38),y=vt(80),M=vt(77),pt=vt(78),b=vt(84),d=vt(81),E=vt(79),O=vt(39),P=(B=O,B&&B.__esModule?B:{default:B}),Pt=vt(37),rt=null,Yt=void 0,Qt=!1,mt=null,Ft=null,f=null,g=null,A=!1,L=.5;function Y(w,Q,z){if(Q.x<z.left+z.width&&Q.y<z.top+z.height&&Q.x>z.left&&Q.y>z.top)return Q;var U=w.x-Q.x,Lt=w.y-Q.y;function tt(Wt,Li){return 180*Math.acos((si={x:0,y:1},fi=function(Dt,ci){var Jt=Math.sqrt(Dt*Dt+ci*ci);return{x:Dt/Jt,y:ci/Jt}}(Wt,Li),si.x*fi.x+si.y*fi.y))/Math.PI;var si,fi}var st=tt(U,Lt);Q.x<w.x&&(st=360-st);var R=360-tt(z.left-w.x,-1*(z.top-w.y)),Zt=360-tt(z.left-w.x,-1*(z.top+z.height-w.y)),_i=tt(z.left+z.width-w.x,-1*(z.top-w.y)),ti=tt(z.left+z.width-w.x,-1*(z.top+z.height-w.y)),ft=Lt/U,xt={};if(st<_i){var xi=z.top-w.y,ct=xi/ft;xt={y:w.y+xi,x:w.x+ct}}else if(st<ti){var ui=z.left+z.width-w.x,jt=ui*ft;xt={y:w.y+jt,x:w.x+ui}}else if(st<Zt){var Ct=z.top+z.height-w.y,ni=Ct/ft;xt={y:w.y+Ct,x:w.x+ni}}else if(st<R){var pi=w.x-z.left,dt=pi*ft;xt={y:w.y-dt,x:w.x-pi}}else{var Kt=z.top-w.y,Oi=Kt/ft;xt={y:w.y+Kt,x:w.x+Oi}}return xt}function X(w){A=!0;var Q=y.currCanvas.getBoundingClientRect(),z=yt(w.clientX-Q.left),U=nt(w.clientY-Q.top),Lt=Y({x:Q.left+Q.width/2,y:Q.top+Q.height*L},{x:w.clientX,y:w.clientY},Q),tt=J(Lt.x-Q.left),st=H(Lt.y-Q.top);E.cDefine.DEBUG_MOUSE_LOG&&console.log("modelTapEvent onMouseDown device( x:"+w.clientX+" y:"+w.clientY+" ) view( x:"+tt+" y:"+st+")"),Pt.L2Dwidget.emit("tap",w),rt.tapEvent(tt,st)}function C(){A&&(A=!1),mt.setPoint(0,0)}function q(w){if(w.type=="mousedown")X(w);else if(w.type=="mousemove")(function(Q){A=!0;var z=y.currCanvas.getBoundingClientRect(),U=yt(Q.clientX-z.left),Lt=nt(Q.clientY-z.top),tt=Y({x:z.left+z.width/2,y:z.top+z.height*L},{x:Q.clientX,y:Q.clientY},z),st=J(tt.x-z.left),R=H(tt.y-z.top);E.cDefine.DEBUG_MOUSE_LOG&&console.log("modelTurnHead onMouseMove device( x:"+Q.clientX+" y:"+Q.clientY+" ) view( x:"+st+" y:"+R+")"),mt.setPoint(st,R)})(w);else if(w.type=="mouseup"){if("button"in w&&w.button!=0)return}else w.type=="mouseleave"&&C()}function Et(w){var Q=w.touches[0];w.type=="touchstart"?w.touches.length==1&&X(Q):w.type=="touchmove"?function(z){var U=y.currCanvas.getBoundingClientRect(),Lt=yt(z.clientX-U.left),tt=nt(z.clientY-U.top),st=Y({x:U.left+U.width/2,y:U.top+U.height*L},{x:z.clientX,y:z.clientY},U),R=J(st.x-U.left),Zt=H(st.y-U.top);E.cDefine.DEBUG_MOUSE_LOG&&console.log("followPointer onMouseMove device( x:"+z.clientX+" y:"+z.clientY+" ) view( x:"+R+" y:"+Zt+")"),A&&mt.setPoint(R,Zt)}(Q):w.type=="touchend"&&C()}function J(w){var Q=g.transformX(w);return Ft.invertTransformX(Q)}function H(w){var Q=g.transformY(w);return Ft.invertTransformY(Q)}function yt(w){return g.transformX(w)}function nt(w){return g.transformY(w)}F.theRealInit=function(){(0,y.createElement)(),y.currCanvas.addEventListener&&(window.addEventListener("click",q),window.addEventListener("mousedown",q),window.addEventListener("mousemove",q),window.addEventListener("mouseup",q),document.addEventListener("mouseleave",q),window.addEventListener("touchstart",Et),window.addEventListener("touchend",Et),window.addEventListener("touchmove",Et)),rt=new b.cManager(Pt.L2Dwidget),mt=new pt.L2DTargetPoint;var w=y.currCanvas.getBoundingClientRect(),Q=w.height/w.width,z=E.cDefine.VIEW_LOGICAL_LEFT,U=E.cDefine.VIEW_LOGICAL_RIGHT,Lt=-Q,tt=Q;(Ft=new pt.L2DViewMatrix).setScreenRect(z,U,Lt,tt),Ft.setMaxScreenRect(E.cDefine.VIEW_LOGICAL_MAX_LEFT,E.cDefine.VIEW_LOGICAL_MAX_RIGHT,E.cDefine.VIEW_LOGICAL_MAX_BOTTOM,E.cDefine.VIEW_LOGICAL_MAX_TOP),st=P.default.mobile()&&S.config.mobile.scale||S.config.model.scale,Ft.adjustScale(0,0,st);var st;(f=new pt.L2DMatrix44).multScale(1,w.width/w.height),(g=new pt.L2DMatrix44).multTranslate(-w.width/2,-w.height/2),g.multScale(2/w.width,-2/w.height),M.Live2D.setGL(y.currWebGL),y.currWebGL.clearColor(0,0,0,0),R=S.config.model.jsonPath,rt.reloadFlg=!0,rt.count++,rt.changeModel(y.currWebGL,R);var R;Qt||(Qt=!0,function Zt(){(function(){d.MatrixStack.reset(),d.MatrixStack.loadIdentity(),mt.update(),rt.setDrag(mt.getX(),mt.getY()),y.currWebGL.clear(y.currWebGL.COLOR_BUFFER_BIT),d.MatrixStack.multMatrix(f.getArray()),d.MatrixStack.multMatrix(Ft.getArray()),d.MatrixStack.push();for(var ti=0;ti<rt.numModels();ti++){var ft=rt.getModel(ti);if(ft==null)return;ft.initialized&&!ft.updating&&(ft.update(),ft.draw(y.currWebGL))}d.MatrixStack.pop()})();var _i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;_i(Zt,y.currCanvas),Yt!==void 0&&(Yt(y.currCanvas.toDataURL()),Yt=void 0)}())},F.captureFrame=function(w){Yt=w}},77:function(ai,F,vt){"use strict";(function(B){Object.defineProperty(F,"__esModule",{value:!0});var S=!0;function y(){S||(this._$MT=null,this._$5S=null,this._$NP=0,y._$42++,this._$5S=new R(this))}y._$0s=1,y._$4s=2,y._$42=0,y._$62=function(t,i){try{if(i instanceof ArrayBuffer&&(i=new DataView(i)),!(i instanceof DataView))throw new li("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");var e,r=new qt(i),n=r._$ST(),o=r._$ST(),h=r._$ST();if(n!=109||o!=111||h!=99)throw new li("_$gi _$C _$li , _$Q0 _$P0.");if(e=r._$ST(),r._$gr(e),e>st._$T7)throw t._$NP|=y._$4s,new li("_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+st._$T7+" < _$f0 : "+e+` )@_$SS#loadModel()
`);var _=r._$nP();if(e>=st._$s7){var a=r._$9T(),s=r._$9T();if(a!=-30584||s!=-30584)throw t._$NP|=y._$0s,new li("_$gi _$C _$li , _$0 _$6 _$Ui.")}t._$KS(_);var u=t.getModelContext();u.setDrawParam(t.getDrawParam()),u.init()}catch(p){d._$Rb(p)}},y.prototype._$KS=function(t){this._$MT=t},y.prototype.getModelImpl=function(){return this._$MT==null&&(this._$MT=new Pt,this._$MT._$zP()),this._$MT},y.prototype.getCanvasWidth=function(){return this._$MT==null?0:this._$MT.getCanvasWidth()},y.prototype.getCanvasHeight=function(){return this._$MT==null?0:this._$MT.getCanvasHeight()},y.prototype.getParamFloat=function(t){return typeof t!="number"&&(t=this._$5S.getParamIndex(P.getID(t))),this._$5S.getParamFloat(t)},y.prototype.setParamFloat=function(t,i,e){typeof t!="number"&&(t=this._$5S.getParamIndex(P.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)*(1-e)+i*e)},y.prototype.addToParamFloat=function(t,i,e){typeof t!="number"&&(t=this._$5S.getParamIndex(P.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)+i*e)},y.prototype.multParamFloat=function(t,i,e){typeof t!="number"&&(t=this._$5S.getParamIndex(P.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)*(1+(i-1)*e))},y.prototype.getParamIndex=function(t){return this._$5S.getParamIndex(P.getID(t))},y.prototype.loadParam=function(){this._$5S.loadParam()},y.prototype.saveParam=function(){this._$5S.saveParam()},y.prototype.init=function(){this._$5S.init()},y.prototype.update=function(){this._$5S.update()},y.prototype._$Rs=function(){return d._$li("_$60 _$PT _$Rs()"),-1},y.prototype._$Ds=function(t){d._$li(`_$60 _$PT _$SS#_$Ds() 
`)},y.prototype._$K2=function(){},y.prototype.draw=function(){},y.prototype.getModelContext=function(){return this._$5S},y.prototype._$s2=function(){return this._$NP},y.prototype._$P7=function(t,i,e,r){var n=-1,o=0;if(e!=0)if(t.length==1){$=t[0];var h=this.getParamFloat($)!=0,_=(c=i[0],this.getPartsOpacity(c)),a=e/r;h?(_+=a)>1&&(_=1):(_-=a)<0&&(_=0),this.setPartsOpacity(c,_)}else{for(p=0;p<t.length;p++)if($=t[p],l=this.getParamFloat($)!=0){if(n>=0)break;n=p,c=i[p],o=this.getPartsOpacity(c),(o+=e/r)>1&&(o=1)}for(n<0&&(console.log("No _$wi _$q0/ _$U default[%s]",t[0]),n=0,o=1,this.loadParam(),this.setParamFloat(t[n],o),this.saveParam()),p=0;p<t.length;p++)if(c=i[p],n==p)this.setPartsOpacity(c,o);else{var s,u=this.getPartsOpacity(c);(1-(s=o<.5?-.5*o/.5+1:.5*(1-o)/.5))*(1-o)>.15&&(s=1-.15/(1-o)),u>s&&(u=s),this.setPartsOpacity(c,u)}}else for(var p=0;p<t.length;p++){var $=t[p],c=i[p],l=this.getParamFloat($)!=0;this.setPartsOpacity(c,l?1:0)}},y.prototype.setPartsOpacity=function(t,i){typeof t!="number"&&(t=this._$5S.getPartsDataIndex(O.getID(t))),this._$5S.setPartsOpacity(t,i)},y.prototype.getPartsDataIndex=function(t){return t instanceof O||(t=O.getID(t)),this._$5S.getPartsDataIndex(t)},y.prototype.getPartsOpacity=function(t){return typeof t!="number"&&(t=this._$5S.getPartsDataIndex(O.getID(t))),t<0?0:this._$5S.getPartsOpacity(t)},y.prototype.getDrawParam=function(){},y.prototype.getDrawDataIndex=function(t){return this._$5S.getDrawDataIndex(z.getID(t))},y.prototype.getDrawData=function(t){return this._$5S.getDrawData(t)},y.prototype.getTransformedPoints=function(t){var i=this._$5S._$C2(t);return i instanceof Ri?i.getTransformedPoints():null},y.prototype.getIndexArray=function(t){if(t<0||t>=this._$5S._$aS.length)return null;var i=this._$5S._$aS[t];return i!=null&&i.getType()==ct._$wb&&i instanceof Mt?i.getIndexArray():null};function M(t){if(!S){this.clipContextList=new Array,this.glcontext=t.gl,this.dp_webgl=t,this.curFrameNo=0,this.firstError_clipInNotUpdate=!0,this.colorBuffer=0,this.isInitGLFBFunc=!1,this.tmpBoundsOnModel=new L,T.glContext.length>T.frameBuffers.length&&(this.curFrameNo=this.getMaskRenderTexture()),this.tmpModelToViewMatrix=new Q,this.tmpMatrix2=new Q,this.tmpMatrixForMask=new Q,this.tmpMatrixForDraw=new Q,this.CHANNEL_COLORS=new Array;var i=new Et;(i=new Et).r=0,i.g=0,i.b=0,i.a=1,this.CHANNEL_COLORS.push(i),(i=new Et).r=1,i.g=0,i.b=0,i.a=0,this.CHANNEL_COLORS.push(i),(i=new Et).r=0,i.g=1,i.b=0,i.a=0,this.CHANNEL_COLORS.push(i),(i=new Et).r=0,i.g=0,i.b=1,i.a=0,this.CHANNEL_COLORS.push(i);for(var e=0;e<this.CHANNEL_COLORS.length;e++)this.dp_webgl.setChannelFlagAsColor(e,this.CHANNEL_COLORS[e])}}M.CHANNEL_COUNT=4,M.RENDER_TEXTURE_USE_MIPMAP=!1,M.NOT_USED_FRAME=-100,M.prototype._$L7=function(){if(this.tmpModelToViewMatrix&&(this.tmpModelToViewMatrix=null),this.tmpMatrix2&&(this.tmpMatrix2=null),this.tmpMatrixForMask&&(this.tmpMatrixForMask=null),this.tmpMatrixForDraw&&(this.tmpMatrixForDraw=null),this.tmpBoundsOnModel&&(this.tmpBoundsOnModel=null),this.CHANNEL_COLORS){for(var t=this.CHANNEL_COLORS.length-1;t>=0;--t)this.CHANNEL_COLORS.splice(t,1);this.CHANNEL_COLORS=[]}this.releaseShader()},M.prototype.releaseShader=function(){for(var t=T.frameBuffers.length,i=0;i<t;i++)this.gl.deleteFramebuffer(T.frameBuffers[i].framebuffer);T.frameBuffers=[],T.glContext=[]},M.prototype.init=function(t,i,e){for(var r=0;r<i.length;r++){var n=i[r].getClipIDList();if(n!=null){var o=this.findSameClip(n);o==null&&(o=new pt(this,t,n),this.clipContextList.push(o));var h=i[r].getDrawDataID(),_=t.getDrawDataIndex(h);o.addClippedDrawData(h,_),e[r].clipBufPre_clipContext=o}}},M.prototype.getMaskRenderTexture=function(){var t=null;return t=this.dp_webgl.createFramebuffer(),T.frameBuffers[this.dp_webgl.glno]=t,this.dp_webgl.glno},M.prototype.setupClip=function(t,i){for(var e=0,r=0;r<this.clipContextList.length;r++){var n=this.clipContextList[r];this.calcClippedDrawTotalBounds(t,n),n.isUsing&&e++}if(e>0){var o=i.gl.getParameter(i.gl.FRAMEBUFFER_BINDING),h=new Array(4);for(h[0]=0,h[1]=0,h[2]=i.gl.canvas.width,h[3]=i.gl.canvas.height,i.gl.viewport(0,0,T.clippingMaskBufferSize,T.clippingMaskBufferSize),this.setupLayoutBounds(e),i.gl.bindFramebuffer(i.gl.FRAMEBUFFER,T.frameBuffers[this.curFrameNo].framebuffer),i.gl.clearColor(0,0,0,0),i.gl.clear(i.gl.COLOR_BUFFER_BIT),r=0;r<this.clipContextList.length;r++){var _=(n=this.clipContextList[r]).allClippedDrawRect,a=(n.layoutChannelNo,n.layoutBounds);this.tmpBoundsOnModel._$jL(_),this.tmpBoundsOnModel.expand(.05*_.width,.05*_.height);var s=a.width/this.tmpBoundsOnModel.width,u=a.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity(),this.tmpMatrix2.translate(-1,-1,0),this.tmpMatrix2.scale(2,2,1),this.tmpMatrix2.translate(a.x,a.y,0),this.tmpMatrix2.scale(s,u,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m),this.tmpMatrix2.identity(),this.tmpMatrix2.translate(a.x,a.y,0),this.tmpMatrix2.scale(s,u,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);for(var p=this.tmpMatrixForMask.getArray(),$=0;$<16;$++)n.matrixForMask[$]=p[$];var c=this.tmpMatrixForDraw.getArray();for($=0;$<16;$++)n.matrixForDraw[$]=c[$];for(var l=n.clippingMaskDrawIndexList.length,I=0;I<l;I++){var x=n.clippingMaskDrawIndexList[I],G=t.getDrawData(x),Z=t._$C2(x);i.setClipBufPre_clipContextForMask(n),G.draw(i,t,Z)}}i.gl.bindFramebuffer(i.gl.FRAMEBUFFER,o),i.setClipBufPre_clipContextForMask(null),i.gl.viewport(h[0],h[1],h[2],h[3])}},M.prototype.getColorBuffer=function(){return this.colorBuffer},M.prototype.findSameClip=function(t){for(var i=0;i<this.clipContextList.length;i++){var e=this.clipContextList[i],r=e.clipIDList.length;if(r==t.length){for(var n=0,o=0;o<r;o++)for(var h=e.clipIDList[o],_=0;_<r;_++)if(t[_]==h){n++;break}if(n==r)return e}}return null},M.prototype.calcClippedDrawTotalBounds=function(t,i){for(var e=t._$Ri.getModelImpl().getCanvasWidth(),r=t._$Ri.getModelImpl().getCanvasHeight(),n=e>r?e:r,o=n,h=n,_=0,a=0,s=i.clippedDrawContextList.length,u=0;u<s;u++){var p=i.clippedDrawContextList[u].drawDataIndex,$=t._$C2(p);if($._$yo()){for(var c=$.getTransformedPoints(),l=c.length,I=[],x=[],G=0,Z=tt._$i2;Z<l;Z+=tt._$No)I[G]=c[Z],x[G]=c[Z+1],G++;var v=Math.min.apply(null,I),K=Math.min.apply(null,x),at=Math.max.apply(null,I),ut=Math.max.apply(null,x);v<o&&(o=v),K<h&&(h=K),at>_&&(_=at),ut>a&&(a=ut)}}if(o==n)i.allClippedDrawRect.x=0,i.allClippedDrawRect.y=0,i.allClippedDrawRect.width=0,i.allClippedDrawRect.height=0,i.isUsing=!1;else{var N=_-o,D=a-h;i.allClippedDrawRect.x=o,i.allClippedDrawRect.y=h,i.allClippedDrawRect.width=N,i.allClippedDrawRect.height=D,i.isUsing=!0}},M.prototype.setupLayoutBounds=function(t){var i=t/M.CHANNEL_COUNT,e=t%M.CHANNEL_COUNT;i=~~i,e=~~e;for(var r=0,n=0;n<M.CHANNEL_COUNT;n++){var o=i+(n<e?1:0);if(o!=0)if(o==1)(s=this.clipContextList[r++]).layoutChannelNo=n,s.layoutBounds.x=0,s.layoutBounds.y=0,s.layoutBounds.width=1,s.layoutBounds.height=1;else if(o==2)for(var h=0;h<o;h++){var _=0;a=~~(a=h%2),(s=this.clipContextList[r++]).layoutChannelNo=n,s.layoutBounds.x=.5*a,s.layoutBounds.y=0,s.layoutBounds.width=.5,s.layoutBounds.height=1}else if(o<=4)for(h=0;h<o;h++)a=~~(a=h%2),_=~~(_=h/2),(s=this.clipContextList[r++]).layoutChannelNo=n,s.layoutBounds.x=.5*a,s.layoutBounds.y=.5*_,s.layoutBounds.width=.5,s.layoutBounds.height=.5;else if(o<=9)for(h=0;h<o;h++){var a;a=~~(a=h%3),_=~~(_=h/3);var s;(s=this.clipContextList[r++]).layoutChannelNo=n,s.layoutBounds.x=a/3,s.layoutBounds.y=_/3,s.layoutBounds.width=1/3,s.layoutBounds.height=1/3}else d._$li("_$6 _$0P mask count : %d",o)}};function pt(t,i,e){this.clipIDList=new Array,this.clipIDList=e,this.clippingMaskDrawIndexList=new Array;for(var r=0;r<e.length;r++)this.clippingMaskDrawIndexList.push(i.getDrawDataIndex(e[r]));this.clippedDrawContextList=new Array,this.isUsing=!0,this.layoutChannelNo=0,this.layoutBounds=new L,this.allClippedDrawRect=new L,this.matrixForMask=new Float32Array(16),this.matrixForDraw=new Float32Array(16),this.owner=t}pt.prototype.addClippedDrawData=function(t,i){var e=new function(r,n){this._$gP=r,this.drawDataIndex=n}(t,i);this.clippedDrawContextList.push(e)};function b(){S||(this._$dP=null,this._$eo=null,this._$V0=null,this._$dP=1e3,this._$eo=1e3,this._$V0=1,this._$a0())}b._$JT=function(t,i,e){var r=t/i,n=e/i,o=1-(1-n)*(1-n),h=1-(1-n)*(1-n),_=1/3*(1-n)*o+(n*(2/3)+1/3*(1-n))*(1-o),a=(n+2/3*(1-n))*h+(n*(1/3)+2/3*(1-n))*(1-h),s=1-3*a+3*_-0,u=3*a-6*_+0,p=3*_-0;if(r<=0)return 0;if(r>=1)return 1;var $=r*r;return s*(r*$)+u*$+p*r+0},b.prototype._$a0=function(){},b.prototype.setFadeIn=function(t){this._$dP=t},b.prototype.setFadeOut=function(t){this._$eo=t},b.prototype._$pT=function(t){this._$V0=t},b.prototype.getFadeOut=function(){return this._$eo},b.prototype._$4T=function(){return this._$eo},b.prototype._$mT=function(){return this._$V0},b.prototype.getDurationMSec=function(){return-1},b.prototype.getLoopDurationMSec=function(){return-1},b.prototype.updateParam=function(t,i){if(i._$AT&&!i._$9L){var e=H.getUserTimeMSec();if(i._$z2<0){i._$z2=e,i._$bs=e;var r=this.getDurationMSec();i._$Do<0&&(i._$Do=r<=0?-1:i._$z2+r)}var n=this._$V0;0<=(n=n*(this._$dP==0?1:Ci._$r2((e-i._$bs)/this._$dP))*(this._$eo==0||i._$Do<0?1:Ci._$r2((i._$Do-e)/this._$eo)))&&n<=1||console.log("### assert!! ### "),this.updateParamExe(t,e,n,i),i._$Do>0&&i._$Do<e&&(i._$9L=!0)}},b.prototype.updateParamExe=function(t,i,e,r){};function d(){}d._$8s=0,d._$fT=new Object,d.start=function(t){var i=d._$fT[t];i==null&&((i=new function(){this._$r=null,this._$0S=null})._$r=t,d._$fT[t]=i),i._$0S=H.getSystemTimeMSec()},d.dump=function(t){var i=d._$fT[t];if(i!=null){var e=H.getSystemTimeMSec()-i._$0S;return console.log(t+" : "+e+"ms"),e}return-1},d.end=function(t){var i=d._$fT[t];return i!=null?H.getSystemTimeMSec()-i._$0S:-1},d._$li=function(t,i){console.log("_$li : "+t+`
`,i)},d._$Ji=function(t,i){console.log(t,i)},d._$dL=function(t,i){console.log(t,i),console.log(`
`)},d._$KL=function(t,i){for(var e=0;e<i;e++)e%16==0&&e>0?console.log(`
`):e%8==0&&e>0&&console.log("  "),console.log("%02X ",255&t[e]);console.log(`
`)},d._$nr=function(t,i,e){console.log(`%s
`,t);for(var r=i.length,n=0;n<r;++n)console.log("%5d",i[n]),console.log(`%s
`,e),console.log(",");console.log(`
`)},d._$Rb=function(t){console.log("dump exception : "+t),console.log("stack :: "+t.stack)};function E(){S||(this.x=null,this.y=null,this.width=null,this.height=null)}E.prototype._$8P=function(){return .5*(this.x+this.x+this.width)},E.prototype._$6P=function(){return .5*(this.y+this.y+this.height)},E.prototype._$EL=function(){return this.x+this.width},E.prototype._$5T=function(){return this.y+this.height},E.prototype._$jL=function(t,i,e,r){this.x=t,this.y=i,this.width=e,this.height=r},E.prototype._$jL=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height};function O(t){S||si.prototype.constructor.call(this,t)}O.prototype=new si,O._$tP=new Object,O._$27=function(){O._$tP.clear()},O.getID=function(t){var i=O._$tP[t];return i==null&&(i=new O(t),O._$tP[t]=i),i},O.prototype._$3s=function(){return new O};function P(t){S||si.prototype.constructor.call(this,t)}P.prototype=new si,P._$tP=new Object,P._$27=function(){P._$tP.clear()},P.getID=function(t){var i=P._$tP[t];return i==null&&(i=new P(t),P._$tP[t]=i),i},P.prototype._$3s=function(){return new P};function Pt(){S||(this._$vo=null,this._$F2=null,this._$ao=400,this._$1S=400,Pt._$42++)}Pt._$42=0,Pt.prototype._$zP=function(){this._$vo==null&&(this._$vo=new fi),this._$F2==null&&(this._$F2=new Array)},Pt.prototype.getCanvasWidth=function(){return this._$ao},Pt.prototype.getCanvasHeight=function(){return this._$1S},Pt.prototype._$F0=function(t){this._$vo=t._$nP(),this._$F2=t._$nP(),this._$ao=t._$6L(),this._$1S=t._$6L()},Pt.prototype._$6S=function(t){this._$F2.push(t)},Pt.prototype._$Xr=function(){return this._$F2},Pt.prototype._$E2=function(){return this._$vo};function rt(){S||(this.p1=new Yt,this.p2=new Yt,this._$Fo=0,this._$Db=0,this._$L2=0,this._$M2=0,this._$ks=0,this._$9b=0,this._$iP=0,this._$iT=0,this._$lL=new Array,this._$qP=new Array,this.setup(.3,.5,.1))}rt.prototype.setup=function(t,i,e){this._$ks=this._$Yb(),this.p2._$xT(),arguments.length==3&&(this._$Fo=t,this._$L2=i,this.p1._$p=e,this.p2._$p=e,this.p2.y=t,this.setup())},rt.prototype.getPhysicsPoint1=function(){return this.p1},rt.prototype.getPhysicsPoint2=function(){return this.p2},rt.prototype._$qr=function(){return this._$Db},rt.prototype._$pr=function(t){this._$Db=t},rt.prototype._$5r=function(){return this._$M2},rt.prototype._$Cs=function(){return this._$9b},rt.prototype._$Yb=function(){return-180*Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y))/Math.PI},rt.prototype.addSrcParam=function(t,i,e,r){var n=new mt(t,i,e,r);this._$lL.push(n)},rt.prototype.addTargetParam=function(t,i,e,r){var n=new f(t,i,e,r);this._$qP.push(n)},rt.prototype.update=function(t,i){if(this._$iP==0)return this._$iP=this._$iT=i,void(this._$Fo=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));var e=(i-this._$iT)/1e3;if(e!=0){for(var r=this._$lL.length-1;r>=0;--r)this._$lL[r]._$oP(t,this);this._$oo(t,e),this._$M2=this._$Yb(),this._$9b=(this._$M2-this._$ks)/e,this._$ks=this._$M2}for(r=this._$qP.length-1;r>=0;--r)this._$qP[r]._$YS(t,this);this._$iT=i},rt.prototype._$oo=function(t,i){i<.033&&(i=.033);var e=1/i;this.p1.vx=(this.p1.x-this.p1._$s0)*e,this.p1.vy=(this.p1.y-this.p1._$70)*e,this.p1.ax=(this.p1.vx-this.p1._$7L)*e,this.p1.ay=(this.p1.vy-this.p1._$HL)*e,this.p1.fx=this.p1.ax*this.p1._$p,this.p1.fy=this.p1.ay*this.p1._$p,this.p1._$xT();var r,n,o=-Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),h=Math.cos(o),_=Math.sin(o),a=9.8*this.p2._$p,s=this._$Db*zt._$bS,u=a*Math.cos(o-s);r=u*_,n=u*h;var p=-this.p1.fx*_*_,$=-this.p1.fy*_*h,c=-this.p2.vx*this._$L2,l=-this.p2.vy*this._$L2;this.p2.fx=r+p+c,this.p2.fy=n+$+l,this.p2.ax=this.p2.fx/this.p2._$p,this.p2.ay=this.p2.fy/this.p2._$p,this.p2.vx+=this.p2.ax*i,this.p2.vy+=this.p2.ay*i,this.p2.x+=this.p2.vx*i,this.p2.y+=this.p2.vy*i;var I=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/I,this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/I,this.p2.vx=(this.p2.x-this.p2._$s0)*e,this.p2.vy=(this.p2.y-this.p2._$70)*e,this.p2._$xT()};function Yt(){this._$p=1,this.x=0,this.y=0,this.vx=0,this.vy=0,this.ax=0,this.ay=0,this.fx=0,this.fy=0,this._$s0=0,this._$70=0,this._$7L=0,this._$HL=0}Yt.prototype._$xT=function(){this._$s0=this.x,this._$70=this.y,this._$7L=this.vx,this._$HL=this.vy};function Qt(t,i,e){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=t,this.scale=i,this._$V0=e}Qt.prototype._$oP=function(t,i){};function mt(t,i,e,r){Qt.prototype.constructor.call(this,i,e,r),this._$tL=null,this._$tL=t}mt.prototype=new Qt,mt.prototype._$oP=function(t,i){var e=this.scale*t.getParamFloat(this._$wL),r=i.getPhysicsPoint1();switch(this._$tL){default:case rt.Src.SRC_TO_X:r.x=r.x+(e-r.x)*this._$V0;break;case rt.Src.SRC_TO_Y:r.y=r.y+(e-r.y)*this._$V0;break;case rt.Src.SRC_TO_G_ANGLE:var n=i._$qr();n+=(e-n)*this._$V0,i._$pr(n)}};function Ft(t,i,e){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=t,this.scale=i,this._$V0=e}Ft.prototype._$YS=function(t,i){};function f(t,i,e,r){Ft.prototype.constructor.call(this,i,e,r),this._$YP=null,this._$YP=t}f.prototype=new Ft,f.prototype._$YS=function(t,i){switch(this._$YP){default:case rt.Target.TARGET_FROM_ANGLE:t.setParamFloat(this._$wL,this.scale*i._$5r(),this._$V0);break;case rt.Target.TARGET_FROM_ANGLE_V:t.setParamFloat(this._$wL,this.scale*i._$Cs(),this._$V0)}},rt.Src=function(){},rt.Src.SRC_TO_X="SRC_TO_X",rt.Src.SRC_TO_Y="SRC_TO_Y",rt.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE",rt.Target=function(){},rt.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE",rt.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V";function g(){S||(this._$fL=0,this._$gL=0,this._$B0=1,this._$z0=1,this._$qT=0,this.reflectX=!1,this.reflectY=!1)}g.prototype.init=function(t){this._$fL=t._$fL,this._$gL=t._$gL,this._$B0=t._$B0,this._$z0=t._$z0,this._$qT=t._$qT,this.reflectX=t.reflectX,this.reflectY=t.reflectY},g.prototype._$F0=function(t){this._$fL=t._$_T(),this._$gL=t._$_T(),this._$B0=t._$_T(),this._$z0=t._$_T(),this._$qT=t._$_T(),t.getFormatVersion()>=st.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this.reflectX=t._$po(),this.reflectY=t._$po())},g.prototype._$e=function(){};var A=function(){};A._$ni=function(t,i,e,r,n,o,h,_,a){var s=h*o-_*n;if(s==0)return null;var u,p=((t-e)*o-(i-r)*n)/s;return u=n!=0?(t-e-p*h)/n:(i-r-p*_)/o,isNaN(u)&&(u=(t-e-p*h)/n,isNaN(u)&&(u=(i-r-p*_)/o),isNaN(u)&&(console.log("a is NaN @UtVector#_$ni() "),console.log("v1x : "+n),console.log("v1x != 0 ? "+(n!=0)))),a==null?new Array(u,p):(a[0]=u,a[1]=p,a)};function L(){S||(this.x=null,this.y=null,this.width=null,this.height=null)}L.prototype._$8P=function(){return this.x+.5*this.width},L.prototype._$6P=function(){return this.y+.5*this.height},L.prototype._$EL=function(){return this.x+this.width},L.prototype._$5T=function(){return this.y+this.height},L.prototype._$jL=function(t,i,e,r){this.x=t,this.y=i,this.width=e,this.height=r},L.prototype._$jL=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},L.prototype.contains=function(t,i){return this.x<=this.x&&this.y<=this.y&&this.x<=this.x+this.width&&this.y<=this.y+this.height},L.prototype.expand=function(t,i){this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i};function Y(){}Y._$Z2=function(t,i,e,r){var n=i._$Q2(t,e),o=t._$vs(),h=t._$Tr();if(i._$zr(o,h,n),n<=0)return r[o[0]];if(n==1)return(_=r[o[0]])+((a=r[o[1]])-_)*(p=h[0])|0;if(n==2){var _=r[o[0]],a=r[o[1]],s=r[o[2]],u=r[o[3]],p=h[0],$=h[1];return(ut=_+(a-_)*p|0)+((s+(u-s)*p|0)-ut)*$|0}if(n==3){var c=r[o[0]],l=r[o[1]],I=r[o[2]],x=r[o[3]],G=r[o[4]],Z=r[o[5]],v=r[o[6]],K=r[o[7]],at=(p=h[0],$=h[1],h[2]);return(ut=(_=c+(l-c)*p|0)+((a=I+(x-I)*p|0)-_)*$|0)+(((s=G+(Z-G)*p|0)+((u=v+(K-v)*p|0)-s)*$|0)-ut)*at|0}if(n==4){var ut,N=r[o[0]],D=r[o[1]],gt=r[o[2]],Rt=r[o[3]],Nt=r[o[4]],Bt=r[o[5]],it=r[o[6]],j=r[o[7]],_t=r[o[8]],k=r[o[9]],lt=r[o[10]],$t=r[o[11]],et=r[o[12]],ot=r[o[13]],V=r[o[14]],W=r[o[15]],kt=(p=h[0],$=h[1],at=h[2],h[3]);return(ut=(_=(c=N+(D-N)*p|0)+((l=gt+(Rt-gt)*p|0)-c)*$|0)+((a=(I=Nt+(Bt-Nt)*p|0)+((x=it+(j-it)*p|0)-I)*$|0)-_)*at|0)+(((s=(G=_t+(k-_t)*p|0)+((Z=lt+($t-lt)*p|0)-G)*$|0)+((u=(v=et+(ot-et)*p|0)+((K=V+(W-V)*p|0)-v)*$|0)-s)*at|0)-ut)*kt|0}for(var At=1<<n,ht=new Float32Array(At),St=0;St<At;St++){for(var It=St,Tt=1,wt=0;wt<n;wt++)Tt*=It%2==0?1-h[wt]:h[wt],It/=2;ht[St]=Tt}for(var bt=new Float32Array(At),Ut=0;Ut<At;Ut++)bt[Ut]=r[o[Ut]];var ii=0;for(Ut=0;Ut<At;Ut++)ii+=ht[Ut]*bt[Ut];return ii+.5|0},Y._$br=function(t,i,e,r){var n=i._$Q2(t,e),o=t._$vs(),h=t._$Tr();if(i._$zr(o,h,n),n<=0)return r[o[0]];if(n==1)return(_=r[o[0]])+((a=r[o[1]])-_)*(p=h[0]);if(n==2){var _=r[o[0]],a=r[o[1]],s=r[o[2]],u=r[o[3]],p=h[0];return(1-(K=h[1]))*(_+(a-_)*p)+K*(s+(u-s)*p)}if(n==3){var $=r[o[0]],c=r[o[1]],l=r[o[2]],I=r[o[3]],x=r[o[4]],G=r[o[5]],Z=r[o[6]],v=r[o[7]],K=(p=h[0],h[1]);return(1-(V=h[2]))*((1-K)*($+(c-$)*p)+K*(l+(I-l)*p))+V*((1-K)*(x+(G-x)*p)+K*(Z+(v-Z)*p))}if(n==4){var at=r[o[0]],ut=r[o[1]],N=r[o[2]],D=r[o[3]],gt=r[o[4]],Rt=r[o[5]],Nt=r[o[6]],Bt=r[o[7]],it=r[o[8]],j=r[o[9]],_t=r[o[10]],k=r[o[11]],lt=r[o[12]],$t=r[o[13]],et=r[o[14]],ot=r[o[15]],V=(p=h[0],K=h[1],h[2]),W=h[3];return(1-W)*((1-V)*((1-K)*(at+(ut-at)*p)+K*(N+(D-N)*p))+V*((1-K)*(gt+(Rt-gt)*p)+K*(Nt+(Bt-Nt)*p)))+W*((1-V)*((1-K)*(it+(j-it)*p)+K*(_t+(k-_t)*p))+V*((1-K)*(lt+($t-lt)*p)+K*(et+(ot-et)*p)))}for(var kt=1<<n,At=new Float32Array(kt),ht=0;ht<kt;ht++){for(var St=ht,It=1,Tt=0;Tt<n;Tt++)It*=St%2==0?1-h[Tt]:h[Tt],St/=2;At[ht]=It}for(var wt=new Float32Array(kt),bt=0;bt<kt;bt++)wt[bt]=r[o[bt]];var Ut=0;for(bt=0;bt<kt;bt++)Ut+=At[bt]*wt[bt];return Ut},Y._$Vr=function(t,i,e,r,n,o,h,_){var a=i._$Q2(t,e),s=t._$vs(),u=t._$Tr();i._$zr(s,u,a);var p=2*r,$=h;if(a<=0){var c=n[s[0]];if(_==2&&h==0)H._$jT(c,0,o,0,p);else for(var l=0;l<p;)o[$]=c[l++],o[$+1]=c[l++],$+=_}else if(a==1){c=n[s[0]];var I=n[s[1]],x=1-(v=u[0]);for(l=0;l<p;)o[$]=c[l]*x+I[l]*v,++l,o[$+1]=c[l]*x+I[l]*v,++l,$+=_}else if(a==2){c=n[s[0]],I=n[s[1]];var G=n[s[2]],Z=n[s[3]],v=u[0],K=(ht=1-(k=u[1]))*(x=1-v),at=ht*v,ut=k*x,N=k*v;for(l=0;l<p;)o[$]=K*c[l]+at*I[l]+ut*G[l]+N*Z[l],++l,o[$+1]=K*c[l]+at*I[l]+ut*G[l]+N*Z[l],++l,$+=_}else if(a==3){var D=n[s[0]],gt=n[s[1]],Rt=n[s[2]],Nt=n[s[3]],Bt=n[s[4]],it=n[s[5]],j=n[s[6]],_t=n[s[7]],k=(v=u[0],u[1]),lt=(St=1-(ei=u[2]))*(ht=1-k)*(x=1-v),$t=St*ht*v,et=St*k*x,ot=St*k*v,V=ei*ht*x,W=ei*ht*v,kt=ei*k*x,At=ei*k*v;for(l=0;l<p;)o[$]=lt*D[l]+$t*gt[l]+et*Rt[l]+ot*Nt[l]+V*Bt[l]+W*it[l]+kt*j[l]+At*_t[l],++l,o[$+1]=lt*D[l]+$t*gt[l]+et*Rt[l]+ot*Nt[l]+V*Bt[l]+W*it[l]+kt*j[l]+At*_t[l],++l,$+=_}else if(a==4){var ht,St,It=n[s[0]],Tt=n[s[1]],wt=n[s[2]],bt=n[s[3]],Ut=n[s[4]],ii=n[s[5]],hi=n[s[6]],gi=n[s[7]],Pi=n[s[8]],yi=n[s[9]],oi=n[s[10]],Ht=n[s[11]],di=n[s[12]],vi=n[s[13]],Ii=n[s[14]],wi=n[s[15]],ei=(v=u[0],k=u[1],u[2]),mi=u[3],Si=1-mi,ki=Si*(St=1-ei)*(ht=1-k)*(x=1-v),Xi=Si*St*ht*v,Vi=Si*St*k*x,zi=Si*St*k*v,Hi=Si*ei*ht*x,Wi=Si*ei*ht*v,ji=Si*ei*k*x,qi=Si*ei*k*v,Ji=mi*St*ht*x,Qi=mi*St*ht*v,Zi=mi*St*k*x,Ki=mi*St*k*v,te=mi*ei*ht*x,ie=mi*ei*ht*v,ee=mi*ei*k*x,re=mi*ei*k*v;for(l=0;l<p;)o[$]=ki*It[l]+Xi*Tt[l]+Vi*wt[l]+zi*bt[l]+Hi*Ut[l]+Wi*ii[l]+ji*hi[l]+qi*gi[l]+Ji*Pi[l]+Qi*yi[l]+Zi*oi[l]+Ki*Ht[l]+te*di[l]+ie*vi[l]+ee*Ii[l]+re*wi[l],++l,o[$+1]=ki*It[l]+Xi*Tt[l]+Vi*wt[l]+zi*bt[l]+Hi*Ut[l]+Wi*ii[l]+ji*hi[l]+qi*gi[l]+Ji*Pi[l]+Qi*yi[l]+Zi*oi[l]+Ki*Ht[l]+te*di[l]+ie*vi[l]+ee*Ii[l]+re*wi[l],++l,$+=_}else{for(var Di=1<<a,Ui=new Float32Array(Di),bi=0;bi<Di;bi++){for(var oe=bi,ne=1,Fi=0;Fi<a;Fi++)ne*=oe%2==0?1-u[Fi]:u[Fi],oe/=2;Ui[bi]=ne}for(var Yi=new Float32Array(Di),$i=0;$i<Di;$i++)Yi[$i]=n[s[$i]];for(l=0;l<p;){var se=0,ae=0,_e=l+1;for($i=0;$i<Di;$i++)se+=Ui[$i]*Yi[$i][l],ae+=Ui[$i]*Yi[$i][_e];l+=2,o[$]=se,o[$+1]=ae,$+=_}}};function X(){S||(this.x=null,this.y=null)}X.prototype._$HT=function(t,i){this.x=t,this.y=i},X.prototype._$HT=function(t){this.x=t.x,this.y=t.y};function C(){S||(this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null,this.clipID=null,this.clipIDList=new Array)}C._$ur=-2,C._$ES=500,C._$wb=2,C._$8S=3,C._$52=C._$ES,C._$R2=C._$ES,C._$or=function(){return C._$52},C._$Pr=function(){return C._$R2},C.prototype.convertClipIDForV2_11=function(t){var i=[];return t==null||t.length==0?null:/,/.test(t)?i=t.id.split(","):(i.push(t.id),i)},C.prototype._$F0=function(t){this._$gP=t._$nP(),this._$dr=t._$nP(),this._$GS=t._$nP(),this._$qb=t._$6L(),this._$Lb=t._$cS(),this._$mS=t._$Tb(),t.getFormatVersion()>=st._$T7?(this.clipID=t._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=[],this._$MS(this._$Lb)},C.prototype.getClipIDList=function(){return this.clipIDList},C.prototype.init=function(t){},C.prototype._$Nr=function(t,i){if(i._$IS[0]=!1,i._$Us=Y._$Z2(t,this._$GS,i._$IS,this._$Lb),!T._$Zs){if(i._$IS[0])return}i._$7s=Y._$br(t,this._$GS,i._$IS,this._$mS)},C.prototype._$2b=function(t,i){},C.prototype.getDrawDataID=function(){return this._$gP},C.prototype._$j2=function(t){this._$gP=t},C.prototype.getOpacity=function(t,i){return i._$7s},C.prototype._$zS=function(t,i){return i._$Us},C.prototype._$MS=function(t){for(var i=t.length-1;i>=0;--i){var e=t[i];e<C._$52?C._$52=e:e>C._$R2&&(C._$R2=e)}},C.prototype.getTargetBaseDataID=function(){return this._$dr},C.prototype._$gs=function(t){this._$dr=t},C.prototype._$32=function(){return this._$dr!=null&&this._$dr!=Xt._$2o()},C.prototype.preDraw=function(t,i,e){},C.prototype.draw=function(t,i,e){},C.prototype.getType=function(){},C.prototype._$B2=function(t,i,e){};function q(){S||(this._$Eb=q._$ps,this._$lT=1,this._$C0=1,this._$tT=1,this._$WL=1,this.culling=!1,this.matrix4x4=new Float32Array(16),this.premultipliedAlpha=!1,this.anisotropy=0,this.clippingProcess=q.CLIPPING_PROCESS_NONE,this.clipBufPre_clipContextMask=null,this.clipBufPre_clipContextDraw=null,this.CHANNEL_COLORS=new Array)}q._$ps=32,q.CLIPPING_PROCESS_NONE=0,q.CLIPPING_PROCESS_OVERWRITE_ALPHA=1,q.CLIPPING_PROCESS_MULTIPLY_ALPHA=2,q.CLIPPING_PROCESS_DRAW=3,q.CLIPPING_PROCESS_CLEAR_ALPHA=4,q.prototype.setChannelFlagAsColor=function(t,i){this.CHANNEL_COLORS[t]=i},q.prototype.getChannelFlagAsColor=function(t){return this.CHANNEL_COLORS[t]},q.prototype._$ZT=function(){},q.prototype._$Uo=function(t,i,e,r,n,o,h){},q.prototype._$Rs=function(){return-1},q.prototype._$Ds=function(t){},q.prototype.setBaseColor=function(t,i,e,r){t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),this._$lT=t,this._$C0=i,this._$tT=e,this._$WL=r},q.prototype._$WP=function(t){this.culling=t},q.prototype.setMatrix=function(t){for(var i=0;i<16;i++)this.matrix4x4[i]=t[i]},q.prototype._$IT=function(){return this.matrix4x4},q.prototype.setPremultipliedAlpha=function(t){this.premultipliedAlpha=t},q.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha},q.prototype.setAnisotropy=function(t){this.anisotropy=t},q.prototype.getAnisotropy=function(){return this.anisotropy},q.prototype.getClippingProcess=function(){return this.clippingProcess},q.prototype.setClippingProcess=function(t){this.clippingProcess=t},q.prototype.setClipBufPre_clipContextForMask=function(t){this.clipBufPre_clipContextMask=t},q.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask},q.prototype.setClipBufPre_clipContextForDraw=function(t){this.clipBufPre_clipContextDraw=t},q.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw};function Et(){S||(this.a=1,this.r=1,this.g=1,this.b=1,this.scale=1,this._$ho=1,this.blendMode=T.L2D_COLOR_BLEND_MODE_MULT)}function J(){S||(this._$kP=null,this._$dr=null,this._$Ai=!0,this._$mS=null)}J._$ur=-2,J._$c2=1,J._$_b=2,J.prototype._$F0=function(t){this._$kP=t._$nP(),this._$dr=t._$nP()},J.prototype.readV2_opacity=function(t){t.getFormatVersion()>=st.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this._$mS=t._$Tb())},J.prototype.init=function(t){},J.prototype._$Nr=function(t,i){},J.prototype.interpolateOpacity=function(t,i,e,r){this._$mS==null?e.setInterpolatedOpacity(1):e.setInterpolatedOpacity(Y._$br(t,i,r,this._$mS))},J.prototype._$2b=function(t,i){},J.prototype._$nb=function(t,i,e,r,n,o,h){},J.prototype.getType=function(){},J.prototype._$gs=function(t){this._$dr=t},J.prototype._$a2=function(t){this._$kP=t},J.prototype.getTargetBaseDataID=function(){return this._$dr},J.prototype.getBaseDataID=function(){return this._$kP},J.prototype._$32=function(){return this._$dr!=null&&this._$dr!=Xt._$2o()};function H(){}H._$W2=0,H._$CS=H._$W2,H._$Mo=function(){return!0},H._$XP=function(t){try{for(var i=getTimeMSec();getTimeMSec()-i<t;);}catch(e){e._$Rb()}},H.getUserTimeMSec=function(){return H._$CS==H._$W2?H.getSystemTimeMSec():H._$CS},H.setUserTimeMSec=function(t){H._$CS=t},H.updateUserTimeMSec=function(){return H._$CS=H.getSystemTimeMSec()},H.getTimeMSec=function(){return new Date().getTime()},H.getSystemTimeMSec=function(){return new Date().getTime()},H._$Q=function(t){},H._$jT=function(t,i,e,r,n){for(var o=0;o<n;o++)e[r+o]=t[i+o]};function yt(){S||(this._$VP=0,this._$wL=null,this._$GP=null,this._$8o=yt._$ds,this._$2r=-1,this._$O2=0,this._$ri=0)}yt._$ds=-2,yt.prototype._$F0=function(t){this._$wL=t._$nP(),this._$VP=t._$6L(),this._$GP=t._$nP()},yt.prototype.getParamIndex=function(t){return this._$2r!=t&&(this._$8o=yt._$ds),this._$8o},yt.prototype._$Pb=function(t,i){this._$8o=t,this._$2r=i},yt.prototype.getParamID=function(){return this._$wL},yt.prototype._$yP=function(t){this._$wL=t},yt.prototype._$N2=function(){return this._$VP},yt.prototype._$d2=function(){return this._$GP},yt.prototype._$t2=function(t,i){this._$VP=t,this._$GP=i},yt.prototype._$Lr=function(){return this._$O2},yt.prototype._$wr=function(t){this._$O2=t},yt.prototype._$SL=function(){return this._$ri},yt.prototype._$AL=function(t){this._$ri=t};function nt(){}nt.startsWith=function(t,i,e){var r=i+e.length;if(r>=t.length)return!1;for(var n=i;n<r;n++)if(nt.getChar(t,n)!=e.charAt(n-i))return!1;return!0},nt.getChar=function(t,i){return String.fromCharCode(t.getUint8(i))},nt.createString=function(t,i,e){for(var r=new ArrayBuffer(2*e),n=new Uint16Array(r),o=0;o<e;o++)n[o]=t.getUint8(i+o);return String.fromCharCode.apply(null,n)},nt._$LS=function(t,i,e,r){t instanceof ArrayBuffer&&(t=new DataView(t));var n=e,o=!1,h=!1,_=0,a=nt.getChar(t,n);a=="-"&&(o=!0,n++);for(var s=!1;n<i;n++){switch(a=nt.getChar(t,n)){case"0":_*=10;break;case"1":_=10*_+1;break;case"2":_=10*_+2;break;case"3":_=10*_+3;break;case"4":_=10*_+4;break;case"5":_=10*_+5;break;case"6":_=10*_+6;break;case"7":_=10*_+7;break;case"8":_=10*_+8;break;case"9":_=10*_+9;break;case".":h=!0,n++,s=!0;break;default:s=!0}if(s)break}if(h)for(var u=.1,p=!1;n<i;n++){switch(a=nt.getChar(t,n)){case"0":break;case"1":_+=1*u;break;case"2":_+=2*u;break;case"3":_+=3*u;break;case"4":_+=4*u;break;case"5":_+=5*u;break;case"6":_+=6*u;break;case"7":_+=7*u;break;case"8":_+=8*u;break;case"9":_+=9*u;break;default:p=!0}if(u*=.1,p)break}return o&&(_=-_),r[0]=n,_};function w(){S||(this._$Ob=null)}w.prototype._$zP=function(){this._$Ob=new Array},w.prototype._$F0=function(t){this._$Ob=t._$nP()},w.prototype._$Ur=function(t){if(t._$WS())return!0;for(var i=t._$v2(),e=this._$Ob.length-1;e>=0;--e){var r=this._$Ob[e].getParamIndex(i);if(r==yt._$ds&&(r=t.getParamIndex(this._$Ob[e].getParamID())),t._$Xb(r))return!0}return!1},w.prototype._$Q2=function(t,i){for(var e,r,n=this._$Ob.length,o=t._$v2(),h=0,_=0;_<n;_++){var a=this._$Ob[_];if((e=a.getParamIndex(o))==yt._$ds&&(e=t.getParamIndex(a.getParamID()),a._$Pb(e,o)),e<0)throw new Exception("err 23242 : "+a.getParamID());var s=e<0?0:t.getParamFloat(e);r=a._$N2();var u,p,$=a._$d2(),c=-1,l=0;if(!(r<1))if(r==1)(u=$[0])-tt._$J<s&&s<u+tt._$J?(c=0,l=0):(c=0,i[0]=!0);else if(s<(u=$[0])-tt._$J)c=0,i[0]=!0;else if(s<u+tt._$J)c=0;else{for(var I=!1,x=1;x<r;++x){if(s<(p=$[x])+tt._$J){p-tt._$J<s?c=x:(c=x-1,l=(s-u)/(p-u),h++),I=!0;break}u=p}I||(c=r-1,l=0,i[0]=!0)}a._$wr(c),a._$AL(l)}return h},w.prototype._$zr=function(t,i,e){var r=1<<e;r+1>tt._$Qb&&console.log(`err 23245
`);for(var n=this._$Ob.length,o=1,h=1,_=0,a=0;a<r;++a)t[a]=0;for(var s=0;s<n;++s){var u=this._$Ob[s];if(u._$SL()==0){if((p=u._$Lr()*o)<0&&T._$3T)throw new Exception("err 23246");for(a=0;a<r;++a)t[a]+=p}else{var p=o*u._$Lr(),$=o*(u._$Lr()+1);for(a=0;a<r;++a)t[a]+=(a/h|0)%2==0?p:$;i[_++]=u._$SL(),h*=2}o*=u._$N2()}t[r]=65535,i[_]=-1},w.prototype._$h2=function(t,i,e){for(var r=new Float32Array(i),n=0;n<i;++n)r[n]=e[n];var o=new yt;o._$yP(t),o._$t2(i,r),this._$Ob.push(o)},w.prototype._$J2=function(t){for(var i=t,e=this._$Ob.length,r=0;r<e;++r){var n=this._$Ob[r],o=n._$N2(),h=i%n._$N2(),_=n._$d2()[h];console.log("%s[%d]=%7.2f / ",n.getParamID(),h,_),i/=o}console.log(`
`)},w.prototype.getParamCount=function(){return this._$Ob.length},w.prototype._$zs=function(){return this._$Ob};function Q(){this.m=new Float32Array(16),this.identity()}Q.prototype.identity=function(){for(var t=0;t<16;t++)this.m[t]=t%5==0?1:0},Q.prototype.getArray=function(){return this.m},Q.prototype.getCopyMatrix=function(){return new Float32Array(this.m)},Q.prototype.setMatrix=function(t){if(t!=null&&t.length==16)for(var i=0;i<16;i++)this.m[i]=t[i]},Q.prototype.mult=function(t,i,e){return i==null?null:(this==i?this.mult_safe(this.m,t.m,i.m,e):this.mult_fast(this.m,t.m,i.m,e),i)},Q.prototype.mult_safe=function(t,i,e,r){if(t==e){var n=new Array(16);this.mult_fast(t,i,n,r);for(var o=15;o>=0;--o)e[o]=n[o]}else this.mult_fast(t,i,e,r)},Q.prototype.mult_fast=function(t,i,e,r){r?(e[0]=t[0]*i[0]+t[4]*i[1]+t[8]*i[2],e[4]=t[0]*i[4]+t[4]*i[5]+t[8]*i[6],e[8]=t[0]*i[8]+t[4]*i[9]+t[8]*i[10],e[12]=t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12],e[1]=t[1]*i[0]+t[5]*i[1]+t[9]*i[2],e[5]=t[1]*i[4]+t[5]*i[5]+t[9]*i[6],e[9]=t[1]*i[8]+t[5]*i[9]+t[9]*i[10],e[13]=t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13],e[2]=t[2]*i[0]+t[6]*i[1]+t[10]*i[2],e[6]=t[2]*i[4]+t[6]*i[5]+t[10]*i[6],e[10]=t[2]*i[8]+t[6]*i[9]+t[10]*i[10],e[14]=t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14],e[3]=e[7]=e[11]=0,e[15]=1):(e[0]=t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],e[4]=t[0]*i[4]+t[4]*i[5]+t[8]*i[6]+t[12]*i[7],e[8]=t[0]*i[8]+t[4]*i[9]+t[8]*i[10]+t[12]*i[11],e[12]=t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12]*i[15],e[1]=t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],e[5]=t[1]*i[4]+t[5]*i[5]+t[9]*i[6]+t[13]*i[7],e[9]=t[1]*i[8]+t[5]*i[9]+t[9]*i[10]+t[13]*i[11],e[13]=t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13]*i[15],e[2]=t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],e[6]=t[2]*i[4]+t[6]*i[5]+t[10]*i[6]+t[14]*i[7],e[10]=t[2]*i[8]+t[6]*i[9]+t[10]*i[10]+t[14]*i[11],e[14]=t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14]*i[15],e[3]=t[3]*i[0]+t[7]*i[1]+t[11]*i[2]+t[15]*i[3],e[7]=t[3]*i[4]+t[7]*i[5]+t[11]*i[6]+t[15]*i[7],e[11]=t[3]*i[8]+t[7]*i[9]+t[11]*i[10]+t[15]*i[11],e[15]=t[3]*i[12]+t[7]*i[13]+t[11]*i[14]+t[15]*i[15])},Q.prototype.translate=function(t,i,e){this.m[12]=this.m[0]*t+this.m[4]*i+this.m[8]*e+this.m[12],this.m[13]=this.m[1]*t+this.m[5]*i+this.m[9]*e+this.m[13],this.m[14]=this.m[2]*t+this.m[6]*i+this.m[10]*e+this.m[14],this.m[15]=this.m[3]*t+this.m[7]*i+this.m[11]*e+this.m[15]},Q.prototype.scale=function(t,i,e){this.m[0]*=t,this.m[4]*=i,this.m[8]*=e,this.m[1]*=t,this.m[5]*=i,this.m[9]*=e,this.m[2]*=t,this.m[6]*=i,this.m[10]*=e,this.m[3]*=t,this.m[7]*=i,this.m[11]*=e},Q.prototype.rotateX=function(t){var i=zt.fcos(t),e=zt._$9(t),r=this.m[4];this.m[4]=r*i+this.m[8]*e,this.m[8]=r*-e+this.m[8]*i,r=this.m[5],this.m[5]=r*i+this.m[9]*e,this.m[9]=r*-e+this.m[9]*i,r=this.m[6],this.m[6]=r*i+this.m[10]*e,this.m[10]=r*-e+this.m[10]*i,r=this.m[7],this.m[7]=r*i+this.m[11]*e,this.m[11]=r*-e+this.m[11]*i},Q.prototype.rotateY=function(t){var i=zt.fcos(t),e=zt._$9(t),r=this.m[0];this.m[0]=r*i+this.m[8]*-e,this.m[8]=r*e+this.m[8]*i,r=this.m[1],this.m[1]=r*i+this.m[9]*-e,this.m[9]=r*e+this.m[9]*i,r=m[2],this.m[2]=r*i+this.m[10]*-e,this.m[10]=r*e+this.m[10]*i,r=m[3],this.m[3]=r*i+this.m[11]*-e,this.m[11]=r*e+this.m[11]*i},Q.prototype.rotateZ=function(t){var i=zt.fcos(t),e=zt._$9(t),r=this.m[0];this.m[0]=r*i+this.m[4]*e,this.m[4]=r*-e+this.m[4]*i,r=this.m[1],this.m[1]=r*i+this.m[5]*e,this.m[5]=r*-e+this.m[5]*i,r=this.m[2],this.m[2]=r*i+this.m[6]*e,this.m[6]=r*-e+this.m[6]*i,r=this.m[3],this.m[3]=r*i+this.m[7]*e,this.m[7]=r*-e+this.m[7]*i};function z(t){S||si.prototype.constructor.call(this,t)}z.prototype=new si,z._$tP=new Object,z._$27=function(){z._$tP.clear()},z.getID=function(t){var i=z._$tP[t];return i==null&&(i=new z(t),z._$tP[t]=i),i},z.prototype._$3s=function(){return new z};function U(){S||(this._$7=1,this._$f=0,this._$H=0,this._$g=1,this._$k=0,this._$w=0,this._$hi=STATE_IDENTITY,this._$Z=_$pS)}U._$kS=-1,U._$pS=0,U._$hb=1,U.STATE_IDENTITY=0,U._$gb=1,U._$fo=2,U._$go=4,U.prototype.transform=function(t,i,e){var r,n,o,h,_,a,s=0,u=0;switch(this._$hi){default:return;case U._$go|U._$fo|U._$gb:for(r=this._$7,n=this._$H,o=this._$k,h=this._$f,_=this._$g,a=this._$w;--e>=0;){var p=t[s++],$=t[s++];i[u++]=r*p+n*$+o,i[u++]=h*p+_*$+a}return;case U._$go|U._$fo:for(r=this._$7,n=this._$H,h=this._$f,_=this._$g;--e>=0;)p=t[s++],$=t[s++],i[u++]=r*p+n*$,i[u++]=h*p+_*$;return;case U._$go|U._$gb:for(n=this._$H,o=this._$k,h=this._$f,a=this._$w;--e>=0;)p=t[s++],i[u++]=n*t[s++]+o,i[u++]=h*p+a;return;case U._$go:for(n=this._$H,h=this._$f;--e>=0;)p=t[s++],i[u++]=n*t[s++],i[u++]=h*p;return;case U._$fo|U._$gb:for(r=this._$7,o=this._$k,_=this._$g,a=this._$w;--e>=0;)i[u++]=r*t[s++]+o,i[u++]=_*t[s++]+a;return;case U._$fo:for(r=this._$7,_=this._$g;--e>=0;)i[u++]=r*t[s++],i[u++]=_*t[s++];return;case U._$gb:for(o=this._$k,a=this._$w;--e>=0;)i[u++]=t[s++]+o,i[u++]=t[s++]+a;return;case U.STATE_IDENTITY:return void(t==i&&s==u||H._$jT(t,s,i,u,2*e))}},U.prototype.update=function(){this._$H==0&&this._$f==0?this._$7==1&&this._$g==1?this._$k==0&&this._$w==0?(this._$hi=U.STATE_IDENTITY,this._$Z=U._$pS):(this._$hi=U._$gb,this._$Z=U._$hb):this._$k==0&&this._$w==0?(this._$hi=U._$fo,this._$Z=U._$kS):(this._$hi=U._$fo|U._$gb,this._$Z=U._$kS):this._$7==0&&this._$g==0?this._$k==0&&this._$w==0?(this._$hi=U._$go,this._$Z=U._$kS):(this._$hi=U._$go|U._$gb,this._$Z=U._$kS):this._$k==0&&this._$w==0?(this._$hi=U._$go|U._$fo,this._$Z=U._$kS):(this._$hi=U._$go|U._$fo|U._$gb,this._$Z=U._$kS)},U.prototype._$RT=function(t){this._$IT(t);var i=t[0],e=t[2],r=t[1],n=t[3],o=Math.sqrt(i*i+r*r),h=i*n-e*r;o==0?T._$so&&console.log("affine._$RT() / rt==0"):(t[0]=o,t[1]=h/o,t[2]=(r*n+i*e)/h,t[3]=Math.atan2(r,i))},U.prototype._$ho=function(t,i,e,r){var n=new Float32Array(6),o=new Float32Array(6);t._$RT(n),i._$RT(o);var h=new Float32Array(6);h[0]=n[0]+(o[0]-n[0])*e,h[1]=n[1]+(o[1]-n[1])*e,h[2]=n[2]+(o[2]-n[2])*e,h[3]=n[3]+(o[3]-n[3])*e,h[4]=n[4]+(o[4]-n[4])*e,h[5]=n[5]+(o[5]-n[5])*e,r._$CT(h)},U.prototype._$CT=function(t){var i=Math.cos(t[3]),e=Math.sin(t[3]);this._$7=t[0]*i,this._$f=t[0]*e,this._$H=t[1]*(t[2]*i-e),this._$g=t[1]*(t[2]*e+i),this._$k=t[4],this._$w=t[5],this.update()},U.prototype._$IT=function(t){t[0]=this._$7,t[1]=this._$f,t[2]=this._$H,t[3]=this._$g,t[4]=this._$k,t[5]=this._$w};function Lt(){S||(b.prototype.constructor.call(this),this.motions=new Array,this._$7r=null,this._$7r=Lt._$Co++,this._$D0=30,this._$yT=0,this._$E=!0,this.loopFadeIn=!0,this._$AS=-1,_$a0())}Lt.prototype=new b,Lt._$cs="VISIBLE:",Lt._$ar="LAYOUT:",Lt._$Co=0,Lt._$D2=[],Lt._$1T=1,Lt.loadMotion=function(t){var i=new Lt,e=[0],r=t.length;i._$yT=0;for(var n=0;n<r;++n){var o=255&t[n];if(o!=`
`&&o!="\r")if(o!="#")if(o!="$"){if("a"<=o&&o<="z"||"A"<=o&&o<="Z"||o=="_"){for(s=n,u=-1;n<r&&(o=255&t[n])!="\r"&&o!=`
`;++n)if(o=="="){u=n;break}if(u>=0){var h=new dt;nt.startsWith(t,s,Lt._$cs)?(h._$RP=dt._$hs,h._$4P=new String(t,s,u-s)):nt.startsWith(t,s,Lt._$ar)?(h._$4P=new String(t,s+7,u-s-7),nt.startsWith(t,s+7,"ANCHOR_X")?h._$RP=dt._$xs:nt.startsWith(t,s+7,"ANCHOR_Y")?h._$RP=dt._$us:nt.startsWith(t,s+7,"SCALE_X")?h._$RP=dt._$qs:nt.startsWith(t,s+7,"SCALE_Y")?h._$RP=dt._$Ys:nt.startsWith(t,s+7,"X")?h._$RP=dt._$ws:nt.startsWith(t,s+7,"Y")&&(h._$RP=dt._$Ns)):(h._$RP=dt._$Fr,h._$4P=new String(t,s,u-s)),i.motions.push(h);var _=0;for(Lt._$D2.clear(),n=u+1;n<r&&(o=255&t[n])!="\r"&&o!=`
`;++n)if(o!=","&&o!=" "&&o!="	"&&($=nt._$LS(t,r,n,e),e[0]>0)){Lt._$D2.push($),_++;var a=e[0];if(a<n){console.log(`_$n0 _$hi . @Live2DMotion loadMotion()
`);break}n=a}h._$I0=Lt._$D2._$BL(),_>i._$yT&&(i._$yT=_)}}}else{for(var s=n,u=-1;n<r&&(o=255&t[n])!="\r"&&o!=`
`;++n)if(o=="="){u=n;break}var p=!1;if(u>=0){for(u==s+4&&t[s+1]=="f"&&t[s+2]=="p"&&t[s+3]=="s"&&(p=!0),n=u+1;n<r&&(o=255&t[n])!="\r"&&o!=`
`;++n)if(o!=","&&o!=" "&&o!="	"){var $=nt._$LS(t,r,n,e);e[0]>0&&p&&5<$&&$<121&&(i._$D0=$),n=e[0]}}for(;n<r&&t[n]!=`
`&&t[n]!="\r";++n);}else for(;n<r&&t[n]!=`
`&&t[n]!="\r";++n);}return i._$AS=1e3*i._$yT/i._$D0|0,i},Lt.prototype.getDurationMSec=function(){return this._$AS},Lt.prototype.dump=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];console.log("_$wL[%s] [%d]. ",i._$4P,i._$I0.length);for(var e=0;e<i._$I0.length&&e<10;e++)console.log("%5.2f ,",i._$I0[e]);console.log(`
`)}},Lt.prototype.updateParamExe=function(t,i,e,r){for(var n=(i-r._$z2)*this._$D0/1e3,o=0|n,h=n-o,_=0;_<this.motions.length;_++){var a=this.motions[_],s=a._$I0.length,u=a._$4P;if(a._$RP==dt._$hs){var p=a._$I0[o>=s?s-1:o];t.setParamFloat(u,p)}else if(!(dt._$ws<=a._$RP&&a._$RP<=dt._$Ys)){var $=t.getParamFloat(u),c=a._$I0[o>=s?s-1:o],l=$+(c+(a._$I0[o+1>=s?s-1:o+1]-c)*h-$)*e;t.setParamFloat(u,l)}}o>=this._$yT&&(this._$E?(r._$z2=i,this.loopFadeIn&&(r._$bs=i)):r._$9L=!0)},Lt.prototype._$r0=function(){return this._$E},Lt.prototype._$aL=function(t){this._$E=t},Lt.prototype.isLoopFadeIn=function(){return this.loopFadeIn},Lt.prototype.setLoopFadeIn=function(t){this.loopFadeIn=t},pi.prototype.clear=function(){this.size=0},pi.prototype.add=function(t){if(this._$P.length<=this.size){var i=new Float32Array(2*this.size);H._$jT(this._$P,0,i,0,this.size),this._$P=i}this._$P[this.size++]=t},pi.prototype._$BL=function(){var t=new Float32Array(this.size);return H._$jT(this._$P,0,t,0,this.size),t},dt._$Fr=0,dt._$hs=1,dt._$ws=100,dt._$Ns=101,dt._$xs=102,dt._$us=103,dt._$qs=104,dt._$Ys=105;function tt(){}tt._$Ms=1,tt._$Qs=2,tt._$i2=0,tt._$No=2,tt._$do=tt._$Ms,tt._$Ls=!0,tt._$1r=5,tt._$Qb=65,tt._$J=1e-4,tt._$FT=.001,tt._$Ss=3;function st(){}st._$o7=6,st._$S7=7,st._$s7=8,st._$77=9,st.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10,st.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11,st._$T7=st.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1,st._$Is=-2004318072,st._$h0=0,st._$4L=23,st._$7P=33,st._$uT=function(t){console.log(`_$bo :: _$6 _$mo _$E0 : %d
`,t)},st._$9o=function(t){if(t<40||t<50||t<60)return st._$uT(t),null;if(t<100)switch(t){case 65:return new Kt;case 66:return new w;case 67:return new yt;case 68:return new xt;case 69:return new g;case 70:return new Mt;default:return st._$uT(t),null}else if(t<150)switch(t){case 131:return new ci;case 133:return new Wt;case 136:return new Pt;case 137:return new fi;case 142:return new ui}return st._$uT(t),null};function R(t){S||(this._$QT=!0,this._$co=-1,this._$qo=0,this._$pb=new Array(R._$is),this._$_2=new Float32Array(R._$is),this._$vr=new Float32Array(R._$is),this._$Rr=new Float32Array(R._$is),this._$Or=new Float32Array(R._$is),this._$fs=new Float32Array(R._$is),this._$Js=new Array(R._$is),this._$3S=new Array,this._$aS=new Array,this._$Bo=null,this._$F2=new Array,this._$db=new Array,this._$8b=new Array,this._$Hr=new Array,this._$Ws=null,this._$Vs=null,this._$Er=null,this._$Es=new Int16Array(tt._$Qb),this._$ZP=new Float32Array(2*tt._$1r),this._$Ri=t,this._$b0=R._$HP++,this.clipManager=null,this.dp_webgl=null)}R._$HP=0,R._$_0=!0,R._$V2=-1,R._$W0=-1,R._$jr=!1,R._$ZS=!0,R._$tr=-1e6,R._$lr=1e6,R._$is=32,R._$e=!1,R.prototype.getDrawDataIndex=function(t){for(var i=this._$aS.length-1;i>=0;--i)if(this._$aS[i]!=null&&this._$aS[i].getDrawDataID()==t)return i;return-1},R.prototype.getDrawData=function(t){if(t instanceof z){if(this._$Bo==null){this._$Bo=new Object;for(var i=this._$aS.length,e=0;e<i;e++){var r=this._$aS[e],n=r.getDrawDataID();n!=null&&(this._$Bo[n]=r)}}return this._$Bo[id]}return t<this._$aS.length?this._$aS[t]:null},R.prototype.release=function(){this._$3S.clear(),this._$aS.clear(),this._$F2.clear(),this._$Bo!=null&&this._$Bo.clear(),this._$db.clear(),this._$8b.clear(),this._$Hr.clear()},R.prototype.init=function(){this._$co++,this._$F2.length>0&&this.release();for(var t=this._$Ri.getModelImpl(),i=t._$Xr(),e=i.length,r=new Array,n=new Array,o=0;o<e;++o){var h=i[o];this._$F2.push(h),this._$Hr.push(h.init(this));for(var _=h.getBaseData(),a=_.length,s=0;s<a;++s)r.push(_[s]);for(s=0;s<a;++s){var u=_[s].init(this);u._$l2(o),n.push(u)}var p=h.getDrawData(),$=p.length;for(s=0;s<$;++s){var c=p[s],l=c.init(this);l._$IP=o,this._$aS.push(c),this._$8b.push(l)}}for(var I=r.length,x=Xt._$2o();;){var G=!1;for(o=0;o<I;++o){var Z=r[o];if(Z!=null){var v=Z.getTargetBaseDataID();(v==null||v==x||this.getBaseDataIndex(v)>=0)&&(this._$3S.push(Z),this._$db.push(n[o]),r[o]=null,G=!0)}}if(!G)break}var K=t._$E2();if(K!=null){var at=K._$1s();if(at!=null){var ut=at.length;for(o=0;o<ut;++o){var N=at[o];N!=null&&this._$02(N.getParamID(),N.getDefaultValue(),N.getMinValue(),N.getMaxValue())}}}this.clipManager=new M(this.dp_webgl),this.clipManager.init(this,this._$aS,this._$8b),this._$QT=!0},R.prototype.update=function(){R._$e&&d.start("_$zL");for(var t=this._$_2.length,i=0;i<t;i++)this._$_2[i]!=this._$vr[i]&&(this._$Js[i]=R._$ZS,this._$vr[i]=this._$_2[i]);var e=this._$3S.length,r=this._$aS.length,n=ct._$or(),o=ct._$Pr()-n+1;for((this._$Ws==null||this._$Ws.length<o)&&(this._$Ws=new Int16Array(o),this._$Vs=new Int16Array(o)),i=0;i<o;i++)this._$Ws[i]=R._$V2,this._$Vs[i]=R._$V2;for((this._$Er==null||this._$Er.length<r)&&(this._$Er=new Int16Array(r)),i=0;i<r;i++)this._$Er[i]=R._$W0;R._$e&&d.dump("_$zL"),R._$e&&d.start("_$UL");for(var h=null,_=0;_<e;++_){var a=this._$3S[_],s=this._$db[_];try{a._$Nr(this,s),a._$2b(this,s)}catch(x){h==null&&(h=x)}}h!=null&&R._$_0&&d._$Rb(h),R._$e&&d.dump("_$UL"),R._$e&&d.start("_$DL");for(var u=null,p=0;p<r;++p){var $=this._$aS[p],c=this._$8b[p];try{if($._$Nr(this,c),c._$u2())continue;$._$2b(this,c);var l,I=Math.floor($._$zS(this,c)-n);try{l=this._$Vs[I]}catch(x){console.log(`_$li :: %s / %s        @@_$fS
`,x.toString(),$.getDrawDataID().toString()),I=Math.floor($._$zS(this,c)-n);continue}l==R._$V2?this._$Ws[I]=p:this._$Er[l]=p,this._$Vs[I]=p}catch(x){u==null&&(u=x,T._$sT(T._$H7))}}for(u!=null&&R._$_0&&d._$Rb(u),R._$e&&d.dump("_$DL"),R._$e&&d.start("_$eL"),i=this._$Js.length-1;i>=0;i--)this._$Js[i]=R._$jr;return this._$QT=!1,R._$e&&d.dump("_$eL"),!1},R.prototype.preDraw=function(t){this.clipManager!=null&&(t._$ZT(),this.clipManager.setupClip(this,t))},R.prototype.draw=function(t){if(this._$Ws!=null){var i=this._$Ws.length;t._$ZT();for(var e=0;e<i;++e){var r=this._$Ws[e];if(r!=R._$V2)for(;;){var n=this._$aS[r],o=this._$8b[r];if(o._$yo()){var h=o._$IP,_=this._$Hr[h];o._$VS=_.getPartsOpacity(),n.draw(t,this,o)}var a=this._$Er[r];if(a<=r||a==R._$W0)break;r=a}}}else d._$li("call _$Ri.update() before _$Ri.draw() ")},R.prototype.getParamIndex=function(t){for(var i=this._$pb.length-1;i>=0;--i)if(this._$pb[i]==t)return i;return this._$02(t,0,R._$tr,R._$lr)},R.prototype._$BS=function(t){return this.getBaseDataIndex(t)},R.prototype.getBaseDataIndex=function(t){for(var i=this._$3S.length-1;i>=0;--i)if(this._$3S[i]!=null&&this._$3S[i].getBaseDataID()==t)return i;return-1},R.prototype._$UT=function(t,i){var e=new Float32Array(i);return H._$jT(t,0,e,0,t.length),e},R.prototype._$02=function(t,i,e,r){if(this._$qo>=this._$pb.length){var n=this._$pb.length,o=new Array(2*n);H._$jT(this._$pb,0,o,0,n),this._$pb=o,this._$_2=this._$UT(this._$_2,2*n),this._$vr=this._$UT(this._$vr,2*n),this._$Rr=this._$UT(this._$Rr,2*n),this._$Or=this._$UT(this._$Or,2*n);var h=new Array;H._$jT(this._$Js,0,h,0,n),this._$Js=h}return this._$pb[this._$qo]=t,this._$_2[this._$qo]=i,this._$vr[this._$qo]=i,this._$Rr[this._$qo]=e,this._$Or[this._$qo]=r,this._$Js[this._$qo]=R._$ZS,this._$qo++},R.prototype._$Zo=function(t,i){this._$3S[t]=i},R.prototype.setParamFloat=function(t,i){i<this._$Rr[t]&&(i=this._$Rr[t]),i>this._$Or[t]&&(i=this._$Or[t]),this._$_2[t]=i},R.prototype.loadParam=function(){var t=this._$_2.length;t>this._$fs.length&&(t=this._$fs.length),H._$jT(this._$fs,0,this._$_2,0,t)},R.prototype.saveParam=function(){var t=this._$_2.length;t>this._$fs.length&&(this._$fs=new Float32Array(t)),H._$jT(this._$_2,0,this._$fs,0,t)},R.prototype._$v2=function(){return this._$co},R.prototype._$WS=function(){return this._$QT},R.prototype._$Xb=function(t){return this._$Js[t]==R._$ZS},R.prototype._$vs=function(){return this._$Es},R.prototype._$Tr=function(){return this._$ZP},R.prototype.getBaseData=function(t){return this._$3S[t]},R.prototype.getParamFloat=function(t){return this._$_2[t]},R.prototype.getParamMax=function(t){return this._$Or[t]},R.prototype.getParamMin=function(t){return this._$Rr[t]},R.prototype.setPartsOpacity=function(t,i){this._$Hr[t].setPartsOpacity(i)},R.prototype.getPartsOpacity=function(t){return this._$Hr[t].getPartsOpacity()},R.prototype.getPartsDataIndex=function(t){for(var i=this._$F2.length-1;i>=0;--i)if(this._$F2[i]!=null&&this._$F2[i]._$p2()==t)return i;return-1},R.prototype._$q2=function(t){return this._$db[t]},R.prototype._$C2=function(t){return this._$8b[t]},R.prototype._$Bb=function(t){return this._$Hr[t]},R.prototype._$5s=function(t,i){for(var e=this._$Ws.length,r=t,n=0;n<e;++n){var o=this._$Ws[n];if(o!=R._$V2)for(;;){var h=this._$8b[o];h._$yo()&&(h._$GT()._$B2(this,h,r),r+=i);var _=this._$Er[o];if(_<=o||_==R._$W0)break;o=_}}},R.prototype.setDrawParam=function(t){this.dp_webgl=t},R.prototype.getDrawParam=function(){return this.dp_webgl};function Zt(){}Zt._$0T=function(t){return Zt._$0T(new _$5(t))},Zt._$0T=function(t){if(!t.exists())throw new _$ls(t._$3b());for(var i,e=t.length(),r=new Int8Array(e),n=new _$Xs(new _$kb(t),8192),o=0;(i=n.read(r,o,e-o))>0;)o+=i;return r},Zt._$C=function(t){var i=null,e=null;try{i=t instanceof Array?t:new _$Xs(t,8192),e=new _$js;for(var r,n=new Int8Array(1e3);(r=i.read(n))>0;)e.write(n,0,r);return e._$TS()}finally{t?.close(),e!=null&&(e.flush(),e.close())}};function _i(){S||(this._$12=null,this._$bb=null,this._$_L=null,this._$jo=null,this._$iL=null,this._$0L=null,this._$Br=null,this._$Dr=null,this._$Cb=null,this._$mr=null,this._$_L=ti.STATE_FIRST,this._$Br=4e3,this._$Dr=100,this._$Cb=50,this._$mr=150,this._$jo=!0,this._$iL="PARAM_EYE_L_OPEN",this._$0L="PARAM_EYE_R_OPEN")}_i.prototype._$T2=function(){return H.getUserTimeMSec()+Math._$10()*(2*this._$Br-1)},_i.prototype._$uo=function(t){this._$Br=t},_i.prototype._$QS=function(t,i,e){this._$Dr=t,this._$Cb=i,this._$mr=e},_i.prototype._$7T=function(t){var i,e=H.getUserTimeMSec(),r=0;switch(this._$_L){case STATE_CLOSING:(r=(e-this._$bb)/this._$Dr)>=1&&(r=1,this._$_L=ti.STATE_CLOSED,this._$bb=e),i=1-r;break;case STATE_CLOSED:(r=(e-this._$bb)/this._$Cb)>=1&&(this._$_L=ti.STATE_OPENING,this._$bb=e),i=0;break;case STATE_OPENING:(r=(e-this._$bb)/this._$mr)>=1&&(r=1,this._$_L=ti.STATE_INTERVAL,this._$12=this._$T2()),i=r;break;case STATE_INTERVAL:this._$12<e&&(this._$_L=ti.STATE_CLOSING,this._$bb=e),i=1;break;case STATE_FIRST:default:this._$_L=ti.STATE_INTERVAL,this._$12=this._$T2(),i=1}this._$jo||(i=-i),t.setParamFloat(this._$iL,i),t.setParamFloat(this._$0L,i)};var ti=function(){};ti.STATE_FIRST="STATE_FIRST",ti.STATE_INTERVAL="STATE_INTERVAL",ti.STATE_CLOSING="STATE_CLOSING",ti.STATE_CLOSED="STATE_CLOSED",ti.STATE_OPENING="STATE_OPENING";function ft(){S||(q.prototype.constructor.call(this),this._$sb=new Int32Array(ft._$As),this._$U2=new Array,this.transform=null,this.gl=null,ft._$NT==null&&(ft._$NT=ft._$9r(256),ft._$vS=ft._$9r(256),ft._$no=ft._$vb(256)))}ft.prototype=new q,ft._$As=32,ft._$Gr=!1,ft._$NT=null,ft._$vS=null,ft._$no=null,ft._$9r=function(t){return new Float32Array(t)},ft._$vb=function(t){return new Int16Array(t)},ft._$cr=function(t,i){return t==null||t._$yL()<i.length?((t=ft._$9r(2*i.length)).put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},ft._$mb=function(t,i){return t==null||t._$yL()<i.length?((t=ft._$vb(2*i.length)).put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},ft._$Hs=function(){return ft._$Gr},ft._$as=function(t){ft._$Gr=t},ft.prototype.setGL=function(t){this.gl=t},ft.prototype.setTransform=function(t){this.transform=t},ft.prototype._$ZT=function(){},ft.prototype._$Uo=function(t,i,e,r,n,o,h,_){if(!(o<.01)){var a=this._$U2[t],s=o>.9?T.EXPAND_W:0;this.gl.drawElements(a,e,r,n,o,s,this.transform,_)}},ft.prototype._$Rs=function(){throw new Error("_$Rs")},ft.prototype._$Ds=function(t){throw new Error("_$Ds")},ft.prototype._$K2=function(){for(var t=0;t<this._$sb.length;t++)this._$sb[t]!=0&&(this.gl._$Sr(1,this._$sb,t),this._$sb[t]=0)},ft.prototype.setTexture=function(t,i){this._$sb.length<t+1&&this._$nS(t),this._$sb[t]=i},ft.prototype.setTexture=function(t,i){this._$sb.length<t+1&&this._$nS(t),this._$U2[t]=i},ft.prototype._$nS=function(t){var i=Math.max(2*this._$sb.length,t+1+10),e=new Int32Array(i);H._$jT(this._$sb,0,e,0,this._$sb.length),this._$sb=e;var r=new Array;H._$jT(this._$U2,0,r,0,this._$U2.length),this._$U2=r};function xt(){S||(J.prototype.constructor.call(this),this._$GS=null,this._$Y0=null)}xt.prototype=new J,xt._$Xo=new Float32Array(2),xt._$io=new Float32Array(2),xt._$0o=new Float32Array(2),xt._$Lo=new Float32Array(2),xt._$To=new Float32Array(2),xt._$Po=new Float32Array(2),xt._$gT=new Array,xt.prototype._$zP=function(){this._$GS=new w,this._$GS._$zP(),this._$Y0=new Array},xt.prototype.getType=function(){return J._$c2},xt.prototype._$F0=function(t){J.prototype._$F0.call(this,t),this._$GS=t._$nP(),this._$Y0=t._$nP(),J.prototype.readV2_opacity.call(this,t)},xt.prototype.init=function(t){var i=new xi(this);return i._$Yr=new g,this._$32()&&(i._$Wr=new g),i},xt.prototype._$Nr=function(t,i){this!=i._$GT()&&console.log("### assert!! ### ");var e=i;if(this._$GS._$Ur(t)){var r=xt._$gT;r[0]=!1;var n=this._$GS._$Q2(t,r);i._$Ib(r[0]),this.interpolateOpacity(t,this._$GS,i,r);var o=t._$vs(),h=t._$Tr();if(this._$GS._$zr(o,h,n),n<=0){var _=this._$Y0[o[0]];e._$Yr.init(_)}else if(n==1){_=this._$Y0[o[0]];var a=this._$Y0[o[1]],s=h[0];e._$Yr._$fL=_._$fL+(a._$fL-_._$fL)*s,e._$Yr._$gL=_._$gL+(a._$gL-_._$gL)*s,e._$Yr._$B0=_._$B0+(a._$B0-_._$B0)*s,e._$Yr._$z0=_._$z0+(a._$z0-_._$z0)*s,e._$Yr._$qT=_._$qT+(a._$qT-_._$qT)*s}else if(n==2){_=this._$Y0[o[0]],a=this._$Y0[o[1]];var u=this._$Y0[o[2]],p=this._$Y0[o[3]],$=(s=h[0],h[1]),c=_._$fL+(a._$fL-_._$fL)*s,l=u._$fL+(p._$fL-u._$fL)*s;e._$Yr._$fL=c+(l-c)*$,c=_._$gL+(a._$gL-_._$gL)*s,l=u._$gL+(p._$gL-u._$gL)*s,e._$Yr._$gL=c+(l-c)*$,c=_._$B0+(a._$B0-_._$B0)*s,l=u._$B0+(p._$B0-u._$B0)*s,e._$Yr._$B0=c+(l-c)*$,c=_._$z0+(a._$z0-_._$z0)*s,l=u._$z0+(p._$z0-u._$z0)*s,e._$Yr._$z0=c+(l-c)*$,c=_._$qT+(a._$qT-_._$qT)*s,l=u._$qT+(p._$qT-u._$qT)*s,e._$Yr._$qT=c+(l-c)*$}else if(n==3){var I=this._$Y0[o[0]],x=this._$Y0[o[1]],G=this._$Y0[o[2]],Z=this._$Y0[o[3]],v=this._$Y0[o[4]],K=this._$Y0[o[5]],at=this._$Y0[o[6]],ut=this._$Y0[o[7]],N=(s=h[0],$=h[1],h[2]),D=(c=I._$fL+(x._$fL-I._$fL)*s,l=G._$fL+(Z._$fL-G._$fL)*s,v._$fL+(K._$fL-v._$fL)*s),gt=at._$fL+(ut._$fL-at._$fL)*s;e._$Yr._$fL=(1-N)*(c+(l-c)*$)+N*(D+(gt-D)*$),c=I._$gL+(x._$gL-I._$gL)*s,l=G._$gL+(Z._$gL-G._$gL)*s,D=v._$gL+(K._$gL-v._$gL)*s,gt=at._$gL+(ut._$gL-at._$gL)*s,e._$Yr._$gL=(1-N)*(c+(l-c)*$)+N*(D+(gt-D)*$),c=I._$B0+(x._$B0-I._$B0)*s,l=G._$B0+(Z._$B0-G._$B0)*s,D=v._$B0+(K._$B0-v._$B0)*s,gt=at._$B0+(ut._$B0-at._$B0)*s,e._$Yr._$B0=(1-N)*(c+(l-c)*$)+N*(D+(gt-D)*$),c=I._$z0+(x._$z0-I._$z0)*s,l=G._$z0+(Z._$z0-G._$z0)*s,D=v._$z0+(K._$z0-v._$z0)*s,gt=at._$z0+(ut._$z0-at._$z0)*s,e._$Yr._$z0=(1-N)*(c+(l-c)*$)+N*(D+(gt-D)*$),c=I._$qT+(x._$qT-I._$qT)*s,l=G._$qT+(Z._$qT-G._$qT)*s,D=v._$qT+(K._$qT-v._$qT)*s,gt=at._$qT+(ut._$qT-at._$qT)*s,e._$Yr._$qT=(1-N)*(c+(l-c)*$)+N*(D+(gt-D)*$)}else if(n==4){var Rt=this._$Y0[o[0]],Nt=this._$Y0[o[1]],Bt=this._$Y0[o[2]],it=this._$Y0[o[3]],j=this._$Y0[o[4]],_t=this._$Y0[o[5]],k=this._$Y0[o[6]],lt=this._$Y0[o[7]],$t=this._$Y0[o[8]],et=this._$Y0[o[9]],ot=this._$Y0[o[10]],V=this._$Y0[o[11]],W=this._$Y0[o[12]],kt=this._$Y0[o[13]],At=this._$Y0[o[14]],ht=this._$Y0[o[15]],St=(s=h[0],$=h[1],N=h[2],h[3]),It=(c=Rt._$fL+(Nt._$fL-Rt._$fL)*s,l=Bt._$fL+(it._$fL-Bt._$fL)*s,D=j._$fL+(_t._$fL-j._$fL)*s,gt=k._$fL+(lt._$fL-k._$fL)*s,$t._$fL+(et._$fL-$t._$fL)*s),Tt=ot._$fL+(V._$fL-ot._$fL)*s,wt=W._$fL+(kt._$fL-W._$fL)*s,bt=At._$fL+(ht._$fL-At._$fL)*s;e._$Yr._$fL=(1-St)*((1-N)*(c+(l-c)*$)+N*(D+(gt-D)*$))+St*((1-N)*(It+(Tt-It)*$)+N*(wt+(bt-wt)*$)),c=Rt._$gL+(Nt._$gL-Rt._$gL)*s,l=Bt._$gL+(it._$gL-Bt._$gL)*s,D=j._$gL+(_t._$gL-j._$gL)*s,gt=k._$gL+(lt._$gL-k._$gL)*s,It=$t._$gL+(et._$gL-$t._$gL)*s,Tt=ot._$gL+(V._$gL-ot._$gL)*s,wt=W._$gL+(kt._$gL-W._$gL)*s,bt=At._$gL+(ht._$gL-At._$gL)*s,e._$Yr._$gL=(1-St)*((1-N)*(c+(l-c)*$)+N*(D+(gt-D)*$))+St*((1-N)*(It+(Tt-It)*$)+N*(wt+(bt-wt)*$)),c=Rt._$B0+(Nt._$B0-Rt._$B0)*s,l=Bt._$B0+(it._$B0-Bt._$B0)*s,D=j._$B0+(_t._$B0-j._$B0)*s,gt=k._$B0+(lt._$B0-k._$B0)*s,It=$t._$B0+(et._$B0-$t._$B0)*s,Tt=ot._$B0+(V._$B0-ot._$B0)*s,wt=W._$B0+(kt._$B0-W._$B0)*s,bt=At._$B0+(ht._$B0-At._$B0)*s,e._$Yr._$B0=(1-St)*((1-N)*(c+(l-c)*$)+N*(D+(gt-D)*$))+St*((1-N)*(It+(Tt-It)*$)+N*(wt+(bt-wt)*$)),c=Rt._$z0+(Nt._$z0-Rt._$z0)*s,l=Bt._$z0+(it._$z0-Bt._$z0)*s,D=j._$z0+(_t._$z0-j._$z0)*s,gt=k._$z0+(lt._$z0-k._$z0)*s,It=$t._$z0+(et._$z0-$t._$z0)*s,Tt=ot._$z0+(V._$z0-ot._$z0)*s,wt=W._$z0+(kt._$z0-W._$z0)*s,bt=At._$z0+(ht._$z0-At._$z0)*s,e._$Yr._$z0=(1-St)*((1-N)*(c+(l-c)*$)+N*(D+(gt-D)*$))+St*((1-N)*(It+(Tt-It)*$)+N*(wt+(bt-wt)*$)),c=Rt._$qT+(Nt._$qT-Rt._$qT)*s,l=Bt._$qT+(it._$qT-Bt._$qT)*s,D=j._$qT+(_t._$qT-j._$qT)*s,gt=k._$qT+(lt._$qT-k._$qT)*s,It=$t._$qT+(et._$qT-$t._$qT)*s,Tt=ot._$qT+(V._$qT-ot._$qT)*s,wt=W._$qT+(kt._$qT-W._$qT)*s,bt=At._$qT+(ht._$qT-At._$qT)*s,e._$Yr._$qT=(1-St)*((1-N)*(c+(l-c)*$)+N*(D+(gt-D)*$))+St*((1-N)*(It+(Tt-It)*$)+N*(wt+(bt-wt)*$))}else{for(var Ut=0|Math.pow(2,n),ii=new Float32Array(Ut),hi=0;hi<Ut;hi++){for(var gi=hi,Pi=1,yi=0;yi<n;yi++)Pi*=gi%2==0?1-h[yi]:h[yi],gi/=2;ii[hi]=Pi}for(var oi=new Array,Ht=0;Ht<Ut;Ht++)oi[Ht]=this._$Y0[o[Ht]];var di=0,vi=0,Ii=0,wi=0,ei=0;for(Ht=0;Ht<Ut;Ht++)di+=ii[Ht]*oi[Ht]._$fL,vi+=ii[Ht]*oi[Ht]._$gL,Ii+=ii[Ht]*oi[Ht]._$B0,wi+=ii[Ht]*oi[Ht]._$z0,ei+=ii[Ht]*oi[Ht]._$qT;e._$Yr._$fL=di,e._$Yr._$gL=vi,e._$Yr._$B0=Ii,e._$Yr._$z0=wi,e._$Yr._$qT=ei}_=this._$Y0[o[0]],e._$Yr.reflectX=_.reflectX,e._$Yr.reflectY=_.reflectY}},xt.prototype._$2b=function(t,i){this!=i._$GT()&&console.log("### assert!! ### ");var e=i;if(e._$hS(!0),this._$32()){var r=this.getTargetBaseDataID();if(e._$8r==J._$ur&&(e._$8r=t.getBaseDataIndex(r)),e._$8r<0)T._$so&&d._$li("_$L _$0P _$G :: %s",r),e._$hS(!1);else{var n=t.getBaseData(e._$8r);if(n!=null){var o=t._$q2(e._$8r),h=xt._$Xo;h[0]=e._$Yr._$fL,h[1]=e._$Yr._$gL;var _=xt._$io;_[0]=0,_[1]=-.1,o._$GT().getType()==J._$c2?_[1]=-10:_[1]=-.1;var a=xt._$0o;this._$Jr(t,n,o,h,_,a);var s=zt._$92(_,a);n._$nb(t,o,h,h,1,0,2),e._$Wr._$fL=h[0],e._$Wr._$gL=h[1],e._$Wr._$B0=e._$Yr._$B0,e._$Wr._$z0=e._$Yr._$z0,e._$Wr._$qT=e._$Yr._$qT-s*zt._$NS;var u=o.getTotalScale();e.setTotalScale_notForClient(u*e._$Wr._$B0);var p=o.getTotalOpacity();e.setTotalOpacity(p*e.getInterpolatedOpacity()),e._$Wr.reflectX=e._$Yr.reflectX,e._$Wr.reflectY=e._$Yr.reflectY,e._$hS(o._$yo())}else e._$hS(!1)}}else e.setTotalScale_notForClient(e._$Yr._$B0),e.setTotalOpacity(e.getInterpolatedOpacity())},xt.prototype._$nb=function(t,i,e,r,n,o,h){this!=i._$GT()&&console.log("### assert!! ### ");for(var _,a,s=i,u=s._$Wr!=null?s._$Wr:s._$Yr,p=Math.sin(zt._$bS*u._$qT),$=Math.cos(zt._$bS*u._$qT),c=s.getTotalScale(),l=u.reflectX?-1:1,I=u.reflectY?-1:1,x=$*c*l,G=-p*c*I,Z=p*c*l,v=$*c*I,K=u._$fL,at=u._$gL,ut=n*h,N=o;N<ut;N+=h)_=e[N],a=e[N+1],r[N]=x*_+G*a+K,r[N+1]=Z*_+v*a+at},xt.prototype._$Jr=function(t,i,e,r,n,o){i!=e._$GT()&&console.log("### assert!! ### ");var h=xt._$Lo;xt._$Lo[0]=r[0],xt._$Lo[1]=r[1],i._$nb(t,e,h,h,1,0,2);for(var _=xt._$To,a=xt._$Po,s=1,u=0;u<10;u++){if(a[0]=r[0]+s*n[0],a[1]=r[1]+s*n[1],i._$nb(t,e,a,_,1,0,2),_[0]-=h[0],_[1]-=h[1],_[0]!=0||_[1]!=0)return o[0]=_[0],void(o[1]=_[1]);if(a[0]=r[0]-s*n[0],a[1]=r[1]-s*n[1],i._$nb(t,e,a,_,1,0,2),_[0]-=h[0],_[1]-=h[1],_[0]!=0||_[1]!=0)return _[0]=-_[0],_[0]=-_[0],o[0]=_[0],void(o[1]=_[1]);s*=.1}T._$so&&console.log(`_$L0 to transform _$SP
`)};function xi(t){Jt.prototype.constructor.call(this,t),this._$8r=J._$ur,this._$Yr=null,this._$Wr=null}xi.prototype=new Jt;function ct(){S||(C.prototype.constructor.call(this),this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null)}ct.prototype=new C,ct._$ur=-2,ct._$ES=500,ct._$wb=2,ct._$8S=3,ct._$os=4,ct._$52=ct._$ES,ct._$R2=ct._$ES,ct._$Sb=function(t){for(var i=t.length-1;i>=0;--i){var e=t[i];e<ct._$52?ct._$52=e:e>ct._$R2&&(ct._$R2=e)}},ct._$or=function(){return ct._$52},ct._$Pr=function(){return ct._$R2},ct.prototype._$F0=function(t){this._$gP=t._$nP(),this._$dr=t._$nP(),this._$GS=t._$nP(),this._$qb=t._$6L(),this._$Lb=t._$cS(),this._$mS=t._$Tb(),t.getFormatVersion()>=st._$T7?(this.clipID=t._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=null,ct._$Sb(this._$Lb)},ct.prototype.getClipIDList=function(){return this.clipIDList},ct.prototype._$Nr=function(t,i){if(i._$IS[0]=!1,i._$Us=Y._$Z2(t,this._$GS,i._$IS,this._$Lb),!T._$Zs){if(i._$IS[0])return}i._$7s=Y._$br(t,this._$GS,i._$IS,this._$mS)},ct.prototype._$2b=function(t){},ct.prototype.getDrawDataID=function(){return this._$gP},ct.prototype._$j2=function(t){this._$gP=t},ct.prototype.getOpacity=function(t,i){return i._$7s},ct.prototype._$zS=function(t,i){return i._$Us},ct.prototype.getTargetBaseDataID=function(){return this._$dr},ct.prototype._$gs=function(t){this._$dr=t},ct.prototype._$32=function(){return this._$dr!=null&&this._$dr!=Xt._$2o()},ct.prototype.getType=function(){};function ui(){S||(this._$NL=null,this._$3S=null,this._$aS=null,ui._$42++)}ui._$42=0,ui.prototype._$1b=function(){return this._$3S},ui.prototype.getDrawDataList=function(){return this._$aS},ui.prototype._$F0=function(t){this._$NL=t._$nP(),this._$aS=t._$nP(),this._$3S=t._$nP()},ui.prototype._$kr=function(t){t._$Zo(this._$3S),t._$xo(this._$aS),this._$3S=null,this._$aS=null};function jt(){S||(y.prototype.constructor.call(this),this._$zo=new ft)}jt.prototype=new y,jt.loadModel=function(t){var i=new jt;return y._$62(i,t),i},jt.loadModel=function(t){var i=new jt;return y._$62(i,t),i},jt._$to=function(){return new jt},jt._$er=function(t){var i=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(i.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+i._$PL());for(var e=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],r=jt.loadModel(i._$3b()),n=0;n<e.length;n++){var o=new _$5(e[n]);if(o.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+o._$PL());r.setTexture(n,_$nL._$_o(t,o._$3b()))}return r},jt.prototype.setGL=function(t){this._$zo.setGL(t)},jt.prototype.setTransform=function(t){this._$zo.setTransform(t)},jt.prototype.draw=function(){this._$5S.draw(this._$zo)},jt.prototype._$K2=function(){this._$zo._$K2()},jt.prototype.setTexture=function(t,i){this._$zo==null&&d._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(t,i)},jt.prototype.setTexture=function(t,i){this._$zo==null&&d._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(t,i)},jt.prototype._$Rs=function(){return this._$zo._$Rs()},jt.prototype._$Ds=function(t){this._$zo._$Ds(t)},jt.prototype.getDrawParam=function(){return this._$zo};function Ct(){S||(b.prototype.constructor.call(this),this.motions=new Array,this._$o2=null,this._$7r=Ct._$Co++,this._$D0=30,this._$yT=0,this._$E=!1,this.loopFadeIn=!0,this._$rr=-1,this._$eP=0)}Ct.prototype=new b,Ct._$cs="VISIBLE:",Ct._$ar="LAYOUT:",Ct.MTN_PREFIX_FADEIN="FADEIN:",Ct.MTN_PREFIX_FADEOUT="FADEOUT:",Ct._$Co=0,Ct._$1T=1,Ct.loadMotion=function(t){var i=Zt._$C(t);return Ct.loadMotion(i)};function ni(t,i){return String.fromCharCode(t.getUint8(i))}Ct.loadMotion=function(t){t instanceof ArrayBuffer&&(t=new DataView(t));var i=new Ct,e=[0],r=t.byteLength;i._$yT=0;for(var n=0;n<r;++n){var o=ni(t,n),h=o.charCodeAt(0);if(o!=`
`&&o!="\r")if(o!="#")if(o!="$"){if(97<=h&&h<=122||65<=h&&h<=90||o=="_"){for(p=n,$=-1;n<r&&(o=ni(t,n))!="\r"&&o!=`
`;++n)if(o=="="){$=n;break}if($>=0){var _=new dt;nt.startsWith(t,p,Ct._$cs)?(_._$RP=dt._$hs,_._$4P=nt.createString(t,p,$-p)):nt.startsWith(t,p,Ct._$ar)?(_._$4P=nt.createString(t,p+7,$-p-7),nt.startsWith(t,p+7,"ANCHOR_X")?_._$RP=dt._$xs:nt.startsWith(t,p+7,"ANCHOR_Y")?_._$RP=dt._$us:nt.startsWith(t,p+7,"SCALE_X")?_._$RP=dt._$qs:nt.startsWith(t,p+7,"SCALE_Y")?_._$RP=dt._$Ys:nt.startsWith(t,p+7,"X")?_._$RP=dt._$ws:nt.startsWith(t,p+7,"Y")&&(_._$RP=dt._$Ns)):(_._$RP=dt._$Fr,_._$4P=nt.createString(t,p,$-p)),i.motions.push(_);var a=0,s=[];for(n=$+1;n<r&&(o=ni(t,n))!="\r"&&o!=`
`;++n)if(o!=","&&o!=" "&&o!="	"&&(l=nt._$LS(t,r,n,e),e[0]>0)){s.push(l),a++;var u=e[0];if(u<n){console.log(`_$n0 _$hi . @Live2DMotion loadMotion()
`);break}n=u-1}_._$I0=new Float32Array(s),a>i._$yT&&(i._$yT=a)}}}else{for(var p=n,$=-1;n<r&&(o=ni(t,n))!="\r"&&o!=`
`;++n)if(o=="="){$=n;break}var c=!1;if($>=0){for($==p+4&&ni(t,p+1)=="f"&&ni(t,p+2)=="p"&&ni(t,p+3)=="s"&&(c=!0),n=$+1;n<r&&(o=ni(t,n))!="\r"&&o!=`
`;++n)if(o!=","&&o!=" "&&o!="	"){var l=nt._$LS(t,r,n,e);e[0]>0&&c&&5<l&&l<121&&(i._$D0=l),n=e[0]}}for(;n<r&&ni(t,n)!=`
`&&ni(t,n)!="\r";++n);}else for(;n<r&&ni(t,n)!=`
`&&ni(t,n)!="\r";++n);}return i._$rr=1e3*i._$yT/i._$D0|0,i},Ct.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr},Ct.prototype.getLoopDurationMSec=function(){return this._$rr},Ct.prototype.dump=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];console.log("_$wL[%s] [%d]. ",i._$4P,i._$I0.length);for(var e=0;e<i._$I0.length&&e<10;e++)console.log("%5.2f ,",i._$I0[e]);console.log(`
`)}},Ct.prototype.updateParamExe=function(t,i,e,r){for(var n=(i-r._$z2)*this._$D0/1e3,o=0|n,h=n-o,_=0;_<this.motions.length;_++){var a=this.motions[_],s=a._$I0.length,u=a._$4P;if(a._$RP==dt._$hs){var p=a._$I0[o>=s?s-1:o];t.setParamFloat(u,p)}else if(!(dt._$ws<=a._$RP&&a._$RP<=dt._$Ys)){var $=t.getParamIndex(u),c=t.getModelContext(),l=.4*(c.getParamMax($)-c.getParamMin($)),I=c.getParamFloat($),x=a._$I0[o>=s?s-1:o],G=a._$I0[o+1>=s?s-1:o+1],Z=I+((x<G&&G-x>l||x>G&&x-G>l?x:x+(G-x)*h)-I)*e;t.setParamFloat(u,Z)}}o>=this._$yT&&(this._$E?(r._$z2=i,this.loopFadeIn&&(r._$bs=i)):r._$9L=!0),this._$eP=e},Ct.prototype._$r0=function(){return this._$E},Ct.prototype._$aL=function(t){this._$E=t},Ct.prototype._$S0=function(){return this._$D0},Ct.prototype._$U0=function(t){this._$D0=t},Ct.prototype.isLoopFadeIn=function(){return this.loopFadeIn},Ct.prototype.setLoopFadeIn=function(t){this.loopFadeIn=t};function pi(){this._$P=new Float32Array(100),this.size=0}pi.prototype.clear=function(){this.size=0},pi.prototype.add=function(t){if(this._$P.length<=this.size){var i=new Float32Array(2*this.size);H._$jT(this._$P,0,i,0,this.size),this._$P=i}this._$P[this.size++]=t},pi.prototype._$BL=function(){var t=new Float32Array(this.size);return H._$jT(this._$P,0,t,0,this.size),t};function dt(){this._$4P=null,this._$I0=null,this._$RP=null}dt._$Fr=0,dt._$hs=1,dt._$ws=100,dt._$Ns=101,dt._$xs=102,dt._$us=103,dt._$qs=104,dt._$Ys=105;function Kt(){S||(J.prototype.constructor.call(this),this._$o=0,this._$A=0,this._$GS=null,this._$Eo=null)}Kt.prototype=new J,Kt._$gT=new Array,Kt.prototype._$zP=function(){this._$GS=new w,this._$GS._$zP()},Kt.prototype._$F0=function(t){J.prototype._$F0.call(this,t),this._$A=t._$6L(),this._$o=t._$6L(),this._$GS=t._$nP(),this._$Eo=t._$nP(),J.prototype.readV2_opacity.call(this,t)},Kt.prototype.init=function(t){var i=new Oi(this),e=(this._$o+1)*(this._$A+1);return i._$Cr!=null&&(i._$Cr=null),i._$Cr=new Float32Array(2*e),i._$hr!=null&&(i._$hr=null),this._$32()?i._$hr=new Float32Array(2*e):i._$hr=null,i},Kt.prototype._$Nr=function(t,i){var e=i;if(this._$GS._$Ur(t)){var r=this._$VT(),n=Kt._$gT;n[0]=!1,Y._$Vr(t,this._$GS,n,r,this._$Eo,e._$Cr,0,2),i._$Ib(n[0]),this.interpolateOpacity(t,this._$GS,i,n)}},Kt.prototype._$2b=function(t,i){var e=i;if(e._$hS(!0),this._$32()){var r=this.getTargetBaseDataID();if(e._$8r==J._$ur&&(e._$8r=t.getBaseDataIndex(r)),e._$8r<0)T._$so&&d._$li("_$L _$0P _$G :: %s",r),e._$hS(!1);else{var n=t.getBaseData(e._$8r),o=t._$q2(e._$8r);if(n!=null&&o._$yo()){var h=o.getTotalScale();e.setTotalScale_notForClient(h);var _=o.getTotalOpacity();e.setTotalOpacity(_*e.getInterpolatedOpacity()),n._$nb(t,o,e._$Cr,e._$hr,this._$VT(),0,2),e._$hS(!0)}else e._$hS(!1)}}else e.setTotalOpacity(e.getInterpolatedOpacity())},Kt.prototype._$nb=function(t,i,e,r,n,o,h){var _=i,a=_._$hr!=null?_._$hr:_._$Cr;Kt.transformPoints_sdk2(e,r,n,o,h,a,this._$o,this._$A)},Kt.transformPoints_sdk2=function(t,i,e,r,n,o,h,_){for(var a,s,u,p=e*n,$=0,c=0,l=0,I=0,x=0,G=0,Z=!1,v=r;v<p;v+=n){var K,at,ut,N;if(ut=t[v],at=(N=t[v+1])*_,(K=ut*h)<0||at<0||h<=K||_<=at){var D=h+1;if(!Z){Z=!0,$=.25*(o[2*(0+0*D)]+o[2*(h+0*D)]+o[2*(0+_*D)]+o[2*(h+_*D)]),c=.25*(o[2*(0+0*D)+1]+o[2*(h+0*D)+1]+o[2*(0+_*D)+1]+o[2*(h+_*D)+1]);var gt=o[2*(h+_*D)]-o[2*(0+0*D)],Rt=o[2*(h+_*D)+1]-o[2*(0+0*D)+1],Nt=o[2*(h+0*D)]-o[2*(0+_*D)],Bt=o[2*(h+0*D)+1]-o[2*(0+_*D)+1];$-=.5*((l=.5*(gt+Nt))+(x=.5*(gt-Nt))),c-=.5*((I=.5*(Rt+Bt))+(G=.5*(Rt-Bt)))}if(-2<ut&&ut<3&&-2<N&&N<3)if(ut<=0)if(N<=0){var it=o[2*(0+0*D)],j=o[2*(0+0*D)+1],_t=$-2*l,k=c-2*I,lt=$-2*x,$t=c-2*G,et=$-2*l-2*x,ot=c-2*I-2*G;(V=.5*(ut- -2))+(W=.5*(N- -2))<=1?(i[v]=et+(lt-et)*V+(_t-et)*W,i[v+1]=ot+($t-ot)*V+(k-ot)*W):(i[v]=it+(_t-it)*(1-V)+(lt-it)*(1-W),i[v+1]=j+(k-j)*(1-V)+($t-j)*(1-W))}else if(N>=1)lt=o[2*(0+_*D)],$t=o[2*(0+_*D)+1],et=$-2*l+1*x,ot=c-2*I+1*G,it=$+3*x,j=c+3*G,_t=$-2*l+3*x,k=c-2*I+3*G,(V=.5*(ut- -2))+(W=.5*(N-1))<=1?(i[v]=et+(lt-et)*V+(_t-et)*W,i[v+1]=ot+($t-ot)*V+(k-ot)*W):(i[v]=it+(_t-it)*(1-V)+(lt-it)*(1-W),i[v+1]=j+(k-j)*(1-V)+($t-j)*(1-W));else{(ht=0|at)==_&&(ht=_-1);var V=.5*(ut- -2),W=at-ht,kt=ht/_,At=(ht+1)/_;lt=o[2*(0+ht*D)],$t=o[2*(0+ht*D)+1],it=o[2*(0+(ht+1)*D)],j=o[2*(0+(ht+1)*D)+1],et=$-2*l+kt*x,ot=c-2*I+kt*G,_t=$-2*l+At*x,k=c-2*I+At*G,V+W<=1?(i[v]=et+(lt-et)*V+(_t-et)*W,i[v+1]=ot+($t-ot)*V+(k-ot)*W):(i[v]=it+(_t-it)*(1-V)+(lt-it)*(1-W),i[v+1]=j+(k-j)*(1-V)+($t-j)*(1-W))}else if(1<=ut)if(N<=0)_t=o[2*(h+0*D)],k=o[2*(h+0*D)+1],it=$+3*l,j=c+3*I,et=$+1*l-2*x,ot=c+1*I-2*G,lt=$+3*l-2*x,$t=c+3*I-2*G,(V=.5*(ut-1))+(W=.5*(N- -2))<=1?(i[v]=et+(lt-et)*V+(_t-et)*W,i[v+1]=ot+($t-ot)*V+(k-ot)*W):(i[v]=it+(_t-it)*(1-V)+(lt-it)*(1-W),i[v+1]=j+(k-j)*(1-V)+($t-j)*(1-W));else if(N>=1)et=o[2*(h+_*D)],ot=o[2*(h+_*D)+1],lt=$+3*l+1*x,$t=c+3*I+1*G,_t=$+1*l+3*x,k=c+1*I+3*G,it=$+3*l+3*x,j=c+3*I+3*G,(V=.5*(ut-1))+(W=.5*(N-1))<=1?(i[v]=et+(lt-et)*V+(_t-et)*W,i[v+1]=ot+($t-ot)*V+(k-ot)*W):(i[v]=it+(_t-it)*(1-V)+(lt-it)*(1-W),i[v+1]=j+(k-j)*(1-V)+($t-j)*(1-W));else{var ht;(ht=0|at)==_&&(ht=_-1),V=.5*(ut-1),W=at-ht,kt=ht/_,At=(ht+1)/_,et=o[2*(h+ht*D)],ot=o[2*(h+ht*D)+1],_t=o[2*(h+(ht+1)*D)],k=o[2*(h+(ht+1)*D)+1],lt=$+3*l+kt*x,$t=c+3*I+kt*G,it=$+3*l+At*x,j=c+3*I+At*G,V+W<=1?(i[v]=et+(lt-et)*V+(_t-et)*W,i[v+1]=ot+($t-ot)*V+(k-ot)*W):(i[v]=it+(_t-it)*(1-V)+(lt-it)*(1-W),i[v+1]=j+(k-j)*(1-V)+($t-j)*(1-W))}else if(N<=0){(Tt=0|K)==h&&(Tt=h-1),V=K-Tt,W=.5*(N- -2);var St=Tt/h,It=(Tt+1)/h;_t=o[2*(Tt+0*D)],k=o[2*(Tt+0*D)+1],it=o[2*(Tt+1+0*D)],j=o[2*(Tt+1+0*D)+1],et=$+St*l-2*x,ot=c+St*I-2*G,lt=$+It*l-2*x,$t=c+It*I-2*G,V+W<=1?(i[v]=et+(lt-et)*V+(_t-et)*W,i[v+1]=ot+($t-ot)*V+(k-ot)*W):(i[v]=it+(_t-it)*(1-V)+(lt-it)*(1-W),i[v+1]=j+(k-j)*(1-V)+($t-j)*(1-W))}else if(N>=1){var Tt;(Tt=0|K)==h&&(Tt=h-1),V=K-Tt,W=.5*(N-1),St=Tt/h,It=(Tt+1)/h,et=o[2*(Tt+_*D)],ot=o[2*(Tt+_*D)+1],lt=o[2*(Tt+1+_*D)],$t=o[2*(Tt+1+_*D)+1],_t=$+St*l+3*x,k=c+St*I+3*G,it=$+It*l+3*x,j=c+It*I+3*G,V+W<=1?(i[v]=et+(lt-et)*V+(_t-et)*W,i[v+1]=ot+($t-ot)*V+(k-ot)*W):(i[v]=it+(_t-it)*(1-V)+(lt-it)*(1-W),i[v+1]=j+(k-j)*(1-V)+($t-j)*(1-W))}else B.err.printf(`_$li calc : %.4f , %.4f          @@BDBoxGrid
`,ut,N);else i[v]=$+ut*l+N*x,i[v+1]=c+ut*I+N*G}else a=2*((0|K)+(0|at)*(h+1)),(s=K-(0|K))+(u=at-(0|at))<1?(i[v]=o[a]*(1-s-u)+o[a+2]*s+o[a+2*(h+1)]*u,i[v+1]=o[a+1]*(1-s-u)+o[a+3]*s+o[a+2*(h+1)+1]*u):(i[v]=o[a+2*(h+1)+2]*(s-1+u)+o[a+2*(h+1)]*(1-s)+o[a+2]*(1-u),i[v+1]=o[a+2*(h+1)+3]*(s-1+u)+o[a+2*(h+1)+1]*(1-s)+o[a+3]*(1-u))}},Kt.prototype.transformPoints_sdk1=function(t,i,e,r,n,o,h){for(var _,a,s,u,p,$,c,l=i,I=this._$o,x=this._$A,G=n*h,Z=l._$hr!=null?l._$hr:l._$Cr,v=o;v<G;v+=h)T._$ts?(_=e[v],a=e[v+1],_<0?_=0:_>1&&(_=1),a<0?a=0:a>1&&(a=1),u=0|(a*=x),(s=0|(_*=I))>I-1&&(s=I-1),u>x-1&&(u=x-1),$=_-s,c=a-u,p=2*(s+u*(I+1))):($=(_=e[v]*I)-(0|_),c=(a=e[v+1]*x)-(0|a),p=2*((0|_)+(0|a)*(I+1))),$+c<1?(r[v]=Z[p]*(1-$-c)+Z[p+2]*$+Z[p+2*(I+1)]*c,r[v+1]=Z[p+1]*(1-$-c)+Z[p+3]*$+Z[p+2*(I+1)+1]*c):(r[v]=Z[p+2*(I+1)+2]*($-1+c)+Z[p+2*(I+1)]*(1-$)+Z[p+2]*(1-c),r[v+1]=Z[p+2*(I+1)+3]*($-1+c)+Z[p+2*(I+1)+1]*(1-$)+Z[p+3]*(1-c))},Kt.prototype._$VT=function(){return(this._$o+1)*(this._$A+1)},Kt.prototype.getType=function(){return J._$_b};function Oi(t){Jt.prototype.constructor.call(this,t),this._$8r=J._$ur,this._$Cr=null,this._$hr=null}Oi.prototype=new Jt;function Wt(){S||(this.visible=!0,this._$g0=!1,this._$NL=null,this._$3S=null,this._$aS=null,Wt._$42++)}Wt._$42=0,Wt.prototype._$zP=function(){this._$3S=new Array,this._$aS=new Array},Wt.prototype._$F0=function(t){this._$g0=t._$8L(),this.visible=t._$8L(),this._$NL=t._$nP(),this._$3S=t._$nP(),this._$aS=t._$nP()},Wt.prototype.init=function(t){var i=new Li(this);return i.setPartsOpacity(this.isVisible()?1:0),i},Wt.prototype._$6o=function(t){if(this._$3S==null)throw new Error("_$3S _$6 _$Wo@_$6o");this._$3S.push(t)},Wt.prototype._$3o=function(t){if(this._$aS==null)throw new Error("_$aS _$6 _$Wo@_$3o");this._$aS.push(t)},Wt.prototype._$Zo=function(t){this._$3S=t},Wt.prototype._$xo=function(t){this._$aS=t},Wt.prototype.isVisible=function(){return this.visible},Wt.prototype._$uL=function(){return this._$g0},Wt.prototype._$KP=function(t){this.visible=t},Wt.prototype._$ET=function(t){this._$g0=t},Wt.prototype.getBaseData=function(){return this._$3S},Wt.prototype.getDrawData=function(){return this._$aS},Wt.prototype._$p2=function(){return this._$NL},Wt.prototype._$ob=function(t){this._$NL=t},Wt.prototype.getPartsID=function(){return this._$NL},Wt.prototype._$MP=function(t){this._$NL=t};function Li(t){this._$VS=null,this._$e0=null,this._$e0=t}Li.prototype=new function(){},Li.prototype.getPartsOpacity=function(){return this._$VS},Li.prototype.setPartsOpacity=function(t){this._$VS=t};function si(t){S||(this.id=t)}si._$L7=function(){P._$27(),Xt._$27(),z._$27(),O._$27()},si.prototype.toString=function(){return this.id};function fi(){S||(this._$4S=null)}fi.prototype._$1s=function(){return this._$4S},fi.prototype._$zP=function(){this._$4S=new Array},fi.prototype._$F0=function(t){this._$4S=t._$nP()},fi.prototype._$Ks=function(t){this._$4S.push(t)};function Dt(t,i){this.canvas=t,this.context=i,this.viewport=new Array(0,0,t.width,t.height),this._$6r=1,this._$xP=0,this._$3r=1,this._$uP=0,this._$Qo=-1,this.cacheImages={}}Dt.tr=new ri,Dt._$50=new ri,Dt._$Ti=new Array(0,0),Dt._$Pi=new Array(0,0),Dt._$B=new Array(0,0),Dt.prototype._$lP=function(t,i,e,r){this.viewport=new Array(t,i,e,r)},Dt.prototype._$bL=function(){this.context.save();var t=this.viewport;t!=null&&(this.context.beginPath(),this.context._$Li(t[0],t[1],t[2],t[3]),this.context.clip())},Dt.prototype._$ei=function(){this.context.restore()},Dt.prototype.drawElements=function(t,i,e,r,n,o,h,_){try{n!=this._$Qo&&(this._$Qo=n,this.context.globalAlpha=n);for(var a=i.length,s=t.width,u=t.height,p=this.context,$=this._$xP,c=this._$uP,l=this._$6r,I=this._$3r,x=Dt.tr,G=Dt._$Ti,Z=Dt._$Pi,v=Dt._$B,K=0;K<a;K+=3){p.save();var at=i[K],ut=i[K+1],N=i[K+2],D=$+l*e[2*at],gt=c+I*e[2*at+1],Rt=$+l*e[2*ut],Nt=c+I*e[2*ut+1],Bt=$+l*e[2*N],it=c+I*e[2*N+1];h&&(h._$PS(D,gt,v),D=v[0],gt=v[1],h._$PS(Rt,Nt,v),Rt=v[0],Nt=v[1],h._$PS(Bt,it,v),Bt=v[0],it=v[1]);var j=s*r[2*at],_t=u-u*r[2*at+1],k=s*r[2*ut],lt=u-u*r[2*ut+1],$t=s*r[2*N],et=u-u*r[2*N+1],ot=Math.atan2(lt-_t,k-j),V=Math.atan2(Nt-gt,Rt-D),W=Rt-D,kt=Nt-gt,At=Math.sqrt(W*W+kt*kt),ht=k-j,St=lt-_t,It=At/Math.sqrt(ht*ht+St*St);A._$ni($t,et,j,_t,k-j,lt-_t,-(lt-_t),k-j,G),A._$ni(Bt,it,D,gt,Rt-D,Nt-gt,-(Nt-gt),Rt-D,Z);var Tt=(Z[0]-G[0])/G[1],wt=Math.min(j,k,$t),bt=Math.max(j,k,$t),Ut=Math.min(_t,lt,et),ii=Math.max(_t,lt,et),hi=Math.floor(wt),gi=Math.floor(Ut),Pi=Math.ceil(bt),yi=Math.ceil(ii);if(x.identity(),x.translate(D,gt),x.rotate(V),x.scale(1,Z[1]/G[1]),x.shear(Tt,0),x.scale(It,It),x.rotate(-ot),x.translate(-j,-_t),x.setContext(p),o||(o=1.2),T.IGNORE_EXPAND&&(o=0),T.USE_CACHED_POLYGON_IMAGE){var oi=_._$e0;if(oi.gl_cacheImage=oi.gl_cacheImage||{},!oi.gl_cacheImage[K]){var Ht=Dt.createCanvas(Pi-hi,yi-gi);T.DEBUG_DATA.LDGL_CANVAS_MB=T.DEBUG_DATA.LDGL_CANVAS_MB||0,T.DEBUG_DATA.LDGL_CANVAS_MB+=(Pi-hi)*(yi-gi)*4;var di=Ht.getContext("2d");di.translate(-hi,-gi),Dt.clip(di,x,o,At,j,_t,k,lt,$t,et,D,gt,Rt,Nt,Bt,it),di.drawImage(t,0,0),oi.gl_cacheImage[K]={cacheCanvas:Ht,cacheContext:di}}p.drawImage(oi.gl_cacheImage[K].cacheCanvas,hi,gi)}else T.IGNORE_CLIP||Dt.clip(p,x,o,At,j,_t,k,lt,$t,et,D,gt,Rt,Nt,Bt,it),T.USE_ADJUST_TRANSLATION&&(wt=0,bt=s,Ut=0,ii=u),p.drawImage(t,wt,Ut,bt-wt,ii-Ut,wt,Ut,bt-wt,ii-Ut);p.restore()}}catch(vi){d._$Rb(vi)}},Dt.clip=function(t,i,e,r,n,o,h,_,a,s,u,p,$,c,l,I){e>.02?Dt.expandClip(t,i,e,r,u,p,$,c,l,I):Dt.clipWithTransform(t,null,n,o,h,_,a,s)},Dt.expandClip=function(t,i,e,r,n,o,h,_,a,s){var u=h-n,p=_-o,$=a-n,c=s-o,l=u*c-p*$>0?e:-e,I=-p,x=u,G=a-h,Z=s-_,v=-Z,K=G,at=Math.sqrt(G*G+Z*Z),ut=-c,N=$,D=Math.sqrt($*$+c*c),gt=n-l*I/r,Rt=o-l*x/r,Nt=h-l*I/r,Bt=_-l*x/r,it=h-l*v/at,j=_-l*K/at,_t=a-l*v/at,k=s-l*K/at,lt=n+l*ut/D,$t=o+l*N/D,et=a+l*ut/D,ot=s+l*N/D,V=Dt._$50;return i._$P2(V)!=null&&(Dt.clipWithTransform(t,V,gt,Rt,Nt,Bt,it,j,_t,k,et,ot,lt,$t),!0)},Dt.clipWithTransform=function(t,i,e,r,n,o,h,_){if(arguments.length<7)d._$li("err : @LDGL.clip()");else if(arguments[1]instanceof ri){var a=Dt._$B,s=i,u=arguments;if(t.beginPath(),s){s._$PS(u[2],u[3],a),t.moveTo(a[0],a[1]);for(var p=4;p<u.length;p+=2)s._$PS(u[p],u[p+1],a),t.lineTo(a[0],a[1])}else for(t.moveTo(u[2],u[3]),p=4;p<u.length;p+=2)t.lineTo(u[p],u[p+1]);t.clip()}else d._$li("err : a[0] is _$6 LDTransform @LDGL.clip()")},Dt.createCanvas=function(t,i){var e=document.createElement("canvas");return e.setAttribute("width",t),e.setAttribute("height",i),e||d._$li("err : "+e),e},Dt.dumpValues=function(){for(var t="",i=0;i<arguments.length;i++)t+="["+i+"]= "+arguments[i].toFixed(3)+" , ";console.log(t)};function ci(){S||(this._$TT=null,this._$LT=null,this._$FS=null,this._$wL=null)}ci.prototype._$F0=function(t){this._$TT=t._$_T(),this._$LT=t._$_T(),this._$FS=t._$_T(),this._$wL=t._$nP()},ci.prototype.getMinValue=function(){return this._$TT},ci.prototype.getMaxValue=function(){return this._$LT},ci.prototype.getDefaultValue=function(){return this._$FS},ci.prototype.getParamID=function(){return this._$wL};function Jt(t){S||(this._$e0=null,this._$IP=null,this._$JS=!1,this._$AT=!0,this._$e0=t,this.totalScale=1,this._$7s=1,this.totalOpacity=1)}Jt.prototype._$yo=function(){return this._$AT&&!this._$JS},Jt.prototype._$hS=function(t){this._$AT=t},Jt.prototype._$GT=function(){return this._$e0},Jt.prototype._$l2=function(t){this._$IP=t},Jt.prototype.getPartsIndex=function(){return this._$IP},Jt.prototype._$x2=function(){return this._$JS},Jt.prototype._$Ib=function(t){this._$JS=t},Jt.prototype.getTotalScale=function(){return this.totalScale},Jt.prototype.setTotalScale_notForClient=function(t){this.totalScale=t},Jt.prototype.getInterpolatedOpacity=function(){return this._$7s},Jt.prototype.setInterpolatedOpacity=function(t){this._$7s=t},Jt.prototype.getTotalOpacity=function(t){return this.totalOpacity},Jt.prototype.setTotalOpacity=function(t){this.totalOpacity=t};function T(){}T._$2s="2.1.00_1",T._$Kr=201001e3,T._$sP=!0,T._$so=!0,T._$cb=!1,T._$3T=!0,T._$Ts=!0,T._$fb=!0,T._$ts=!0,T.L2D_DEFORMER_EXTEND=!0,T._$Wb=!1,T._$yr=!1,T._$Zs=!1,T.L2D_NO_ERROR=0,T._$i7=1e3,T._$9s=1001,T._$es=1100,T._$r7=2e3,T._$07=2001,T._$b7=2002,T._$H7=4e3,T.L2D_COLOR_BLEND_MODE_MULT=0,T.L2D_COLOR_BLEND_MODE_ADD=1,T.L2D_COLOR_BLEND_MODE_INTERPOLATE=2,T._$6b=!0,T._$cT=0,T.clippingMaskBufferSize=256,T.glContext=new Array,T.frameBuffers=new Array,T.fTexture=new Array,T.IGNORE_CLIP=!1,T.IGNORE_EXPAND=!1,T.EXPAND_W=2,T.USE_ADJUST_TRANSLATION=!0,T.USE_CANVAS_TRANSFORM=!0,T.USE_CACHED_POLYGON_IMAGE=!1,T.DEBUG_DATA={},T.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!0,EXPAND_W:4},T.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},T.PROFILE_IOS_DEFAULT=T.PROFILE_IOS_QUALITY,T.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},T.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},T.initProfile=function(){Ot.isIOS()?T.setupProfile(T.PROFILE_IOS_DEFAULT):Ot.isAndroid()?T.setupProfile(T.PROFILE_ANDROID):T.setupProfile(T.PROFILE_DESKTOP)},T.setupProfile=function(t,i){if(typeof t=="number")switch(t){case 9901:t=T.PROFILE_IOS_SPEED;break;case 9902:t=T.PROFILE_IOS_QUALITY;break;case 9903:t=T.PROFILE_IOS_DEFAULT;break;case 9904:t=T.PROFILE_ANDROID;break;case 9905:t=T.PROFILE_DESKTOP;break;default:alert("profile _$6 _$Ui : "+t)}arguments.length<2&&(i=!0),i&&console.log("profile : "+t.PROFILE_NAME);for(var e in t)T[e]=t[e],i&&console.log("  ["+e+"] = "+t[e])},T.init=function(){T._$6b&&(console.log("Live2D %s",T._$2s),T._$6b=!1,T.initProfile())},T.getVersionStr=function(){return T._$2s},T.getVersionNo=function(){return T._$Kr},T._$sT=function(t){T._$cT=t},T.getError=function(){var t=T._$cT;return T._$cT=0,t},T.dispose=function(){T.glContext=[],T.frameBuffers=[],T.fTexture=[]},T.setGL=function(t,i){var e=i||0;T.glContext[e]=t},T.getGL=function(t){return T.glContext[t]},T.setClippingMaskBufferSize=function(t){T.clippingMaskBufferSize=t},T.getClippingMaskBufferSize=function(){return T.clippingMaskBufferSize},T.deleteBuffer=function(t){T.getGL(t).deleteFramebuffer(T.frameBuffers[t].framebuffer),delete T.frameBuffers[t],delete T.glContext[t]};function Ci(){}Ci._$r2=function(t){return t<0?0:t>1?1:.5-.5*Math.cos(t*zt.PI_F)};function li(t){S||(this._$ib=t)}li._$fr=-1,li.prototype.toString=function(){return this._$ib};function Mt(){S||(ct.prototype.constructor.call(this),this._$LP=-1,this._$d0=0,this._$Yo=0,this._$JP=null,this._$5P=null,this._$BP=null,this._$Eo=null,this._$Qi=null,this._$6s=Mt._$ms,this.culling=!0,this.gl_cacheImage=null,this.instanceNo=Mt._$42++)}Mt.prototype=new ct,Mt._$42=0,Mt._$Os=30,Mt._$ms=0,Mt._$ns=1,Mt._$_s=2,Mt._$gT=new Array,Mt.prototype._$_S=function(t){this._$LP=t},Mt.prototype.getTextureNo=function(){return this._$LP},Mt.prototype._$ZL=function(){return this._$Qi},Mt.prototype._$H2=function(){return this._$JP},Mt.prototype.getNumPoints=function(){return this._$d0},Mt.prototype.getType=function(){return ct._$wb},Mt.prototype._$B2=function(t,i,e){var r=i,n=r._$hr!=null?r._$hr:r._$Cr;switch(tt._$do){default:case tt._$Ms:throw new Error("_$L _$ro ");case tt._$Qs:for(var o=this._$d0-1;o>=0;--o)n[o*tt._$No+4]=e}},Mt.prototype._$zP=function(){this._$GS=new w,this._$GS._$zP()},Mt.prototype._$F0=function(t){ct.prototype._$F0.call(this,t),this._$LP=t._$6L(),this._$d0=t._$6L(),this._$Yo=t._$6L();var i=t._$nP();this._$BP=new Int16Array(3*this._$Yo);for(var e=3*this._$Yo-1;e>=0;--e)this._$BP[e]=i[e];if(this._$Eo=t._$nP(),this._$Qi=t._$nP(),t.getFormatVersion()>=st._$s7){if(this._$JP=t._$6L(),this._$JP!=0){if(1&this._$JP){var r=t._$6L();this._$5P==null&&(this._$5P=new Object),this._$5P._$Hb=parseInt(r)}this._$JP&Mt._$Os?this._$6s=(this._$JP&Mt._$Os)>>1:this._$6s=Mt._$ms,32&this._$JP&&(this.culling=!1)}}else this._$JP=0},Mt.prototype.init=function(t){var i=new Ri(this),e=this._$d0*tt._$No,r=this._$32();switch(i._$Cr!=null&&(i._$Cr=null),i._$Cr=new Float32Array(e),i._$hr!=null&&(i._$hr=null),i._$hr=r?new Float32Array(e):null,tt._$do){default:case tt._$Ms:if(tt._$Ls)for(var n=this._$d0-1;n>=0;--n){var o=n<<1;this._$Qi[o+1]=1-this._$Qi[o+1]}break;case tt._$Qs:for(n=this._$d0-1;n>=0;--n){o=n<<1;var h=n*tt._$No,_=this._$Qi[o],a=this._$Qi[o+1];i._$Cr[h]=_,i._$Cr[h+1]=a,i._$Cr[h+4]=0,r&&(i._$hr[h]=_,i._$hr[h+1]=a,i._$hr[h+4]=0)}}return i},Mt.prototype._$Nr=function(t,i){var e=i;if(this!=e._$GT()&&console.log("### assert!! ### "),this._$GS._$Ur(t)&&(ct.prototype._$Nr.call(this,t,e),!e._$IS[0])){var r=Mt._$gT;r[0]=!1,Y._$Vr(t,this._$GS,r,this._$d0,this._$Eo,e._$Cr,tt._$i2,tt._$No)}},Mt.prototype._$2b=function(t,i){try{this!=i._$GT()&&console.log("### assert!! ### ");var e=!1;i._$IS[0]&&(e=!0);var r=i;if(!e&&(ct.prototype._$2b.call(this,t),this._$32())){var n=this.getTargetBaseDataID();if(r._$8r==ct._$ur&&(r._$8r=t.getBaseDataIndex(n)),r._$8r<0)T._$so&&d._$li("_$L _$0P _$G :: %s",n);else{var o=t.getBaseData(r._$8r),h=t._$q2(r._$8r);o==null||h._$x2()?r._$AT=!1:(o._$nb(t,h,r._$Cr,r._$hr,this._$d0,tt._$i2,tt._$No),r._$AT=!0),r.baseOpacity=h.getTotalOpacity()}}}catch(_){throw _}},Mt.prototype.draw=function(t,i,e){if(this!=e._$GT()&&console.log("### assert!! ### "),!e._$IS[0]){var r=e,n=this._$LP;n<0&&(n=1);var o=this.getOpacity(i,r)*e._$VS*e.baseOpacity,h=r._$hr!=null?r._$hr:r._$Cr;t.setClipBufPre_clipContextForDraw(e.clipBufPre_clipContext),t._$WP(this.culling),t._$Uo(n,3*this._$Yo,this._$BP,h,this._$Qi,o,this._$6s,r)}},Mt.prototype.dump=function(){console.log(`  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) 
`,this._$LP,this._$d0,this._$Yo),console.log("  _$Oi _$di = { ");for(var t=0;t<this._$BP.length;t++)console.log("%5d ,",this._$BP[t]);for(console.log(`
  _$5i _$30`),t=0;t<this._$Eo.length;t++){console.log(`
    _$30[%d] = `,t);for(var i=this._$Eo[t],e=0;e<i.length;e++)console.log("%6.2f, ",i[e])}console.log(`
`)},Mt.prototype._$72=function(t){return this._$5P==null?null:this._$5P[t]},Mt.prototype.getIndexArray=function(){return this._$BP};function Ri(t){Ai.prototype.constructor.call(this,t),this._$8r=ct._$ur,this._$Cr=null,this._$hr=null}Ri.prototype=new Ai,Ri.prototype.getTransformedPoints=function(){return this._$hr!=null?this._$hr:this._$Cr};function Ni(){S||(this.x=null,this.y=null)}Ni.prototype._$HT=function(t){this.x=t.x,this.y=t.y},Ni.prototype._$HT=function(t,i){this.x=t,this.y=i};function Gt(t){S||(y.prototype.constructor.call(this),this.drawParamWebGL=new Vt(t),this.drawParamWebGL.setGL(T.getGL(t)))}Gt.prototype=new y,Gt.loadModel=function(t){var i=new Gt;return y._$62(i,t),i},Gt.loadModel=function(t,i){var e=new Gt(i||0);return y._$62(e,t),e},Gt._$to=function(){return new Gt},Gt._$er=function(t){var i=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(i.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+i._$PL());for(var e=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],r=Gt.loadModel(i._$3b()),n=0;n<e.length;n++){var o=new _$5(e[n]);if(o.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+o._$PL());r.setTexture(n,_$nL._$_o(t,o._$3b()))}return r},Gt.prototype.setGL=function(t){T.setGL(t)},Gt.prototype.setTransform=function(t){this.drawParamWebGL.setTransform(t)},Gt.prototype.update=function(){this._$5S.update(),this._$5S.preDraw(this.drawParamWebGL)},Gt.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL)},Gt.prototype._$K2=function(){this.drawParamWebGL._$K2()},Gt.prototype.setTexture=function(t,i){this.drawParamWebGL==null&&d._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(t,i)},Gt.prototype.setTexture=function(t,i){this.drawParamWebGL==null&&d._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(t,i)},Gt.prototype._$Rs=function(){return this.drawParamWebGL._$Rs()},Gt.prototype._$Ds=function(t){this.drawParamWebGL._$Ds(t)},Gt.prototype.getDrawParam=function(){return this.drawParamWebGL},Gt.prototype.setMatrix=function(t){this.drawParamWebGL.setMatrix(t)},Gt.prototype.setPremultipliedAlpha=function(t){this.drawParamWebGL.setPremultipliedAlpha(t)},Gt.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha()},Gt.prototype.setAnisotropy=function(t){this.drawParamWebGL.setAnisotropy(t)},Gt.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy()};function Ti(){S||(this.motions=null,this._$eb=!1,this.motions=new Array)}Ti.prototype._$tb=function(){return this.motions},Ti.prototype.startMotion=function(t,i){for(var e=null,r=this.motions.length,n=0;n<r;++n)(e=this.motions[n])!=null&&(e._$qS(e._$w0.getFadeOut()),this._$eb&&d._$Ji(`MotionQueueManager[size:%2d]->startMotion() / start _$K _$3 (m%d)
`,r,e._$sr));if(t==null)return-1;(e=new Ei)._$w0=t,this.motions.push(e);var o=e._$sr;return this._$eb&&d._$Ji(`MotionQueueManager[size:%2d]->startMotion() / new _$w0 (m%d)
`,r,o),o},Ti.prototype.updateParam=function(t){try{for(var i=!1,e=0;e<this.motions.length;e++){var r=this.motions[e];if(r!=null){var n=r._$w0;n!=null?(n.updateParam(t,r),i=!0,r.isFinished()&&(this._$eb&&d._$Ji(`MotionQueueManager[size:%2d]->updateParam() / _$T0 _$w0 (m%d)
`,this.motions.length-1,r._$sr),this.motions.splice(e,1),e--)):(this.motions=this.motions.splice(e,1),e--)}else this.motions.splice(e,1),e--}return i}catch(o){return d._$li(o),!0}},Ti.prototype.isFinished=function(t){if(arguments.length>=1){for(var i=0;i<this.motions.length;i++)if((e=this.motions[i])!=null&&e._$sr==t&&!e.isFinished())return!1;return!0}for(i=0;i<this.motions.length;i++){var e;if((e=this.motions[i])!=null)if(e._$w0!=null){if(!e.isFinished())return!1}else this.motions.splice(i,1),i--;else this.motions.splice(i,1),i--}return!0},Ti.prototype.stopAllMotions=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];i!=null?(i._$w0,this.motions.splice(t,1),t--):(this.motions.splice(t,1),t--)}},Ti.prototype._$Zr=function(t){this._$eb=t},Ti.prototype._$e=function(){console.log(`-- _$R --
`);for(var t=0;t<this.motions.length;t++){var i=this.motions[t]._$w0;console.log(`MotionQueueEnt[%d] :: %s
`,this.motions.length,i.toString())}};function Ei(){this._$w0=null,this._$AT=!0,this._$9L=!1,this._$z2=-1,this._$bs=-1,this._$Do=-1,this._$sr=null,this._$sr=Ei._$Gs++}Ei._$Gs=0,Ei.prototype.isFinished=function(){return this._$9L},Ei.prototype._$qS=function(t){var i=H.getUserTimeMSec()+t;(this._$Do<0||i<this._$Do)&&(this._$Do=i)},Ei.prototype._$Bs=function(){return this._$sr};function ri(){this.m=new Array(1,0,0,0,1,0,0,0,1)}ri.prototype.setContext=function(t){var i=this.m;t.transform(i[0],i[1],i[3],i[4],i[6],i[7])},ri.prototype.toString=function(){for(var t="LDTransform { ",i=0;i<9;i++)t+=this.m[i].toFixed(2)+" ,";return t+=" }"},ri.prototype.identity=function(){var t=this.m;t[0]=t[4]=t[8]=1,t[1]=t[2]=t[3]=t[5]=t[6]=t[7]=0},ri.prototype._$PS=function(t,i,e){e==null&&(e=new Array(0,0));var r=this.m;return e[0]=r[0]*t+r[3]*i+r[6],e[1]=r[1]*t+r[4]*i+r[7],e},ri.prototype._$P2=function(t){t||(t=new ri);var i=this.m,e=i[0],r=i[1],n=i[2],o=i[3],h=i[4],_=i[5],a=i[6],s=i[7],u=i[8],p=e*h*u+r*_*a+n*o*s-e*_*s-n*h*a-r*o*u;if(p==0)return null;var $=1/p;return t.m[0]=$*(h*u-s*_),t.m[1]=$*(s*n-r*u),t.m[2]=$*(r*_-h*n),t.m[3]=$*(a*_-o*u),t.m[4]=$*(e*u-a*n),t.m[5]=$*(o*n-e*_),t.m[6]=$*(o*s-a*h),t.m[7]=$*(a*r-e*s),t.m[8]=$*(e*h-o*r),t},ri.prototype.transform=function(t,i,e){e==null&&(e=new Array(0,0));var r=this.m;return e[0]=r[0]*t+r[3]*i+r[6],e[1]=r[1]*t+r[4]*i+r[7],e},ri.prototype.translate=function(t,i){var e=this.m;e[6]=e[0]*t+e[3]*i+e[6],e[7]=e[1]*t+e[4]*i+e[7],e[8]=e[2]*t+e[5]*i+e[8]},ri.prototype.scale=function(t,i){var e=this.m;e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=i,e[4]*=i,e[5]*=i},ri.prototype.shear=function(t,i){var e=this.m,r=e[0]+e[3]*i,n=e[1]+e[4]*i,o=e[2]+e[5]*i;e[3]=e[0]*t+e[3],e[4]=e[1]*t+e[4],e[5]=e[2]*t+e[5],e[0]=r,e[1]=n,e[2]=o},ri.prototype.rotate=function(t){var i=this.m,e=Math.cos(t),r=Math.sin(t),n=i[0]*e+i[3]*r,o=i[1]*e+i[4]*r,h=i[2]*e+i[5]*r;i[3]=-i[0]*r+i[3]*e,i[4]=-i[1]*r+i[4]*e,i[5]=-i[2]*r+i[5]*e,i[0]=n,i[1]=o,i[2]=h},ri.prototype.concatenate=function(t){var i=this.m,e=t.m,r=i[0]*e[0]+i[3]*e[1]+i[6]*e[2],n=i[1]*e[0]+i[4]*e[1]+i[7]*e[2],o=i[2]*e[0]+i[5]*e[1]+i[8]*e[2],h=i[0]*e[3]+i[3]*e[4]+i[6]*e[5],_=i[1]*e[3]+i[4]*e[4]+i[7]*e[5],a=i[2]*e[3]+i[5]*e[4]+i[8]*e[5],s=i[0]*e[6]+i[3]*e[7]+i[6]*e[8],u=i[1]*e[6]+i[4]*e[7]+i[7]*e[8],p=i[2]*e[6]+i[5]*e[7]+i[8]*e[8];m[0]=r,m[1]=n,m[2]=o,m[3]=h,m[4]=_,m[5]=a,m[6]=s,m[7]=u,m[8]=p};function Xt(t){S||si.prototype.constructor.call(this,t)}Xt.prototype=new si,Xt._$eT=null,Xt._$tP=new Object,Xt._$2o=function(){return Xt._$eT==null&&(Xt._$eT=Xt.getID("DST_BASE")),Xt._$eT},Xt._$27=function(){Xt._$tP.clear(),Xt._$eT=null},Xt.getID=function(t){var i=Xt._$tP[t];return i==null&&(i=new Xt(t),Xt._$tP[t]=i),i},Xt.prototype._$3s=function(){return new Xt};function Vt(t){S||(q.prototype.constructor.call(this),this.textures=new Array,this.transform=null,this.gl=null,this.glno=t,this.firstDraw=!0,this.anisotropyExt=null,this.maxAnisotropy=0,this._$As=32,this._$Gr=!1,this._$NT=null,this._$vS=null,this._$no=null,this.vertShader=null,this.fragShader=null,this.vertShaderOff=null,this.fragShaderOff=null)}Vt.prototype=new q,Vt._$9r=function(t){return new Float32Array(t)},Vt._$vb=function(t){return new Int16Array(t)},Vt._$cr=function(t,i){return t==null||t._$yL()<i.length?((t=Vt._$9r(2*i.length)).put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},Vt._$mb=function(t,i){return t==null||t._$yL()<i.length?((t=Vt._$vb(2*i.length)).put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},Vt._$Hs=function(){return this._$Gr},Vt._$as=function(t){this._$Gr=t},Vt.prototype.getGL=function(){return this.gl},Vt.prototype.setGL=function(t){this.gl=t},Vt.prototype.setTransform=function(t){this.transform=t},Vt.prototype._$ZT=function(){var t=this.gl;this.firstDraw&&(this.initShader(),this.firstDraw=!1,this.anisotropyExt=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic"),this.anisotropyExt&&(this.maxAnisotropy=t.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.DEPTH_TEST),t.frontFace(t.CW),t.enable(t.BLEND),t.colorMask(1,1,1,1),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)},Vt.prototype._$Uo=function(t,i,e,r,n,o,h,_){if(!(o<.01&&this.clipBufPre_clipContextMask==null)){o>.9&&T.EXPAND_W;var a=this.gl;if(this.gl==null)throw new Error("gl is null");var s=1*this._$C0*o,u=1*this._$tT*o,p=1*this._$WL*o,$=this._$lT*o;if(this.clipBufPre_clipContextMask!=null){a.frontFace(a.CCW),a.useProgram(this.shaderProgram),this._$vS=Mi(a,this._$vS,r),this._$no=Bi(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc),a.vertexAttribPointer(this.a_position_Loc,2,a.FLOAT,!1,0,0),this._$NT=Mi(a,this._$NT,n),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc,1),a.enableVertexAttribArray(this.a_texCoord_Loc),a.vertexAttribPointer(this.a_texCoord_Loc,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_matrix_Loc,!1,this.getClipBufPre_clipContextMask().matrixForMask);var c=this.getClipBufPre_clipContextMask().layoutChannelNo,l=this.getChannelFlagAsColor(c);a.uniform4f(this.u_channelFlag,l.r,l.g,l.b,l.a);var I=this.getClipBufPre_clipContextMask().layoutBounds;a.uniform4f(this.u_baseColor_Loc,2*I.x-1,2*I.y-1,2*I._$EL()-1,2*I._$5T()-1),a.uniform1i(this.u_maskFlag_Loc,!0)}else this.getClipBufPre_clipContextDraw()!=null?(a.useProgram(this.shaderProgramOff),this._$vS=Mi(a,this._$vS,r),this._$no=Bi(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc_Off),a.vertexAttribPointer(this.a_position_Loc_Off,2,a.FLOAT,!1,0,0),this._$NT=Mi(a,this._$NT,n),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc_Off,1),a.enableVertexAttribArray(this.a_texCoord_Loc_Off),a.vertexAttribPointer(this.a_texCoord_Loc_Off,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,!1,this.getClipBufPre_clipContextDraw().matrixForDraw),a.uniformMatrix4fv(this.u_matrix_Loc_Off,!1,this.matrix4x4),a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,T.fTexture[this.glno]),a.uniform1i(this.s_texture1_Loc_Off,2),c=this.getClipBufPre_clipContextDraw().layoutChannelNo,l=this.getChannelFlagAsColor(c),a.uniform4f(this.u_channelFlag_Loc_Off,l.r,l.g,l.b,l.a),a.uniform4f(this.u_baseColor_Loc_Off,s,u,p,$)):(a.useProgram(this.shaderProgram),this._$vS=Mi(a,this._$vS,r),this._$no=Bi(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc),a.vertexAttribPointer(this.a_position_Loc,2,a.FLOAT,!1,0,0),this._$NT=Mi(a,this._$NT,n),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc,1),a.enableVertexAttribArray(this.a_texCoord_Loc),a.vertexAttribPointer(this.a_texCoord_Loc,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_matrix_Loc,!1,this.matrix4x4),a.uniform4f(this.u_baseColor_Loc,s,u,p,$),a.uniform1i(this.u_maskFlag_Loc,!1));this.culling?this.gl.enable(a.CULL_FACE):this.gl.disable(a.CULL_FACE),this.gl.enable(a.BLEND);var x,G,Z,v;if(this.clipBufPre_clipContextMask!=null)x=a.ONE,G=a.ONE_MINUS_SRC_ALPHA,Z=a.ONE,v=a.ONE_MINUS_SRC_ALPHA;else switch(h){case Mt._$ms:x=a.ONE,G=a.ONE_MINUS_SRC_ALPHA,Z=a.ONE,v=a.ONE_MINUS_SRC_ALPHA;break;case Mt._$ns:x=a.ONE,G=a.ONE,Z=a.ZERO,v=a.ONE;break;case Mt._$_s:x=a.DST_COLOR,G=a.ONE_MINUS_SRC_ALPHA,Z=a.ZERO,v=a.ONE}a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(x,G,Z,v),this.anisotropyExt&&a.texParameteri(a.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);var K=e.length;a.drawElements(a.TRIANGLES,K,a.UNSIGNED_SHORT,0),a.bindTexture(a.TEXTURE_2D,null)}};function Mi(t,i,e){return i==null&&(i=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),i}function Bi(t,i,e){return i==null&&(i=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.DYNAMIC_DRAW),i}Vt.prototype._$Rs=function(){throw new Error("_$Rs")},Vt.prototype._$Ds=function(t){throw new Error("_$Ds")},Vt.prototype._$K2=function(){for(var t=0;t<this.textures.length;t++)this.textures[t]!=0&&(this.gl._$K2(1,this.textures,t),this.textures[t]=null)},Vt.prototype.setTexture=function(t,i){this.textures[t]=i},Vt.prototype.initShader=function(){var t=this.gl;this.loadShaders2(),this.a_position_Loc=t.getAttribLocation(this.shaderProgram,"a_position"),this.a_texCoord_Loc=t.getAttribLocation(this.shaderProgram,"a_texCoord"),this.u_matrix_Loc=t.getUniformLocation(this.shaderProgram,"u_mvpMatrix"),this.s_texture0_Loc=t.getUniformLocation(this.shaderProgram,"s_texture0"),this.u_channelFlag=t.getUniformLocation(this.shaderProgram,"u_channelFlag"),this.u_baseColor_Loc=t.getUniformLocation(this.shaderProgram,"u_baseColor"),this.u_maskFlag_Loc=t.getUniformLocation(this.shaderProgram,"u_maskFlag"),this.a_position_Loc_Off=t.getAttribLocation(this.shaderProgramOff,"a_position"),this.a_texCoord_Loc_Off=t.getAttribLocation(this.shaderProgramOff,"a_texCoord"),this.u_matrix_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_mvpMatrix"),this.u_clipMatrix_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_ClipMatrix"),this.s_texture0_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"s_texture0"),this.s_texture1_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"s_texture1"),this.u_channelFlag_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_channelFlag"),this.u_baseColor_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_baseColor")},Vt.prototype.disposeShader=function(){var t=this.gl;this.shaderProgram&&(t.deleteProgram(this.shaderProgram),this.shaderProgram=null),this.shaderProgramOff&&(t.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=null)},Vt.prototype.compileShader=function(t,i){var e=this.gl,r=i,n=e.createShader(t);if(n==null)return d._$Ji("_$L0 to create shader"),null;if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(n);return d._$Ji("_$L0 to compile shader : "+o),e.deleteShader(n),null}return n},Vt.prototype.loadShaders2=function(){var t=this.gl;if(this.shaderProgram=t.createProgram(),!this.shaderProgram||(this.shaderProgramOff=t.createProgram(),!this.shaderProgramOff))return!1;if(this.vertShader=this.compileShader(t.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_mvpMatrix * a_position;    v_texCoord = a_texCoord;}"),!this.vertShader)return d._$Ji("Vertex shader compile _$li!"),!1;if(this.vertShaderOff=this.compileShader(t.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_ClipMatrix * a_position;    v_texCoord = a_texCoord ;}"),!this.vertShaderOff)return d._$Ji("OffVertex shader compile _$li!"),!1;if(this.fragShader=this.compileShader(t.FRAGMENT_SHADER,"precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside =             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor = smpColor;}"),!this.fragShader)return d._$Ji("Fragment shader compile _$li!"),!1;if(this.fragShaderOff=this.compileShader(t.FRAGMENT_SHADER,"precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask = col_formask * maskVal;    gl_FragColor = col_formask;}"),!this.fragShaderOff)return d._$Ji("OffFragment shader compile _$li!"),!1;if(t.attachShader(this.shaderProgram,this.vertShader),t.attachShader(this.shaderProgram,this.fragShader),t.attachShader(this.shaderProgramOff,this.vertShaderOff),t.attachShader(this.shaderProgramOff,this.fragShaderOff),t.linkProgram(this.shaderProgram),t.linkProgram(this.shaderProgramOff),!t.getProgramParameter(this.shaderProgram,t.LINK_STATUS)){var i=t.getProgramInfoLog(this.shaderProgram);return d._$Ji("_$L0 to link program: "+i),this.vertShader&&(t.deleteShader(this.vertShader),this.vertShader=0),this.fragShader&&(t.deleteShader(this.fragShader),this.fragShader=0),this.shaderProgram&&(t.deleteProgram(this.shaderProgram),this.shaderProgram=0),this.vertShaderOff&&(t.deleteShader(this.vertShaderOff),this.vertShaderOff=0),this.fragShaderOff&&(t.deleteShader(this.fragShaderOff),this.fragShaderOff=0),this.shaderProgramOff&&(t.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=0),!1}return!0},Vt.prototype.createFramebuffer=function(){var t=this.gl,i=T.clippingMaskBufferSize,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r),t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,r);var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,i,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),T.fTexture[this.glno]=n,{framebuffer:e,renderbuffer:r,texture:T.fTexture[this.glno]}};function qt(t){S||(this._$P=new Int8Array(8),this._$R0=new DataView(this._$P.buffer),this._$3i=new Int8Array(1e3),this._$hL=0,this._$v0=0,this._$S2=0,this._$Ko=new Array,this._$T=t,this._$F=0)}qt.prototype._$fP=function(){var t,i,e,r=this._$ST();if(!(128&r))return 255&r;if(!(128&(t=this._$ST())))return(127&r)<<7|127&t;if(!(128&(i=this._$ST())))return(127&r)<<14|(127&t)<<7|255&i;if(!(128&(e=this._$ST())))return(127&r)<<21|(127&t)<<14|(127&i)<<7|255&e;throw new li("_$L _$0P  _")},qt.prototype.getFormatVersion=function(){return this._$S2},qt.prototype._$gr=function(t){this._$S2=t},qt.prototype._$3L=function(){return this._$fP()},qt.prototype._$mP=function(){return this._$zT(),this._$F+=8,this._$T.getFloat64(this._$F-8)},qt.prototype._$_T=function(){return this._$zT(),this._$F+=4,this._$T.getFloat32(this._$F-4)},qt.prototype._$6L=function(){return this._$zT(),this._$F+=4,this._$T.getInt32(this._$F-4)},qt.prototype._$ST=function(){return this._$zT(),this._$T.getInt8(this._$F++)},qt.prototype._$9T=function(){return this._$zT(),this._$F+=2,this._$T.getInt16(this._$F-2)},qt.prototype._$2T=function(){throw this._$zT(),this._$F+=8,new li("_$L _$q read long")},qt.prototype._$po=function(){return this._$zT(),this._$T.getInt8(this._$F++)!=0};var Gi=!0;qt.prototype._$bT=function(){this._$zT();var t=this._$3L(),i=null;if(Gi)try{var e=new ArrayBuffer(2*t);i=new Uint16Array(e);for(var r=0;r<t;++r)i[r]=this._$T.getUint8(this._$F++);return String.fromCharCode.apply(null,i)}catch{Gi=!1}try{var n=new Array;if(i==null)for(r=0;r<t;++r)n[r]=this._$T.getUint8(this._$F++);else for(r=0;r<t;++r)n[r]=i[r];return String.fromCharCode.apply(null,n)}catch(o){console.log("read utf8 / _$rT _$L0 !! : "+o)}},qt.prototype._$cS=function(){this._$zT();for(var t=this._$3L(),i=new Int32Array(t),e=0;e<t;e++)i[e]=this._$T.getInt32(this._$F),this._$F+=4;return i},qt.prototype._$Tb=function(){this._$zT();for(var t=this._$3L(),i=new Float32Array(t),e=0;e<t;e++)i[e]=this._$T.getFloat32(this._$F),this._$F+=4;return i},qt.prototype._$5b=function(){this._$zT();for(var t=this._$3L(),i=new Float64Array(t),e=0;e<t;e++)i[e]=this._$T.getFloat64(this._$F),this._$F+=8;return i},qt.prototype._$nP=function(){return this._$Jb(-1)},qt.prototype._$Jb=function(t){if(this._$zT(),t<0&&(t=this._$3L()),t==st._$7P){var i=this._$6L();if(0<=i&&i<this._$Ko.length)return this._$Ko[i];throw new li("_$sL _$4i @_$m0")}var e=this._$4b(t);return this._$Ko.push(e),e},qt.prototype._$4b=function(t){if(t==0)return null;if(t==50){var i=this._$bT();return n=z.getID(i)}if(t==51)return i=this._$bT(),n=Xt.getID(i);if(t==134)return i=this._$bT(),n=O.getID(i);if(t==60)return i=this._$bT(),n=P.getID(i);if(t>=48){var e=st._$9o(t);return e!=null?(e._$F0(this),e):null}switch(t){case 1:return this._$bT();case 10:return new function(){S||(this.color=null)}(this._$6L(),!0);case 11:return new L(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new L(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new X(this._$mP(),this._$mP());case 14:return new X(this._$_T(),this._$_T());case 15:for(var r=this._$3L(),n=new Array(r),o=0;o<r;o++)n[o]=this._$nP();return n;case 17:return n=new U(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());case 21:return new E(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new Ni(this._$6L(),this._$6L());case 23:throw new Error("_$L _$ro ");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new li("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+t);default:throw new li("_$6 _$q : _$nP() NO _$i : "+t)}},qt.prototype._$8L=function(){return this._$hL==0?this._$v0=this._$ST():this._$hL==8&&(this._$v0=this._$ST(),this._$hL=0),(this._$v0>>7-this._$hL++&1)==1},qt.prototype._$zT=function(){this._$hL!=0&&(this._$hL=0)};function zt(){}zt._$2S=Math.PI/180,zt._$bS=Math.PI/180,zt._$wS=180/Math.PI,zt._$NS=180/Math.PI,zt.PI_F=Math.PI,zt._$kT=[0,.012368,.024734,.037097,.049454,.061803,.074143,.086471,.098786,.111087,.12337,.135634,.147877,.160098,.172295,.184465,.196606,.208718,.220798,.232844,.244854,.256827,.268761,.280654,.292503,.304308,.316066,.327776,.339436,.351044,.362598,.374097,.385538,.396921,.408243,.419502,.430697,.441826,.452888,.463881,.474802,.485651,.496425,.507124,.517745,.528287,.538748,.549126,.559421,.56963,.579752,.589785,.599728,.609579,.619337,.629,.638567,.648036,.657406,.666676,.675843,.684908,.693867,.70272,.711466,.720103,.72863,.737045,.745348,.753536,.76161,.769566,.777405,.785125,.792725,.800204,.807561,.814793,.821901,.828884,.835739,.842467,.849066,.855535,.861873,.868079,.874153,.880093,.885898,.891567,.897101,.902497,.907754,.912873,.917853,.922692,.92739,.931946,.936359,.940629,.944755,.948737,.952574,.956265,.959809,.963207,.966457,.96956,.972514,.97532,.977976,.980482,.982839,.985045,.987101,.989006,.990759,.992361,.993811,.995109,.996254,.997248,.998088,.998776,.999312,.999694,.999924,1],zt._$92=function(t,i){var e=Math.atan2(t[1],t[0]),r=Math.atan2(i[1],i[0]);return zt._$tS(e,r)},zt._$tS=function(t,i){for(var e=t-i;e<-Math.PI;)e+=2*Math.PI;for(;e>Math.PI;)e-=2*Math.PI;return e},zt._$9=function(t){return Math.sin(t)},zt.fcos=function(t){return Math.cos(t)};function Ai(t){S||(this._$e0=null,this._$IP=null,this._$Us=null,this._$7s=null,this._$IS=[!1],this._$VS=null,this._$AT=!0,this.baseOpacity=1,this.clipBufPre_clipContext=null,this._$e0=t)}Ai.prototype._$u2=function(){return this._$IS[0]},Ai.prototype._$yo=function(){return this._$AT&&!this._$IS[0]},Ai.prototype._$GT=function(){return this._$e0};function Ot(){}Ot._$W2=0,Ot.SYSTEM_INFO=null,Ot.USER_AGENT=navigator.userAgent,Ot.isIPhone=function(){return Ot.SYSTEM_INFO||Ot.setup(),Ot.SYSTEM_INFO._isIPhone},Ot.isIOS=function(){return Ot.SYSTEM_INFO||Ot.setup(),Ot.SYSTEM_INFO._isIPhone||Ot.SYSTEM_INFO._isIPad},Ot.isAndroid=function(){return Ot.SYSTEM_INFO||Ot.setup(),Ot.SYSTEM_INFO._isAndroid},Ot.getOSVersion=function(){return Ot.SYSTEM_INFO||Ot.setup(),Ot.SYSTEM_INFO.version},Ot.getOS=function(){return Ot.SYSTEM_INFO||Ot.setup(),Ot.SYSTEM_INFO._isIPhone||Ot.SYSTEM_INFO._isIPad?"iOS":Ot.SYSTEM_INFO._isAndroid?"Android":"_$Q0 OS"},Ot.setup=function(){var t=Ot.USER_AGENT;function i(n,o){for(var h=n.substring(o).split(/[ _,;\.]/),_=0,a=0;a<=2&&!isNaN(h[a]);a++){var s=parseInt(h[a]);if(s<0||s>999){d._$li("err : "+s+" @UtHtml5.setup()"),_=0;break}_+=s*Math.pow(1e3,2-a)}return _}var e,r=Ot.SYSTEM_INFO={userAgent:t};if((e=t.indexOf("iPhone OS "))>=0)r.os="iPhone",r._isIPhone=!0,r.version=i(t,e+10);else if((e=t.indexOf("iPad"))>=0){if((e=t.indexOf("CPU OS"))<0)return void d._$li(" err : "+t+" @UtHtml5.setup()");r.os="iPad",r._isIPad=!0,r.version=i(t,e+7)}else(e=t.indexOf("Android"))>=0?(r.os="Android",r._isAndroid=!0,r.version=i(t,e+8)):(r.os="-",r.version=-1)},T.init(),S=!1,F.UtSystem=H,F.UtDebug=d,F.LDTransform=ri,F.LDGL=Dt,F.Live2D=T,F.Live2DModelWebGL=Gt,F.Live2DModelJS=jt,F.Live2DMotion=Ct,F.MotionQueueManager=Ti,F.PhysicsHair=rt,F.AMotion=b,F.PartsDataID=O,F.DrawDataID=z,F.BaseDataID=Xt,F.ParamID=P}).call(F,vt(83))},78:function(ai,F,vt){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.L2DBaseModel=F.L2DExpressionMotion=F.L2DExpressionParam=F.L2DEyeBlink=F.EYE_STATE=F.L2DMatrix44=F.L2DModelMatrix=F.L2DMotionManager=F.L2DPhysics=F.L2DPartsParam=F.L2DPose=F.L2DViewMatrix=F.Live2DFramework=F.L2DTargetPoint=void 0;var B=vt(77);function S(){this.live2DModel=null,this.modelMatrix=null,this.eyeBlink=null,this.physics=null,this.pose=null,this.debugMode=!1,this.initialized=!1,this.updating=!1,this.alpha=1,this.accAlpha=0,this.lipSync=!1,this.lipSyncValue=0,this.accelX=0,this.accelY=0,this.accelZ=0,this.dragX=0,this.dragY=0,this.startTimeMSec=null,this.mainMotionManager=new P,this.expressionManager=new P,this.motions={},this.expressions={},this.isTexLoaded=!1}var y=0;S.prototype.getModelMatrix=function(){return this.modelMatrix},S.prototype.setAlpha=function(f){f>.999&&(f=1),f<.001&&(f=0),this.alpha=f},S.prototype.getAlpha=function(){return this.alpha},S.prototype.isInitialized=function(){return this.initialized},S.prototype.setInitialized=function(f){this.initialized=f},S.prototype.isUpdating=function(){return this.updating},S.prototype.setUpdating=function(f){this.updating=f},S.prototype.getLive2DModel=function(){return this.live2DModel},S.prototype.setLipSync=function(f){this.lipSync=f},S.prototype.setLipSyncValue=function(f){this.lipSyncValue=f},S.prototype.setAccel=function(f,g,A){this.accelX=f,this.accelY=g,this.accelZ=A},S.prototype.setDrag=function(f,g){this.dragX=f,this.dragY=g},S.prototype.getMainMotionManager=function(){return this.mainMotionManager},S.prototype.getExpressionManager=function(){return this.expressionManager},S.prototype.loadModelData=function(f,g){var A=Ft.getPlatformManager();this.debugMode&&A.log("Load model : "+f);var L=this;A.loadLive2DModel(f,function(Y){L.live2DModel=Y,L.live2DModel.saveParam(),B.Live2D.getError()==0?(L.modelMatrix=new O(L.live2DModel.getCanvasWidth(),L.live2DModel.getCanvasHeight()),L.modelMatrix.setWidth(2),L.modelMatrix.setCenterPosition(0,0),g(L.live2DModel)):console.error("Error : Failed to loadModelData().")})},S.prototype.loadTexture=function(f,g,A){y++;var L=Ft.getPlatformManager();this.debugMode&&L.log("Load Texture : "+g);var Y=this;L.loadTexture(this.live2DModel,f,g,function(){--y==0&&(Y.isTexLoaded=!0),typeof A=="function"&&A()})},S.prototype.loadMotion=function(f,g,A){var L=Ft.getPlatformManager();this.debugMode&&L.log("Load Motion : "+g);var Y=null,X=this;L.loadBytes(g,function(C){Y=B.Live2DMotion.loadMotion(C),f!=null&&(X.motions[f]=Y),A(Y)})},S.prototype.loadExpression=function(f,g,A){var L=Ft.getPlatformManager();this.debugMode&&L.log("Load Expression : "+g);var Y=this;L.loadBytes(g,function(X){f!=null&&(Y.expressions[f]=M.loadJson(X)),typeof A=="function"&&A()})},S.prototype.loadPose=function(f,g){var A=Ft.getPlatformManager();this.debugMode&&A.log("Load Pose : "+f);var L=this;try{A.loadBytes(f,function(Y){L.pose=rt.load(Y),typeof g=="function"&&g()})}catch(Y){console.warn(Y)}},S.prototype.loadPhysics=function(f){var g=Ft.getPlatformManager();this.debugMode&&g.log("Load Physics : "+f);var A=this;try{g.loadBytes(f,function(L){A.physics=Pt.load(L)})}catch(L){console.warn(L)}},S.prototype.hitTestSimple=function(f,g,A){if(this.live2DModel===null)return!1;var L=this.live2DModel.getDrawDataIndex(f);if(L<0)return!1;for(var Y=this.live2DModel.getTransformedPoints(L),X=this.live2DModel.getCanvasWidth(),C=0,q=this.live2DModel.getCanvasHeight(),Et=0,J=0;J<Y.length;J+=2){var H=Y[J],yt=Y[J+1];H<X&&(X=H),H>C&&(C=H),yt<q&&(q=yt),yt>Et&&(Et=yt)}var nt=this.modelMatrix.invertTransformX(g),w=this.modelMatrix.invertTransformY(A);return X<=nt&&nt<=C&&q<=w&&w<=Et};function M(){B.AMotion.prototype.constructor.call(this),this.paramList=new Array}M.prototype=new B.AMotion,M.EXPRESSION_DEFAULT="DEFAULT",M.TYPE_SET=0,M.TYPE_ADD=1,M.TYPE_MULT=2,M.loadJson=function(f){var g=new M,A=Ft.getPlatformManager().jsonParseFromBytes(f);if(g.setFadeIn(parseInt(A.fade_in)>0?parseInt(A.fade_in):1e3),g.setFadeOut(parseInt(A.fade_out)>0?parseInt(A.fade_out):1e3),A.params==null)return g;var L=A.params,Y=L.length;g.paramList=[];for(var X=0;X<Y;X++){var C=L[X],q=C.id.toString(),Et=parseFloat(C.val),J=M.TYPE_ADD,H=C.calc!=null?C.calc.toString():"add";if((J=H==="add"?M.TYPE_ADD:H==="mult"?M.TYPE_MULT:H==="set"?M.TYPE_SET:M.TYPE_ADD)==M.TYPE_ADD)Et-=yt=C.def==null?0:parseFloat(C.def);else if(J==M.TYPE_MULT){var yt;(yt=C.def==null?1:parseFloat(C.def))==0&&(yt=1),Et/=yt}var nt=new pt;nt.id=q,nt.type=J,nt.value=Et,g.paramList.push(nt)}return g},M.prototype.updateParamExe=function(f,g,A,L){for(var Y=this.paramList.length-1;Y>=0;--Y){var X=this.paramList[Y];X.type==M.TYPE_ADD?f.addToParamFloat(X.id,X.value,A):X.type==M.TYPE_MULT?f.multParamFloat(X.id,X.value,A):X.type==M.TYPE_SET&&f.setParamFloat(X.id,X.value,A)}};function pt(){this.id="",this.type=-1,this.value=null}function b(){this.nextBlinkTime=null,this.stateStartTime=null,this.blinkIntervalMsec=null,this.eyeState=d.STATE_FIRST,this.blinkIntervalMsec=4e3,this.closingMotionMsec=100,this.closedMotionMsec=50,this.openingMotionMsec=150,this.closeIfZero=!0,this.eyeID_L="PARAM_EYE_L_OPEN",this.eyeID_R="PARAM_EYE_R_OPEN"}b.prototype.calcNextBlink=function(){return B.UtSystem.getUserTimeMSec()+Math.random()*(2*this.blinkIntervalMsec-1)},b.prototype.setInterval=function(f){this.blinkIntervalMsec=f},b.prototype.setEyeMotion=function(f,g,A){this.closingMotionMsec=f,this.closedMotionMsec=g,this.openingMotionMsec=A},b.prototype.updateParam=function(f){var g,A=B.UtSystem.getUserTimeMSec(),L=0;switch(this.eyeState){case d.STATE_CLOSING:(L=(A-this.stateStartTime)/this.closingMotionMsec)>=1&&(L=1,this.eyeState=d.STATE_CLOSED,this.stateStartTime=A),g=1-L;break;case d.STATE_CLOSED:(L=(A-this.stateStartTime)/this.closedMotionMsec)>=1&&(this.eyeState=d.STATE_OPENING,this.stateStartTime=A),g=0;break;case d.STATE_OPENING:(L=(A-this.stateStartTime)/this.openingMotionMsec)>=1&&(L=1,this.eyeState=d.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink()),g=L;break;case d.STATE_INTERVAL:this.nextBlinkTime<A&&(this.eyeState=d.STATE_CLOSING,this.stateStartTime=A),g=1;break;case d.STATE_FIRST:default:this.eyeState=d.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink(),g=1}this.closeIfZero||(g=-g),f.setParamFloat(this.eyeID_L,g),f.setParamFloat(this.eyeID_R,g)};var d=function(){};d.STATE_FIRST="STATE_FIRST",d.STATE_INTERVAL="STATE_INTERVAL",d.STATE_CLOSING="STATE_CLOSING",d.STATE_CLOSED="STATE_CLOSED",d.STATE_OPENING="STATE_OPENING";function E(){this.tr=new Float32Array(16),this.identity()}E.mul=function(f,g,A){var L,Y,X,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(L=0;L<4;L++)for(Y=0;Y<4;Y++)for(X=0;X<4;X++)C[L+4*Y]+=f[L+4*X]*g[X+4*Y];for(L=0;L<16;L++)A[L]=C[L]},E.prototype.identity=function(){for(var f=0;f<16;f++)this.tr[f]=f%5==0?1:0},E.prototype.getArray=function(){return this.tr},E.prototype.getCopyMatrix=function(){return new Float32Array(this.tr)},E.prototype.setMatrix=function(f){if(this.tr!=null&&this.tr.length==this.tr.length)for(var g=0;g<16;g++)this.tr[g]=f[g]},E.prototype.getScaleX=function(){return this.tr[0]},E.prototype.getScaleY=function(){return this.tr[5]},E.prototype.transformX=function(f){return this.tr[0]*f+this.tr[12]},E.prototype.transformY=function(f){return this.tr[5]*f+this.tr[13]},E.prototype.invertTransformX=function(f){return(f-this.tr[12])/this.tr[0]},E.prototype.invertTransformY=function(f){return(f-this.tr[13])/this.tr[5]},E.prototype.multTranslate=function(f,g){var A=[1,0,0,0,0,1,0,0,0,0,1,0,f,g,0,1];E.mul(A,this.tr,this.tr)},E.prototype.translate=function(f,g){this.tr[12]=f,this.tr[13]=g},E.prototype.translateX=function(f){this.tr[12]=f},E.prototype.translateY=function(f){this.tr[13]=f},E.prototype.multScale=function(f,g){var A=[f,0,0,0,0,g,0,0,0,0,1,0,0,0,0,1];E.mul(A,this.tr,this.tr)},E.prototype.scale=function(f,g){this.tr[0]=f,this.tr[5]=g};function O(f,g){E.prototype.constructor.call(this),this.width=f,this.height=g}O.prototype=new E,O.prototype.setPosition=function(f,g){this.translate(f,g)},O.prototype.setCenterPosition=function(f,g){var A=this.width*this.getScaleX(),L=this.height*this.getScaleY();this.translate(f-A/2,g-L/2)},O.prototype.top=function(f){this.setY(f)},O.prototype.bottom=function(f){var g=this.height*this.getScaleY();this.translateY(f-g)},O.prototype.left=function(f){this.setX(f)},O.prototype.right=function(f){var g=this.width*this.getScaleX();this.translateX(f-g)},O.prototype.centerX=function(f){var g=this.width*this.getScaleX();this.translateX(f-g/2)},O.prototype.centerY=function(f){var g=this.height*this.getScaleY();this.translateY(f-g/2)},O.prototype.setX=function(f){this.translateX(f)},O.prototype.setY=function(f){this.translateY(f)},O.prototype.setHeight=function(f){var g=f/this.height,A=-g;this.scale(g,A)},O.prototype.setWidth=function(f){var g=f/this.width,A=-g;this.scale(g,A)};function P(){B.MotionQueueManager.prototype.constructor.call(this),this.currentPriority=null,this.reservePriority=null,this.super=B.MotionQueueManager.prototype}P.prototype=new B.MotionQueueManager,P.prototype.getCurrentPriority=function(){return this.currentPriority},P.prototype.getReservePriority=function(){return this.reservePriority},P.prototype.reserveMotion=function(f){return!(this.reservePriority>=f)&&!(this.currentPriority>=f)&&(this.reservePriority=f,!0)},P.prototype.setReservePriority=function(f){this.reservePriority=f},P.prototype.updateParam=function(f){var g=B.MotionQueueManager.prototype.updateParam.call(this,f);return this.isFinished()&&(this.currentPriority=0),g},P.prototype.startMotionPrio=function(f,g){return g==this.reservePriority&&(this.reservePriority=0),this.currentPriority=g,this.startMotion(f,!1)};function Pt(){this.physicsList=new Array,this.startTimeMSec=B.UtSystem.getUserTimeMSec()}Pt.load=function(f){for(var g=new Pt,A=Ft.getPlatformManager().jsonParseFromBytes(f).physics_hair,L=A.length,Y=0;Y<L;Y++){var X=A[Y],C=new B.PhysicsHair,q=X.setup,Et=parseFloat(q.length),J=parseFloat(q.regist),H=parseFloat(q.mass);C.setup(Et,J,H);for(var yt=X.src,nt=yt.length,w=0;w<nt;w++){var Q=yt[w],z=Q.id,U=B.PhysicsHair.Src.SRC_TO_X;(Zt=Q.ptype)==="x"?U=B.PhysicsHair.Src.SRC_TO_X:Zt==="y"?U=B.PhysicsHair.Src.SRC_TO_Y:Zt==="angle"?U=B.PhysicsHair.Src.SRC_TO_G_ANGLE:B.UtDebug.error("live2d","Invalid parameter:PhysicsHair.Src");var Lt=parseFloat(Q.scale),tt=parseFloat(Q.weight);C.addSrcParam(U,z,Lt,tt)}var st=X.targets,R=st.length;for(w=0;w<R;w++){var Zt,_i=st[w];z=_i.id,U=B.PhysicsHair.Target.TARGET_FROM_ANGLE,(Zt=_i.ptype)==="angle"?U=B.PhysicsHair.Target.TARGET_FROM_ANGLE:Zt==="angle_v"?U=B.PhysicsHair.Target.TARGET_FROM_ANGLE_V:B.UtDebug.error("live2d","Invalid parameter:PhysicsHair.Target"),Lt=parseFloat(_i.scale),tt=parseFloat(_i.weight),C.addTargetParam(U,z,Lt,tt)}g.physicsList.push(C)}return g},Pt.prototype.updateParam=function(f){for(var g=B.UtSystem.getUserTimeMSec()-this.startTimeMSec,A=0;A<this.physicsList.length;A++)this.physicsList[A].update(f,g)};function rt(){this.lastTime=0,this.lastModel=null,this.partsGroups=new Array}rt.load=function(f){for(var g=new rt,A=Ft.getPlatformManager().jsonParseFromBytes(f).parts_visible,L=A.length,Y=0;Y<L;Y++){for(var X=A[Y].group,C=X.length,q=new Array,Et=0;Et<C;Et++){var J=X[Et],H=new Yt(J.id);if(q[Et]=H,J.link!=null){var yt=J.link,nt=yt.length;H.link=new Array;for(var w=0;w<nt;w++){var Q=new Yt(yt[w]);H.link.push(Q)}}}g.partsGroups.push(q)}return g},rt.prototype.updateParam=function(f){if(f!=null){f!=this.lastModel&&this.initParam(f),this.lastModel=f;var g=B.UtSystem.getUserTimeMSec(),A=this.lastTime==0?0:(g-this.lastTime)/1e3;this.lastTime=g,A<0&&(A=0);for(var L=0;L<this.partsGroups.length;L++)this.normalizePartsOpacityGroup(f,this.partsGroups[L],A),this.copyOpacityOtherParts(f,this.partsGroups[L])}},rt.prototype.initParam=function(f){if(f!=null)for(var g=0;g<this.partsGroups.length;g++)for(var A=this.partsGroups[g],L=0;L<A.length;L++){A[L].initIndex(f);var Y=A[L].partsIndex,X=A[L].paramIndex;if(!(Y<0)){var C=f.getParamFloat(X)!=0;if(f.setPartsOpacity(Y,C?1:0),f.setParamFloat(X,C?1:0),A[L].link!=null)for(var q=0;q<A[L].link.length;q++)A[L].link[q].initIndex(f)}}},rt.prototype.normalizePartsOpacityGroup=function(f,g,A){for(var L=-1,Y=1,X=0;X<g.length;X++){var C=g[X].partsIndex,q=g[X].paramIndex;if(!(C<0)&&f.getParamFloat(q)!=0){if(L>=0)break;L=X,Y=f.getPartsOpacity(C),(Y+=A/.5)>1&&(Y=1)}}for(L<0&&(L=0,Y=1),X=0;X<g.length;X++)if(!((C=g[X].partsIndex)<0))if(L==X)f.setPartsOpacity(C,Y);else{var Et,J=f.getPartsOpacity(C);(1-(Et=Y<.5?-.5*Y/.5+1:.5*(1-Y)/.5))*(1-Y)>.15&&(Et=1-.15/(1-Y)),J>Et&&(J=Et),f.setPartsOpacity(C,J)}},rt.prototype.copyOpacityOtherParts=function(f,g){for(var A=0;A<g.length;A++){var L=g[A];if(L.link!=null&&!(L.partsIndex<0))for(var Y=f.getPartsOpacity(L.partsIndex),X=0;X<L.link.length;X++){var C=L.link[X];C.partsIndex<0||f.setPartsOpacity(C.partsIndex,Y)}}};function Yt(f){this.paramIndex=-1,this.partsIndex=-1,this.link=null,this.id=f}Yt.prototype.initIndex=function(f){this.paramIndex=f.getParamIndex("VISIBLE:"+this.id),this.partsIndex=f.getPartsDataIndex(B.PartsDataID.getID(this.id)),f.setParamFloat(this.paramIndex,1)};function Qt(){this.EPSILON=.01,this.faceTargetX=0,this.faceTargetY=0,this.faceX=0,this.faceY=0,this.faceVX=0,this.faceVY=0,this.lastTimeSec=0}Qt.FRAME_RATE=60,Qt.prototype.setPoint=function(f,g){this.faceTargetX=f,this.faceTargetY=g},Qt.prototype.getX=function(){return this.faceX},Qt.prototype.getY=function(){return this.faceY},Qt.prototype.update=function(){var f=5.333333333333333/Qt.FRAME_RATE;if(this.lastTimeSec!=0){var g=B.UtSystem.getUserTimeMSec(),A=(g-this.lastTimeSec)*Qt.FRAME_RATE/1e3;this.lastTimeSec=g;var L=A*f/(.15*Qt.FRAME_RATE),Y=this.faceTargetX-this.faceX,X=this.faceTargetY-this.faceY;if(!(Math.abs(Y)<=this.EPSILON&&Math.abs(X)<=this.EPSILON)){var C=Math.sqrt(Y*Y+X*X),q=f*X/C,Et=f*Y/C-this.faceVX,J=q-this.faceVY,H=Math.sqrt(Et*Et+J*J);(H<-L||H>L)&&(Et*=L/H,J*=L/H,H=L),this.faceVX+=Et,this.faceVY+=J;var yt=.5*(Math.sqrt(L*L+16*L*C-8*L*C)-L),nt=Math.sqrt(this.faceVX*this.faceVX+this.faceVY*this.faceVY);nt>yt&&(this.faceVX*=yt/nt,this.faceVY*=yt/nt),this.faceX+=this.faceVX,this.faceY+=this.faceVY}}else this.lastTimeSec=B.UtSystem.getUserTimeMSec()};function mt(){E.prototype.constructor.call(this),this.screenLeft=null,this.screenRight=null,this.screenTop=null,this.screenBottom=null,this.maxLeft=null,this.maxRight=null,this.maxTop=null,this.maxBottom=null}mt.prototype=new E,mt.prototype.adjustTranslate=function(f,g){this.tr[0]*this.maxLeft+(this.tr[12]+f)>this.screenLeft&&(f=this.screenLeft-this.tr[0]*this.maxLeft-this.tr[12]),this.tr[0]*this.maxRight+(this.tr[12]+f)<this.screenRight&&(f=this.screenRight-this.tr[0]*this.maxRight-this.tr[12]),this.tr[5]*this.maxTop+(this.tr[13]+g)<this.screenTop&&(g=this.screenTop-this.tr[5]*this.maxTop-this.tr[13]),this.tr[5]*this.maxBottom+(this.tr[13]+g)>this.screenBottom&&(g=this.screenBottom-this.tr[5]*this.maxBottom-this.tr[13]);var A=[1,0,0,0,0,1,0,0,0,0,1,0,f,g,0,1];E.mul(A,this.tr,this.tr)},mt.prototype.adjustScale=function(f,g,A){this.tr[0];var L=[1,0,0,0,0,1,0,0,0,0,1,0,f,g,0,1],Y=[A,0,0,0,0,A,0,0,0,0,1,0,0,0,0,1],X=[1,0,0,0,0,1,0,0,0,0,1,0,-f,-g,0,1];E.mul(X,this.tr,this.tr),E.mul(Y,this.tr,this.tr),E.mul(L,this.tr,this.tr)},mt.prototype.setScreenRect=function(f,g,A,L){this.screenLeft=f,this.screenRight=g,this.screenTop=L,this.screenBottom=A},mt.prototype.setMaxScreenRect=function(f,g,A,L){this.maxLeft=f,this.maxRight=g,this.maxTop=L,this.maxBottom=A},mt.prototype.getScreenLeft=function(){return this.screenLeft},mt.prototype.getScreenRight=function(){return this.screenRight},mt.prototype.getScreenBottom=function(){return this.screenBottom},mt.prototype.getScreenTop=function(){return this.screenTop},mt.prototype.getMaxLeft=function(){return this.maxLeft},mt.prototype.getMaxRight=function(){return this.maxRight},mt.prototype.getMaxBottom=function(){return this.maxBottom},mt.prototype.getMaxTop=function(){return this.maxTop};function Ft(){}Ft.platformManager=null,Ft.getPlatformManager=function(){return Ft.platformManager},Ft.setPlatformManager=function(f){Ft.platformManager=f},F.L2DTargetPoint=Qt,F.Live2DFramework=Ft,F.L2DViewMatrix=mt,F.L2DPose=rt,F.L2DPartsParam=Yt,F.L2DPhysics=Pt,F.L2DMotionManager=P,F.L2DModelMatrix=O,F.L2DMatrix44=E,F.EYE_STATE=d,F.L2DEyeBlink=b,F.L2DExpressionParam=pt,F.L2DExpressionMotion=M,F.L2DBaseModel=S},79:function(ai,F,vt){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.cDefine={VIEW_LOGICAL_LEFT:-1,VIEW_LOGICAL_RIGHT:1,VIEW_LOGICAL_MAX_LEFT:-2,VIEW_LOGICAL_MAX_RIGHT:2,VIEW_LOGICAL_MAX_BOTTOM:-2,VIEW_LOGICAL_MAX_TOP:2,PRIORITY_NONE:0,PRIORITY_IDLE:1,PRIORITY_NORMAL:2,PRIORITY_FORCE:3,MOTION_GROUP_IDLE:"idle",MOTION_GROUP_TAP_BODY:"tap_body",MOTION_GROUP_FLICK_HEAD:"flick_head",MOTION_GROUP_PINCH_IN:"pinch_in",MOTION_GROUP_PINCH_OUT:"pinch_out",MOTION_GROUP_SHAKE:"shake",HIT_AREA_HEAD:"head",HIT_AREA_BODY:"body"}},80:function(ai,F,vt){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.currCanvas=F.currWebGL=F.createElement=void 0;var B=vt(38),S=vt(37),y=vt(82),M=void 0,pt=void 0;F.createElement=function(){var b=document.getElementById(B.config.name.div);b!==null&&document.body.removeChild(b);var d=document.createElement("div");d.id=B.config.name.div,d.className="live2d-widget-container",d.style.setProperty("position","fixed"),d.style.setProperty(B.config.display.position,B.config.display.hOffset+"px"),d.style.setProperty("bottom",B.config.display.vOffset+"px"),d.style.setProperty("width",B.config.display.width+"px"),d.style.setProperty("height",B.config.display.height+"px"),d.style.setProperty("z-index",99999),d.style.setProperty("opacity",B.config.react.opacity),d.style.setProperty("pointer-events","none"),document.body.appendChild(d),S.L2Dwidget.emit("create-container",d),B.config.dialog.enable&&(0,y.createDialogElement)(d);var E=document.createElement("canvas");E.setAttribute("id",B.config.name.canvas),E.setAttribute("width",B.config.display.width*B.config.display.superSample),E.setAttribute("height",B.config.display.height*B.config.display.superSample),E.style.setProperty("position","absolute"),E.style.setProperty("left","0px"),E.style.setProperty("top","0px"),E.style.setProperty("width",B.config.display.width+"px"),E.style.setProperty("height",B.config.display.height+"px"),B.config.dev.border&&E.style.setProperty("border","dashed 1px #CCC"),d.appendChild(E),F.currCanvas=pt=document.getElementById(B.config.name.canvas),S.L2Dwidget.emit("create-canvas",E),function(){for(var O=["webgl2","webgl","experimental-webgl2","experimental-webgl","webkit-3d","moz-webgl"],P=0;P<O.length;P++)try{var Pt=pt.getContext(O[P],{alpha:!0,antialias:!0,premultipliedAlpha:!0,failIfMajorPerformanceCaveat:!1});Pt&&(F.currWebGL=M=Pt)}catch{}M||(console.error("Live2D widgets: Failed to create WebGL context."),window.WebGLRenderingContext||console.error("Your browser may not support WebGL, check https://get.webgl.org/ for futher information."))}()},F.currWebGL=M,F.currCanvas=pt},81:function(ai,F,vt){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.MatrixStack=B;function B(){}B.matrixStack=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],B.depth=0,B.currentMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],B.tmp=new Array(16),B.reset=function(){this.depth=0},B.loadIdentity=function(){for(var S=0;S<16;S++)this.currentMatrix[S]=S%5==0?1:0},B.push=function(){var S=16*(this.depth+1);this.matrixStack.length<S+16&&(this.matrixStack.length=S+16);for(var y=0;y<16;y++)this.matrixStack[S+y]=this.currentMatrix[y];this.depth++},B.pop=function(){this.depth--,this.depth<0&&(myError("Invalid matrix stack."),this.depth=0);for(var S=16*this.depth,y=0;y<16;y++)this.currentMatrix[y]=this.matrixStack[S+y]},B.getMatrix=function(){return this.currentMatrix},B.multMatrix=function(S){var y,M,pt;for(y=0;y<16;y++)this.tmp[y]=0;for(y=0;y<4;y++)for(M=0;M<4;M++)for(pt=0;pt<4;pt++)this.tmp[y+4*M]+=this.currentMatrix[y+4*pt]*S[pt+4*M];for(y=0;y<16;y++)this.currentMatrix[y]=this.tmp[y]}},82:function(ai,F,vt){"use strict";var B=vt(38),S=vt(37);document.head.innerHTML+=`
<style>
  .live2d-widget-dialog-container {
    width: 300px;
    height: 120px;
    position: absolute;
    bottom: 65%;
    right: 0px;
    transform-origin: right;
    padding: 12px;
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
  }
  .live2d-widget-dialog {
    width: 100%;
    height: 100%;
    color: #917159;
    font-size: 16px;
    padding: 12px;
    border: 2px solid rgb(236, 203, 180);
    background: rgb(252, 248, 244);
    box-sizing: border-box;
    border-radius: 10px;
    transform: rotate(-2deg);
    opacity: 0;
    transition: 200ms opacity;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 1px 6px, rgba(0, 0, 0, 0.12) 0px 1px 4px;
    animation: live2d-widget-dialog-tingle 4s ease-in-out 0s infinite alternate;
  }
  @keyframes live2d-widget-dialog-tingle {
    0% { transform: translate(-1px, 1.5px) rotate(-2deg); }
    100% { transform: translate(1px, -1.5px) rotate(2deg); }
  }
</style>
`;var y=void 0,M=void 0,pt=void 0;function b(){M.style.opacity=1}function d(){M.style.opacity=0}function E(P){b(),M.innerText=P,clearTimeout(pt),pt=setTimeout(function(){d()},5e3)}function O(){var P=new XMLHttpRequest;P.open("get","https://v1.hitokoto.cn"),P.setRequestHeader("Cache-Control","no-cache"),P.onreadystatechange=function(){P.readyState===4&&(E(JSON.parse(P.responseText).hitokoto),setTimeout(O,1e4))},P.send()}ai.exports={createDialogElement:function(P){(y=document.createElement("div")).className="live2d-widget-dialog-container",y.style.transform="scale("+B.config.display.width/250+")",(M=document.createElement("div")).className="live2d-widget-dialog",y.appendChild(M),P.appendChild(y),S.L2Dwidget.emit("create-dialog",y),B.config.dialog.hitokoto&&O()},displayDialog:b,hiddenDialog:d,alertText:E,showHitokotoLoop:O}},83:function(ai,F){ai.exports={import:function(){throw new Error("System.import cannot be used indirectly")}}},84:function(ai,F,vt){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.cManager=void 0;var B=vt(78),S=vt(85),y=vt(86),M=vt(79);function pt(b){this.eventemitter=b,this.models=[],this.count=-1,this.reloadFlg=!1,B.Live2DFramework.setPlatformManager(new S.PlatformManager)}pt.prototype.createModel=function(){var b=new y.cModel;return this.models.push(b),b},pt.prototype.changeModel=function(b,d){this.reloadFlg&&(this.reloadFlg=!1,this.releaseModel(0,b),this.createModel(),this.models[0].load(b,d))},pt.prototype.getModel=function(b){return b>=this.models.length?null:this.models[b]},pt.prototype.releaseModel=function(b,d){this.models.length<=b||(this.models[b].release(d),delete this.models[b],this.models.splice(b,1))},pt.prototype.numModels=function(){return this.models.length},pt.prototype.setDrag=function(b,d){for(var E=0;E<this.models.length;E++)this.models[E].setDrag(b,d)},pt.prototype.tapEvent=function(b,d){M.cDefine.DEBUG_LOG&&console.log("tapEvent view x:"+b+" y:"+d);for(var E=0;E<this.models.length;E++)this.models[E].hitTest(M.cDefine.HIT_AREA_HEAD,b,d)?(this.eventemitter.emit("tapface"),M.cDefine.DEBUG_LOG&&console.log("Tap face."),this.models[E].setRandomExpression()):this.models[E].hitTest(M.cDefine.HIT_AREA_BODY,b,d)&&(this.eventemitter.emit("tapbody"),M.cDefine.DEBUG_LOG&&console.log("Tap body. models["+E+"]"),this.models[E].startRandomMotion(M.cDefine.MOTION_GROUP_TAP_BODY,M.cDefine.PRIORITY_NORMAL));return!0},F.cManager=pt},85:function(ai,F,vt){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.PlatformManager=y;var B=vt(80),S=vt(77);function y(){}y.prototype.loadBytes=function(M,pt){var b=new XMLHttpRequest;b.open("GET",M,!0),b.responseType="arraybuffer",b.onload=function(){switch(b.status){case 200:pt(b.response);break;default:console.error("Failed to load ("+b.status+") : "+M)}},b.send(null)},y.prototype.loadString=function(M){this.loadBytes(M,function(pt){return pt})},y.prototype.loadLive2DModel=function(M,pt){var b=null;this.loadBytes(M,function(d){b=S.Live2DModelWebGL.loadModel(d),pt(b)})},y.prototype.loadTexture=function(M,pt,b,d){var E=new Image;E.crossOrigin="Anonymous",E.src=b,E.onload=onload,E.onerror=onerror,E.onload=function(){var O=B.currWebGL,P=O.createTexture();if(!P)return console.error("Failed to generate gl texture name."),-1;M.isPremultipliedAlpha()||O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,1),O.activeTexture(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,P),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,E),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.LINEAR),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.LINEAR_MIPMAP_NEAREST),O.generateMipmap(O.TEXTURE_2D),M.setTexture(pt,P),P=null,typeof d=="function"&&d()},E.onerror=function(){console.error("Failed to load image : "+b)}},y.prototype.jsonParseFromBytes=function(M){var pt,b=new Uint8Array(M,0,3);return pt=b[0]==239&&b[1]==187&&b[2]==191?String.fromCharCode.apply(null,new Uint8Array(M,3)):String.fromCharCode.apply(null,new Uint8Array(M)),JSON.parse(pt)},y.prototype.log=function(M){console.log(M)}},86:function(ai,F,vt){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.cModel=b;var B=vt(78),S=vt(87),y=vt(81),M=vt(79),pt=vt(77);function b(){B.L2DBaseModel.prototype.constructor.call(this),this.modelHomeDir="",this.modelSetting=null,this.tmpMatrix=[]}b.prototype=new B.L2DBaseModel,b.prototype.load=function(d,E,O){this.setUpdating(!0),this.setInitialized(!1),this.modelHomeDir=E.substring(0,E.lastIndexOf("/")+1),this.modelSetting=new S.ModelSettingJson;var P=this;this.modelSetting.loadModelSetting(E,function(){var Pt=P.modelHomeDir+P.modelSetting.getModelFile();P.loadModelData(Pt,function(rt){for(var Yt=0;Yt<P.modelSetting.getTextureNum();Yt++){if(/^https?:\/\/|^\/\//i.test(P.modelSetting.getTextureFile(Yt)))var Qt=P.modelSetting.getTextureFile(Yt);else Qt=P.modelHomeDir+P.modelSetting.getTextureFile(Yt);P.loadTexture(Yt,Qt,function(){if(P.isTexLoaded){if(P.modelSetting.getExpressionNum()>0){P.expressions={};for(var mt=0;mt<P.modelSetting.getExpressionNum();mt++){var Ft=P.modelSetting.getExpressionName(mt),f=P.modelHomeDir+P.modelSetting.getExpressionFile(mt);P.loadExpression(Ft,f)}}else P.expressionManager=null,P.expressions={};if(P.eyeBlink==null&&(P.eyeBlink=new B.L2DEyeBlink),P.modelSetting.getPhysicsFile()!=null?P.loadPhysics(P.modelHomeDir+P.modelSetting.getPhysicsFile()):P.physics=null,P.modelSetting.getPoseFile()!=null?P.loadPose(P.modelHomeDir+P.modelSetting.getPoseFile(),function(){P.pose.updateParam(P.live2DModel)}):P.pose=null,P.modelSetting.getLayout()!=null){var g=P.modelSetting.getLayout();g.width!=null&&P.modelMatrix.setWidth(g.width),g.height!=null&&P.modelMatrix.setHeight(g.height),g.x!=null&&P.modelMatrix.setX(g.x),g.y!=null&&P.modelMatrix.setY(g.y),g.center_x!=null&&P.modelMatrix.centerX(g.center_x),g.center_y!=null&&P.modelMatrix.centerY(g.center_y),g.top!=null&&P.modelMatrix.top(g.top),g.bottom!=null&&P.modelMatrix.bottom(g.bottom),g.left!=null&&P.modelMatrix.left(g.left),g.right!=null&&P.modelMatrix.right(g.right)}for(mt=0;mt<P.modelSetting.getInitParamNum();mt++)P.live2DModel.setParamFloat(P.modelSetting.getInitParamID(mt),P.modelSetting.getInitParamValue(mt));for(mt=0;mt<P.modelSetting.getInitPartsVisibleNum();mt++)P.live2DModel.setPartsOpacity(P.modelSetting.getInitPartsVisibleID(mt),P.modelSetting.getInitPartsVisibleValue(mt));P.live2DModel.saveParam(),P.preloadMotionGroup(M.cDefine.MOTION_GROUP_IDLE),P.mainMotionManager.stopAllMotions(),P.setUpdating(!1),P.setInitialized(!0),typeof O=="function"&&O()}})}})})},b.prototype.release=function(d){var E=B.Live2DFramework.getPlatformManager();d.deleteTexture(E.texture)},b.prototype.preloadMotionGroup=function(d){for(var E=this,O=0;O<this.modelSetting.getMotionNum(d);O++){var P=this.modelSetting.getMotionFile(d,O);this.loadMotion(P,this.modelHomeDir+P,function(Pt){Pt.setFadeIn(E.modelSetting.getMotionFadeIn(d,O)),Pt.setFadeOut(E.modelSetting.getMotionFadeOut(d,O))})}},b.prototype.update=function(){if(this.live2DModel!=null){var d=2*((pt.UtSystem.getUserTimeMSec()-this.startTimeMSec)/1e3)*Math.PI;this.mainMotionManager.isFinished()&&this.startRandomMotion(M.cDefine.MOTION_GROUP_IDLE,M.cDefine.PRIORITY_IDLE),this.live2DModel.loadParam(),this.mainMotionManager.updateParam(this.live2DModel)||this.eyeBlink!=null&&this.eyeBlink.updateParam(this.live2DModel),this.live2DModel.saveParam(),this.expressionManager==null||this.expressions==null||this.expressionManager.isFinished()||this.expressionManager.updateParam(this.live2DModel),this.live2DModel.addToParamFloat("PARAM_ANGLE_X",30*this.dragX,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",30*this.dragY,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",this.dragX*this.dragY*-30,1),this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",10*this.dragX,1),this.live2DModel.addToParamFloat("PARAM_EYE_BALL_X",this.dragX,1),this.live2DModel.addToParamFloat("PARAM_EYE_BALL_Y",this.dragY,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_X",Number(15*Math.sin(d/6.5345)),.5),this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",Number(8*Math.sin(d/3.5345)),.5),this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",Number(10*Math.sin(d/5.5345)),.5),this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",Number(4*Math.sin(d/15.5345)),.5),this.live2DModel.setParamFloat("PARAM_BREATH",Number(.5+.5*Math.sin(d/3.2345)),1),this.physics!=null&&this.physics.updateParam(this.live2DModel),this.lipSync==null&&this.live2DModel.setParamFloat("PARAM_MOUTH_OPEN_Y",this.lipSyncValue),this.pose!=null&&this.pose.updateParam(this.live2DModel),this.live2DModel.update()}else M.cDefine.DEBUG_LOG&&console.error("Failed to update.")},b.prototype.setRandomExpression=function(){var d=[];for(var E in this.expressions)d.push(E);var O=parseInt(Math.random()*d.length);this.setExpression(d[O])},b.prototype.startRandomMotion=function(d,E){var O=this.modelSetting.getMotionNum(d),P=parseInt(Math.random()*O);this.startMotion(d,P,E)},b.prototype.startMotion=function(d,E,O){var P=this.modelSetting.getMotionFile(d,E);if(P!=null&&P!=""){if(O==M.cDefine.PRIORITY_FORCE)this.mainMotionManager.setReservePriority(O);else if(!this.mainMotionManager.reserveMotion(O))return void(M.cDefine.DEBUG_LOG&&console.log("Motion is running."));var Pt,rt=this;this.motions[d]==null?this.loadMotion(d,this.modelHomeDir+P,function(Yt){Pt=Yt,rt.setFadeInFadeOut(d,E,O,Pt)}):(Pt=this.motions[d],rt.setFadeInFadeOut(d,E,O,Pt))}else M.cDefine.DEBUG_LOG&&console.error("Failed to motion.")},b.prototype.setFadeInFadeOut=function(d,E,O,P){var Pt=this.modelSetting.getMotionFile(d,E);if(P.setFadeIn(this.modelSetting.getMotionFadeIn(d,E)),P.setFadeOut(this.modelSetting.getMotionFadeOut(d,E)),M.cDefine.DEBUG_LOG&&console.log("Start motion : "+Pt),this.modelSetting.getMotionSound(d,E)==null)this.mainMotionManager.startMotionPrio(P,O);else{var rt=this.modelSetting.getMotionSound(d,E),Yt=document.createElement("audio");Yt.src=this.modelHomeDir+rt,M.cDefine.DEBUG_LOG&&console.log("Start sound : "+rt),Yt.play(),this.mainMotionManager.startMotionPrio(P,O)}},b.prototype.setExpression=function(d){var E=this.expressions[d];M.cDefine.DEBUG_LOG&&console.log("Expression : "+d),this.expressionManager.startMotion(E,!1)},b.prototype.draw=function(d){y.MatrixStack.push(),y.MatrixStack.multMatrix(this.modelMatrix.getArray()),this.tmpMatrix=y.MatrixStack.getMatrix(),this.live2DModel.setMatrix(this.tmpMatrix),this.live2DModel.draw(),y.MatrixStack.pop()},b.prototype.hitTest=function(d,E,O){for(var P=this.modelSetting.getHitAreaNum(),Pt=0;Pt<P;Pt++)if(d==this.modelSetting.getHitAreaName(Pt)){var rt=this.modelSetting.getHitAreaID(Pt);return this.hitTestSimple(rt,E,O)}return!1}},87:function(ai,F,vt){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.ModelSettingJson=S;var B=vt(78);function S(){this.NAME="name",this.ID="id",this.MODEL="model",this.TEXTURES="textures",this.HIT_AREAS="hit_areas",this.PHYSICS="physics",this.POSE="pose",this.EXPRESSIONS="expressions",this.MOTION_GROUPS="motions",this.SOUND="sound",this.FADE_IN="fade_in",this.FADE_OUT="fade_out",this.LAYOUT="layout",this.INIT_PARAM="init_param",this.INIT_PARTS_VISIBLE="init_parts_visible",this.VALUE="val",this.FILE="file",this.json={}}S.prototype.loadModelSetting=function(y,M){var pt=this;B.Live2DFramework.getPlatformManager().loadBytes(y,function(b){var d=String.fromCharCode.apply(null,new Uint8Array(b));pt.json=JSON.parse(d),M()})},S.prototype.getTextureFile=function(y){return this.json[this.TEXTURES]==null||this.json[this.TEXTURES][y]==null?null:this.json[this.TEXTURES][y]},S.prototype.getModelFile=function(){return this.json[this.MODEL]},S.prototype.getTextureNum=function(){return this.json[this.TEXTURES]==null?0:this.json[this.TEXTURES].length},S.prototype.getHitAreaNum=function(){return this.json[this.HIT_AREAS]==null?0:this.json[this.HIT_AREAS].length},S.prototype.getHitAreaID=function(y){return this.json[this.HIT_AREAS]==null||this.json[this.HIT_AREAS][y]==null?null:this.json[this.HIT_AREAS][y][this.ID]},S.prototype.getHitAreaName=function(y){return this.json[this.HIT_AREAS]==null||this.json[this.HIT_AREAS][y]==null?null:this.json[this.HIT_AREAS][y][this.NAME]},S.prototype.getPhysicsFile=function(){return this.json[this.PHYSICS]},S.prototype.getPoseFile=function(){return this.json[this.POSE]},S.prototype.getExpressionNum=function(){return this.json[this.EXPRESSIONS]==null?0:this.json[this.EXPRESSIONS].length},S.prototype.getExpressionFile=function(y){return this.json[this.EXPRESSIONS]==null?null:this.json[this.EXPRESSIONS][y][this.FILE]},S.prototype.getExpressionName=function(y){return this.json[this.EXPRESSIONS]==null?null:this.json[this.EXPRESSIONS][y][this.NAME]},S.prototype.getLayout=function(){return this.json[this.LAYOUT]},S.prototype.getInitParamNum=function(){return this.json[this.INIT_PARAM]==null?0:this.json[this.INIT_PARAM].length},S.prototype.getMotionNum=function(y){return this.json[this.MOTION_GROUPS]==null||this.json[this.MOTION_GROUPS][y]==null?0:this.json[this.MOTION_GROUPS][y].length},S.prototype.getMotionFile=function(y,M){return this.json[this.MOTION_GROUPS]==null||this.json[this.MOTION_GROUPS][y]==null||this.json[this.MOTION_GROUPS][y][M]==null?null:this.json[this.MOTION_GROUPS][y][M][this.FILE]},S.prototype.getMotionSound=function(y,M){return this.json[this.MOTION_GROUPS]==null||this.json[this.MOTION_GROUPS][y]==null||this.json[this.MOTION_GROUPS][y][M]==null||this.json[this.MOTION_GROUPS][y][M][this.SOUND]==null?null:this.json[this.MOTION_GROUPS][y][M][this.SOUND]},S.prototype.getMotionFadeIn=function(y,M){return this.json[this.MOTION_GROUPS]==null||this.json[this.MOTION_GROUPS][y]==null||this.json[this.MOTION_GROUPS][y][M]==null||this.json[this.MOTION_GROUPS][y][M][this.FADE_IN]==null?1e3:this.json[this.MOTION_GROUPS][y][M][this.FADE_IN]},S.prototype.getMotionFadeOut=function(y,M){return this.json[this.MOTION_GROUPS]==null||this.json[this.MOTION_GROUPS][y]==null||this.json[this.MOTION_GROUPS][y][M]==null||this.json[this.MOTION_GROUPS][y][M][this.FADE_OUT]==null?1e3:this.json[this.MOTION_GROUPS][y][M][this.FADE_OUT]},S.prototype.getInitParamID=function(y){return this.json[this.INIT_PARAM]==null||this.json[this.INIT_PARAM][y]==null?null:this.json[this.INIT_PARAM][y][this.ID]},S.prototype.getInitParamValue=function(y){return this.json[this.INIT_PARAM]==null||this.json[this.INIT_PARAM][y]==null?NaN:this.json[this.INIT_PARAM][y][this.VALUE]},S.prototype.getInitPartsVisibleNum=function(){return this.json[this.INIT_PARTS_VISIBLE]==null?0:this.json[this.INIT_PARTS_VISIBLE].length},S.prototype.getInitPartsVisibleID=function(y){return this.json[this.INIT_PARTS_VISIBLE]==null||this.json[this.INIT_PARTS_VISIBLE][y]==null?null:this.json[this.INIT_PARTS_VISIBLE][y][this.ID]},S.prototype.getInitPartsVisibleValue=function(y){return this.json[this.INIT_PARTS_VISIBLE]==null||this.json[this.INIT_PARTS_VISIBLE][y]==null?NaN:this.json[this.INIT_PARTS_VISIBLE][y][this.VALUE]}}});
